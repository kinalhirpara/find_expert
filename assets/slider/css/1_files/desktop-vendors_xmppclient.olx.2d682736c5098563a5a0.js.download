(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1046:function(e,t,n){e.exports={Namespace:n(1692),MUC:n(1693),PubSub:n(1694),Jingle:n(1695),Presence:n(1696)}},1087:function(e,t,n){"use strict";var i=n(1640),r=/^[\x00-\x7F]*$/;function o(e,t){return e?e+"@"+t:t}function a(e,t,n){return n?o(e,t)+"/"+n:o(e,t)}t.prep=function(e){var n=e.local,r=e.domain,s=e.resource,u=n;return n&&(n=i.nodeprep(n),u=t.unescape(n)),s&&(s=i.resourceprep(s)),"."===r[r.length-1]&&(r=r.slice(0,r.length-1)),r=i.nameprep(r.split(".").map(i.toUnicode).join(".")),{prepped:e.prepped||i.available,local:n,domain:r,resource:s,bare:o(n,r),full:a(n,r,s),unescapedLocal:u,unescapedBare:o(u,r),unescapedFull:a(u,r,s)}},t.parse=function(e,n){var i,o="",a="";n=n||r.test(e);var s=e.indexOf("/");s>0&&(a=e.slice(s+1),e=e.slice(0,s));var u=e.indexOf("@");u>0&&(o=e.slice(0,u),e=e.slice(u+1)),i=e;var c=t.prep({local:o,domain:i,resource:a});return c.prepped=c.prepped||n,c},t.equal=function(e,n,i){return e=new t.JID(e),n=new t.JID(n),2===arguments.length&&(i=!0),e.local===n.local&&e.domain===n.domain&&e.resource===n.resource&&(!i||e.prepped&&n.prepped)},t.equalBare=function(e,n,i){return e=new t.JID(e),n=new t.JID(n),2===arguments.length&&(i=!0),e.local===n.local&&e.domain===n.domain&&(!i||e.prepped&&n.prepped)},t.isBare=function(e){return!!!(e=new t.JID(e)).resource},t.isFull=function(e){return!!(e=new t.JID(e)).resource},t.escape=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},t.unescape=function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},t.create=function(e,n,i){return new t.JID(e,n,i)},t.JID=function(e,n,i){var o={};if(!e||n||i)if(n){var a=r.test(e)&&r.test(n);i&&(a=a&&r.test(i)),o=t.prep({local:t.escape(e),domain:n,resource:i,prepped:a})}else o={};else if("string"==typeof e)o=t.parse(e);else{if(!(e._isJID||e instanceof t.JID))throw new Error("Invalid argument type");o=e}this._isJID=!0,this.local=o.local||"",this.domain=o.domain||"",this.resource=o.resource||"",this.bare=o.bare||"",this.full=o.full||"",this.unescapedLocal=o.unescapedLocal||"",this.unescapedBare=o.unescapedBare||"",this.unescapedFull=o.unescapedFull||"",this.prepped=o.prepped},t.JID.prototype.toString=function(){return this.full},t.JID.prototype.toJSON=function(){return this.full}},1090:function(e,t,n){(function(e,i){var r=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),u=i[n];n<o;u=i[++n])h(u)||!S(u)?a+=" "+u:a+=" "+s(u);return a},t.deprecate=function(n,r){if(v(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&t._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),p(i,e,i.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function p(e,n,i){if(e.customInspect&&n&&N(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return g(r)||(r=p(e,r,i)),r}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),_(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(N(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return f(n)}var c,S="",E=!1,A=["{","}"];(d(n)&&(E=!0,A=["[","]"]),N(n))&&(S=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(S=" "+RegExp.prototype.toString.call(n)),x(n)&&(S=" "+Date.prototype.toUTCString.call(n)),_(n)&&(S=" "+f(n)),0!==a.length||E&&0!=n.length?i<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=E?function(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)j(t,String(a))?o.push(l(e,t,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(l(e,t,n,i,r,!0))}),o}(e,n,i,s,a):a.map(function(t){return l(e,n,i,s,t,E)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,S,A)):A[0]+S+A[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,i,r,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),j(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(u.value)<0?(s=h(n)?p(e,u.value,null):p(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return"number"==typeof e}function g(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return S(e)&&"[object RegExp]"===E(e)}function S(e){return"object"==typeof e&&null!==e}function x(e){return S(e)&&"[object Date]"===E(e)}function _(e){return S(e)&&("[object Error]"===E(e)||e instanceof Error)}function N(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(o)&&(o=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=i.pid;a[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else a[e]=function(){};return a[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=y,t.isObject=S,t.isDate=x,t.isError=_,t.isFunction=N,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(1661);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(1047),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,n(55),n(1085))},1134:function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,r=i?arguments[1]:void 0,o=i?arguments[2]:arguments[1];return o._groupName=r,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},t.once=function(e,t,n){var i=this,r=3===arguments.length,o=r?arguments[1]:void 0,a=r?arguments[2]:arguments[1];return this.on(e,o,function t(){i.off(e,t),a.apply(this,arguments)}),this},t.releaseGroup=function(e){var t,n,i,r;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,i=(r=this.callbacks[t]).length;n<i;n++)r[n]._groupName===e&&(r.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),0===i.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,r=[].slice.call(arguments,1),o=this.callbacks[e],a=this.getWildcardCallbacks(e);if(o)for(t=0,n=(i=o.slice()).length;t<n&&i[t];++t)i[t].apply(this,r);if(a)for(n=a.length,t=0,n=(i=a.slice()).length;t<n&&i[t];++t)i[t].apply(this,[e].concat(r));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)},1191:function(e,t,n){var i=n(1643),r=n(1461),o=n(1331),a=n(1192);var s=function(e,t){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?e(n,i):t(n,o(i,r,3))}}(i,r);e.exports=s},1192:function(e,t){var n="[object Function]",i=/^\[object .+?Constructor\]$/;function r(e){return!!e&&"object"==typeof e}var o=Object.prototype,a=Function.prototype.toString,s=o.hasOwnProperty,u=o.toString,c=RegExp("^"+a.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=9007199254740991;var f=function(e,t){var o=null==e?void 0:e[t];return function(e){if(null==e)return!1;if(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&u.call(e)==n}(e))return c.test(a.call(e));return r(e)&&i.test(e)}(o)?o:void 0}(Array,"isArray")||function(e){return r(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}(e.length)&&"[object Array]"==u.call(e)};e.exports=f},1193:function(e,t,n){var i=n(1645),r=n(1647),o=n(1216);var a=r(function(e,t,n){return n?function(e,t,n){for(var i=-1,r=o(t),a=r.length;++i<a;){var s=r[i],u=e[s],c=n(u,t[s],s,e,t);(c==c?c===u:u!=u)&&(void 0!==u||s in e)||(e[s]=c)}return e}(e,t,n):i(e,t)});e.exports=a},1216:function(e,t,n){var i=n(1462),r=n(1644),o=n(1192),a=/^\d+$/,s=Object.prototype.hasOwnProperty,u=i(Object,"keys"),c=9007199254740991;var p=function(e){return function(t){return null==t?void 0:t[e]}}("length");function f(e,t){return e="number"==typeof e||a.test(e)?+e:-1,t=null==t?c:t,e>-1&&e%1==0&&e<t}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function d(e){for(var t=function(e){if(null==e)return[];m(e)||(e=Object(e));var t=e.length;t=t&&l(t)&&(o(e)||r(e))&&t||0;var n=e.constructor,i=-1,a="function"==typeof n&&n.prototype===e,u=Array(t),c=t>0;for(;++i<t;)u[i]=i+"";for(var p in e)c&&f(p,t)||"constructor"==p&&(a||!s.call(e,p))||u.push(p);return u}(e),n=t.length,i=n&&e.length,a=!!i&&l(i)&&(o(e)||r(e)),u=-1,c=[];++u<n;){var p=t[u];(a&&f(p,i)||s.call(e,p))&&c.push(p)}return c}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var h=u?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&function(e){return null!=e&&l(p(e))}(e)?d(e):m(e)?u(e):[]}:d;e.exports=h},1217:function(e,t,n){"use strict";var i=n(1291),r=i.escapeXML,o=i.escapeXMLText,a=n(1468),s=a.equal,u=a.name,c=a.attrs,p=a.children,f=n(1469);function l(e,t){this.name=e,this.parent=null,this.children=[],this.attrs={},this.setAttrs(t)}l.prototype.is=function(e,t){return this.getName()===e&&(!t||this.getNS()===t)},l.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},l.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var e=this.name.substr(0,this.name.indexOf(":"));return this.findNS(e)}return this.findNS()},l.prototype.findNS=function(e){if(e){var t="xmlns:"+e;if(this.attrs[t])return this.attrs[t];if(this.parent)return this.parent.findNS(e)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},l.prototype.getXmlns=function(){var e={};for(var t in this.parent&&(e=this.parent.getXmlns()),this.attrs){var n=t.match("xmlns:?(.*)");this.attrs.hasOwnProperty(t)&&n&&(e[this.attrs[t]]=n[1])}return e},l.prototype.setAttrs=function(e){"string"==typeof e?this.attrs.xmlns=e:e&&Object.keys(e).forEach(function(t){this.attrs[t]=e[t]},this)},l.prototype.getAttr=function(e,t){if(!t)return this.attrs[e];var n=this.getXmlns();return n[t]?this.attrs[[n[t],e].join(":")]:null},l.prototype.getChild=function(e,t){return this.getChildren(e,t)[0]},l.prototype.getChildren=function(e,t){for(var n=[],i=0;i<this.children.length;i++){var r=this.children[i];!r.getName||r.getName()!==e||t&&r.getNS()!==t||n.push(r)}return n},l.prototype.getChildByAttr=function(e,t,n,i){return this.getChildrenByAttr(e,t,n,i)[0]},l.prototype.getChildrenByAttr=function(e,t,n,i){for(var r=[],o=0;o<this.children.length;o++){var a=this.children[o];!a.attrs||a.attrs[e]!==t||n&&a.getNS()!==n||r.push(a),i&&a.getChildrenByAttr&&r.push(a.getChildrenByAttr(e,t,n,!0))}return i&&(r=[].concat.apply([],r)),r},l.prototype.getChildrenByFilter=function(e,t){for(var n=[],i=0;i<this.children.length;i++){var r=this.children[i];e(r)&&n.push(r),t&&r.getChildrenByFilter&&n.push(r.getChildrenByFilter(e,!0))}return t&&(n=[].concat.apply([],n)),n},l.prototype.getText=function(){for(var e="",t=0;t<this.children.length;t++){var n=this.children[t];"string"!=typeof n&&"number"!=typeof n||(e+=n)}return e},l.prototype.getChildText=function(e,t){var n=this.getChild(e,t);return n?n.getText():null},l.prototype.getChildElements=function(){return this.getChildrenByFilter(function(e){return e instanceof l})},l.prototype.root=function(){return this.parent?this.parent.root():this},l.prototype.tree=l.prototype.root,l.prototype.up=function(){return this.parent?this.parent:this},l.prototype.c=function(e,t){return this.cnode(new l(e,t))},l.prototype.cnode=function(e){return this.children.push(e),"object"==typeof e&&(e.parent=this),e},l.prototype.t=function(e){return this.children.push(e),this},l.prototype.remove=function(e,t){var n;return n="string"==typeof e?function(n){return!(n.is&&n.is(e,t))}:function(t){return t!==e},this.children=this.children.filter(n),this},l.prototype.clone=function(){return f(this)},l.prototype.text=function(e){return e&&1===this.children.length?(this.children[0]=e,this):this.getText()},l.prototype.attr=function(e,t){return void 0!==t||null===t?(this.attrs||(this.attrs={}),this.attrs[e]=t,this):this.attrs[e]},l.prototype.toString=function(){var e="";return this.write(function(t){e+=t}),e},l.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(e){return e&&e.toJSON?e.toJSON():e})}},l.prototype._addChildren=function(e){e(">");for(var t=0;t<this.children.length;t++){var n=this.children[t];(n||0===n)&&(n.write?n.write(e):"string"==typeof n?e(o(n)):n.toString&&e(o(n.toString(10))))}e("</"),e(this.name),e(">")},l.prototype.write=function(e){for(var t in e("<"),e(this.name),this.attrs){var n=this.attrs[t];null!=n&&(e(" "),e(t),e('="'),"string"!=typeof n&&(n=n.toString()),e(r(n)),e('"'))}0===this.children.length?e("/>"):this._addChildren(e)},l.prototype.nameEquals=function(e){return u(this,e)},l.prototype.attrsEquals=function(e){return c(this,e)},l.prototype.childrenEquals=function(e){return p(this,e)},l.prototype.equals=function(e){return s(this,e)},e.exports=l},1291:function(e,t,n){"use strict";var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function r(e){return i[e]}var o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function a(e){if("#"===e[1]){var t;if(9===(t="x"===e[2]?parseInt(e.slice(3),16):parseInt(e.slice(2),10))||10===t||13===t||t>=32&&t<=55295||t>=57344&&t<=65533||t>=65536&&t<=1114111)return String.fromCodePoint(t);throw new Error("Illegal XML character 0x"+t.toString(16))}if(o[e])return o[e]||e;throw new Error("Illegal XML entity "+e)}t.escapeXML=function(e){return e.replace(/&|<|>|"|'/g,r)},t.unescapeXML=function(e){for(var t="",n=-1,i=-1,r=0;-1!==(n=e.indexOf("&",r))&&-1!==(i=e.indexOf(";",n+1));)t=t+e.substring(r,n)+a(e.substring(n,i+1)),r=i+1;return 0===r?e:t+=e.substring(r)},t.escapeXMLText=function(e){return e.replace(/&|<|>/g,r)},t.unescapeXMLText=function(e){return e.replace(/&(amp|#38|lt|#60|gt|#62);/g,a)}},1292:function(e,t,n){(function(e,n,i,r){!function(e,n){n(t)}(0,function(t){"use strict";function o(e,t){t|=0;for(var n=Math.max(e.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=e[t+r];return i}var a=function(e){var t=o(arguments,1);return function(){var n=o(arguments);return e.apply(null,t.concat(n))}},s=function(e){return function(){var t=o(arguments),n=t.pop();e.call(this,t,n)}};function u(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var c="function"==typeof e&&e,p="object"==typeof n&&"function"==typeof n.nextTick;function f(e){setTimeout(e,0)}function l(e){return function(t){var n=o(arguments,1);e(function(){t.apply(null,n)})}}var d=l(c?e:p?n.nextTick:f);function m(e){return s(function(t,n){var i;try{i=e.apply(this,t)}catch(e){return n(e)}u(i)&&"function"==typeof i.then?i.then(function(e){h(n,null,e)},function(e){h(n,e.message?e:new Error(e))}):n(null,i)})}function h(e,t,n){try{e(t,n)}catch(e){d(b,e)}}function b(e){throw e}var g="function"==typeof Symbol;function v(e){return g&&"AsyncFunction"===e[Symbol.toStringTag]}function y(e){return v(e)?m(e):e}function S(e){return function(t){var n=o(arguments,1),i=s(function(n,i){var r=this;return e(t,function(e,t){y(e).apply(r,n.concat(t))},i)});return n.length?i.apply(this,n):i}}var x="object"==typeof i&&i&&i.Object===Object&&i,_="object"==typeof self&&self&&self.Object===Object&&self,N=x||_||Function("return this")(),E=N.Symbol,A=Object.prototype,O=A.hasOwnProperty,j=A.toString,T=E?E.toStringTag:void 0;var I=Object.prototype.toString;var R="[object Null]",w="[object Undefined]",C=E?E.toStringTag:void 0;function M(e){return null==e?void 0===e?w:R:C&&C in Object(e)?function(e){var t=O.call(e,T),n=e[T];try{e[T]=void 0;var i=!0}catch(e){}var r=j.call(e);return i&&(t?e[T]=n:delete e[T]),r}(e):function(e){return I.call(e)}(e)}var P="[object AsyncFunction]",D="[object Function]",L="[object GeneratorFunction]",k="[object Proxy]";var U=9007199254740991;function B(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=U}function F(e){return null!=e&&B(e.length)&&!function(e){if(!u(e))return!1;var t=M(e);return t==D||t==L||t==P||t==k}(e)}var q={};function G(){}function J(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var V="function"==typeof Symbol&&Symbol.iterator,H=function(e){return V&&e[V]&&e[V]()};function z(e){return null!=e&&"object"==typeof e}var X="[object Arguments]";function K(e){return z(e)&&M(e)==X}var W=Object.prototype,Q=W.hasOwnProperty,$=W.propertyIsEnumerable,Y=K(function(){return arguments}())?K:function(e){return z(e)&&Q.call(e,"callee")&&!$.call(e,"callee")},Z=Array.isArray;var ee="object"==typeof t&&t&&!t.nodeType&&t,te=ee&&"object"==typeof r&&r&&!r.nodeType&&r,ne=te&&te.exports===ee?N.Buffer:void 0,ie=(ne?ne.isBuffer:void 0)||function(){return!1},re=9007199254740991,oe=/^(?:0|[1-9]\d*)$/;function ae(e,t){var n=typeof e;return!!(t=null==t?re:t)&&("number"==n||"symbol"!=n&&oe.test(e))&&e>-1&&e%1==0&&e<t}var se={};se["[object Float32Array]"]=se["[object Float64Array]"]=se["[object Int8Array]"]=se["[object Int16Array]"]=se["[object Int32Array]"]=se["[object Uint8Array]"]=se["[object Uint8ClampedArray]"]=se["[object Uint16Array]"]=se["[object Uint32Array]"]=!0,se["[object Arguments]"]=se["[object Array]"]=se["[object ArrayBuffer]"]=se["[object Boolean]"]=se["[object DataView]"]=se["[object Date]"]=se["[object Error]"]=se["[object Function]"]=se["[object Map]"]=se["[object Number]"]=se["[object Object]"]=se["[object RegExp]"]=se["[object Set]"]=se["[object String]"]=se["[object WeakMap]"]=!1;var ue="object"==typeof t&&t&&!t.nodeType&&t,ce=ue&&"object"==typeof r&&r&&!r.nodeType&&r,pe=ce&&ce.exports===ue&&x.process,fe=function(){try{var e=ce&&ce.require&&ce.require("util").types;return e||pe&&pe.binding&&pe.binding("util")}catch(e){}}(),le=fe&&fe.isTypedArray,de=le?function(e){return function(t){return e(t)}}(le):function(e){return z(e)&&B(e.length)&&!!se[M(e)]},me=Object.prototype.hasOwnProperty;function he(e,t){var n=Z(e),i=!n&&Y(e),r=!n&&!i&&ie(e),o=!n&&!i&&!r&&de(e),a=n||i||r||o,s=a?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],u=s.length;for(var c in e)!t&&!me.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ae(c,u))||s.push(c);return s}var be=Object.prototype;var ge=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),ve=Object.prototype.hasOwnProperty;function ye(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}(e))return ge(e);var t=[];for(var n in Object(e))ve.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Se(e){return F(e)?he(e):ye(e)}function xe(e){if(F(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=H(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):function(e){var t=Se(e),n=-1,i=t.length;return function(){var r=t[++n];return n<i?{value:e[r],key:r}:null}}(e)}function _e(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function Ne(e){return function(t,n,i){if(i=J(i||G),e<=0||!t)return i(null);var r=xe(t),o=!1,a=0,s=!1;function u(e,t){if(a-=1,e)o=!0,i(e);else{if(t===q||o&&a<=0)return o=!0,i(null);s||c()}}function c(){for(s=!0;a<e&&!o;){var t=r();if(null===t)return o=!0,void(a<=0&&i(null));a+=1,n(t.value,t.key,_e(u))}s=!1}c()}}function Ee(e,t,n,i){Ne(t)(e,y(n),i)}function Ae(e,t){return function(n,i,r){return e(n,t,i,r)}}function Oe(e,t,n){n=J(n||G);var i=0,r=0,o=e.length;function a(e,t){e?n(e):++r!==o&&t!==q||n(null)}for(0===o&&n(null);i<o;i++)t(e[i],i,_e(a))}var je=Ae(Ee,1/0),Te=function(e,t,n){(F(e)?Oe:je)(e,y(t),n)};function Ie(e){return function(t,n,i){return e(Te,t,y(n),i)}}function Re(e,t,n,i){i=i||G,t=t||[];var r=[],o=0,a=y(n);e(t,function(e,t,n){var i=o++;a(e,function(e,t){r[i]=t,n(e)})},function(e){i(e,r)})}var we=Ie(Re),Ce=S(we);function Me(e){return function(t,n,i,r){return e(Ne(n),t,y(i),r)}}var Pe=Me(Re),De=Ae(Pe,1),Le=S(De);function ke(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}var Ue=function(e){return function(t,n,i){for(var r=-1,o=Object(t),a=i(t),s=a.length;s--;){var u=a[e?s:++r];if(!1===n(o[u],u,o))break}return t}}();function Be(e,t){return e&&Ue(e,t,Se)}function Fe(e){return e!=e}function qe(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}(e,Fe,n)}var Ge=function(e,t,n){"function"==typeof t&&(n=t,t=null),n=J(n||G);var i=Se(e).length;if(!i)return n(null);t||(t=i);var r={},a=0,s=!1,u=Object.create(null),c=[],p=[],f={};function l(e,t){c.push(function(){!function(e,t){if(s)return;var i=_e(function(t,i){if(a--,arguments.length>2&&(i=o(arguments,1)),t){var c={};Be(r,function(e,t){c[t]=e}),c[e]=i,s=!0,u=Object.create(null),n(t,c)}else r[e]=i,function(e){ke(u[e]||[],function(e){e()}),d()}(e)});a++;var c=y(t[t.length-1]);t.length>1?c(r,i):c(i)}(e,t)})}function d(){if(0===c.length&&0===a)return n(null,r);for(;c.length&&a<t;){c.shift()()}}function m(t){var n=[];return Be(e,function(e,i){Z(e)&&qe(e,t,0)>=0&&n.push(i)}),n}Be(e,function(t,n){if(!Z(t))return l(n,[t]),void p.push(n);var i=t.slice(0,t.length-1),r=i.length;if(0===r)return l(n,t),void p.push(n);f[n]=r,ke(i,function(o){if(!e[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+i.join(", "));!function(e,t){var n=u[e];n||(n=u[e]=[]);n.push(t)}(o,function(){0===--r&&l(n,t)})})}),function(){var e,t=0;for(;p.length;)e=p.pop(),t++,ke(m(e),function(e){0==--f[e]&&p.push(e)});if(t!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),d()};function Je(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}var Ve="[object Symbol]";var He=1/0,ze=E?E.prototype:void 0,Xe=ze?ze.toString:void 0;function Ke(e){if("string"==typeof e)return e;if(Z(e))return Je(e,Ke)+"";if(function(e){return"symbol"==typeof e||z(e)&&M(e)==Ve}(e))return Xe?Xe.call(e):"";var t=e+"";return"0"==t&&1/e==-He?"-0":t}function We(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}(e,t,n)}var Qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var $e="[\\ud800-\\udfff]",Ye="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ze="\\ud83c[\\udffb-\\udfff]",et="[^\\ud800-\\udfff]",tt="(?:\\ud83c[\\udde6-\\uddff]){2}",nt="[\\ud800-\\udbff][\\udc00-\\udfff]",it="(?:"+Ye+"|"+Ze+")"+"?",rt="[\\ufe0e\\ufe0f]?"+it+("(?:\\u200d(?:"+[et,tt,nt].join("|")+")[\\ufe0e\\ufe0f]?"+it+")*"),ot="(?:"+[et+Ye+"?",Ye,tt,nt,$e].join("|")+")",at=RegExp(Ze+"(?="+Ze+")|"+ot+rt,"g");function st(e){return function(e){return Qe.test(e)}(e)?function(e){return e.match(at)||[]}(e):function(e){return e.split("")}(e)}var ut=/^\s+|\s+$/g;function ct(e,t,n){if((e=function(e){return null==e?"":Ke(e)}(e))&&(n||void 0===t))return e.replace(ut,"");if(!e||!(t=Ke(t)))return e;var i=st(e),r=st(t);return We(i,function(e,t){for(var n=-1,i=e.length;++n<i&&qe(t,e[n],0)>-1;);return n}(i,r),function(e,t){for(var n=e.length;n--&&qe(t,e[n],0)>-1;);return n}(i,r)+1).join("")}var pt=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ft=/,/,lt=/(=.+)?(\s*)$/,dt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function mt(e,t){var n={};Be(e,function(e,t){var i,r=v(e),o=!r&&1===e.length||r&&0===e.length;if(Z(e))i=e.slice(0,-1),e=e[e.length-1],n[t]=i.concat(i.length>0?a:e);else if(o)n[t]=e;else{if(i=function(e){return e=(e=(e=(e=e.toString().replace(dt,"")).match(pt)[2].replace(" ",""))?e.split(ft):[]).map(function(e){return ct(e.replace(lt,""))})}(e),0===e.length&&!r&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");r||i.pop(),n[t]=i.concat(a)}function a(t,n){var r=Je(i,function(e){return t[e]});r.push(n),y(e).apply(null,r)}}),Ge(n,t)}function ht(){this.head=this.tail=null,this.length=0}function bt(e,t){e.length=1,e.head=e.tail=t}function gt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=y(e),r=0,o=[],a=!1;function s(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(p.started=!0,Z(e)||(e=[e]),0===e.length&&p.idle())return d(function(){p.drain()});for(var i=0,r=e.length;i<r;i++){var o={data:e[i],callback:n||G};t?p._tasks.unshift(o):p._tasks.push(o)}a||(a=!0,d(function(){a=!1,p.process()}))}function u(e){return function(t){r-=1;for(var n=0,i=e.length;n<i;n++){var a=e[n],s=qe(o,a,0);0===s?o.shift():s>0&&o.splice(s,1),a.callback.apply(a,arguments),null!=t&&p.error(t,a.data)}r<=p.concurrency-p.buffer&&p.unsaturated(),p.idle()&&p.drain(),p.process()}}var c=!1,p={_tasks:new ht,concurrency:t,payload:n,saturated:G,unsaturated:G,buffer:t/4,empty:G,drain:G,error:G,started:!1,paused:!1,push:function(e,t){s(e,!1,t)},kill:function(){p.drain=G,p._tasks.empty()},unshift:function(e,t){s(e,!0,t)},remove:function(e){p._tasks.remove(e)},process:function(){if(!c){for(c=!0;!p.paused&&r<p.concurrency&&p._tasks.length;){var e=[],t=[],n=p._tasks.length;p.payload&&(n=Math.min(n,p.payload));for(var a=0;a<n;a++){var s=p._tasks.shift();e.push(s),o.push(s),t.push(s.data)}r+=1,0===p._tasks.length&&p.empty(),r===p.concurrency&&p.saturated();var f=_e(u(e));i(t,f)}c=!1}},length:function(){return p._tasks.length},running:function(){return r},workersList:function(){return o},idle:function(){return p._tasks.length+r===0},pause:function(){p.paused=!0},resume:function(){!1!==p.paused&&(p.paused=!1,d(p.process))}};return p}function vt(e,t){return gt(e,1,t)}ht.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},ht.prototype.empty=function(){for(;this.head;)this.shift();return this},ht.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},ht.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},ht.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):bt(this,e)},ht.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):bt(this,e)},ht.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ht.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ht.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},ht.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var yt=Ae(Ee,1);function St(e,t,n,i){i=J(i||G);var r=y(n);yt(e,function(e,n,i){r(t,e,function(e,n){t=n,i(e)})},function(e){i(e,t)})}function xt(){var e=Je(arguments,y);return function(){var t=o(arguments),n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=G,St(e,t,function(e,t,i){t.apply(n,e.concat(function(e){var t=o(arguments,1);i(e,t)}))},function(e,t){i.apply(n,[e].concat(t))})}}var _t=function(){return xt.apply(null,o(arguments).reverse())},Nt=Array.prototype.concat,Et=function(e,t,n,i){i=i||G;var r=y(n);Pe(e,t,function(e,t){r(e,function(e){return e?t(e):t(null,o(arguments,1))})},function(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&(n=Nt.apply(n,t[r]));return i(e,n)})},At=Ae(Et,1/0),Ot=Ae(Et,1),jt=function(){var e=o(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function Tt(e){return e}function It(e,t){return function(n,i,r,o){o=o||G;var a,s=!1;n(i,function(n,i,o){r(n,function(i,r){i?o(i):e(r)&&!a?(s=!0,a=t(!0,n),o(null,q)):o()})},function(e){e?o(e):o(null,s?a:t(!1))})}}function Rt(e,t){return t}var wt=Ie(It(Tt,Rt)),Ct=Me(It(Tt,Rt)),Mt=Ae(Ct,1);function Pt(e){return function(t){var n=o(arguments,1);n.push(function(t){var n=o(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&ke(n,function(t){console[e](t)}))}),y(t).apply(null,n)}}var Dt=Pt("dir");function Lt(e,t,n){n=_e(n||G);var i=y(e),r=y(t);function a(e){if(e)return n(e);var t=o(arguments,1);t.push(s),r.apply(this,t)}function s(e,t){return e?n(e):t?void i(a):n(null)}s(null,!0)}function kt(e,t,n){n=_e(n||G);var i=y(e),r=function(e){if(e)return n(e);var a=o(arguments,1);if(t.apply(this,a))return i(r);n.apply(null,[null].concat(a))};i(r)}function Ut(e,t,n){kt(e,function(){return!t.apply(this,arguments)},n)}function Bt(e,t,n){n=_e(n||G);var i=y(t),r=y(e);function o(e){if(e)return n(e);r(a)}function a(e,t){return e?n(e):t?void i(o):n(null)}r(a)}function Ft(e){return function(t,n,i){return e(t,i)}}function qt(e,t,n){Te(e,Ft(y(t)),n)}function Gt(e,t,n,i){Ne(t)(e,Ft(y(n)),i)}var Jt=Ae(Gt,1);function Vt(e){return v(e)?e:s(function(t,n){var i=!0;t.push(function(){var e=arguments;i?d(function(){n.apply(null,e)}):n.apply(null,e)}),e.apply(this,t),i=!1})}function Ht(e){return!e}var zt=Ie(It(Ht,Ht)),Xt=Me(It(Ht,Ht)),Kt=Ae(Xt,1);function Wt(e){return function(t){return null==t?void 0:t[e]}}function Qt(e,t,n,i){var r=new Array(t.length);e(t,function(e,t,i){n(e,function(e,n){r[t]=!!n,i(e)})},function(e){if(e)return i(e);for(var n=[],o=0;o<t.length;o++)r[o]&&n.push(t[o]);i(null,n)})}function $t(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(n,o){n?i(n):(o&&r.push({index:t,value:e}),i())})},function(e){e?i(e):i(null,Je(r.sort(function(e,t){return e.index-t.index}),Wt("value")))})}function Yt(e,t,n,i){(F(t)?Qt:$t)(e,t,y(n),i||G)}var Zt=Ie(Yt),en=Me(Yt),tn=Ae(en,1);function nn(e,t){var n=_e(t||G),i=y(Vt(e));!function e(t){if(t)return n(t);i(e)}()}var rn=function(e,t,n,i){i=i||G;var r=y(n);Pe(e,t,function(e,t){r(e,function(n,i){return n?t(n):t(null,{key:i,val:e})})},function(e,t){for(var n={},r=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var a=t[o].key,s=t[o].val;r.call(n,a)?n[a].push(s):n[a]=[s]}return i(e,n)})},on=Ae(rn,1/0),an=Ae(rn,1),sn=Pt("log");function un(e,t,n,i){i=J(i||G);var r={},o=y(n);Ee(e,t,function(e,t,n){o(e,t,function(e,i){if(e)return n(e);r[t]=i,n()})},function(e){i(e,r)})}var cn=Ae(un,1/0),pn=Ae(un,1);function fn(e,t){return t in e}function ln(e,t){var n=Object.create(null),i=Object.create(null);t=t||Tt;var r=y(e),a=s(function(e,a){var s=t.apply(null,e);fn(n,s)?d(function(){a.apply(null,n[s])}):fn(i,s)?i[s].push(a):(i[s]=[a],r.apply(null,e.concat(function(){var e=o(arguments);n[s]=e;var t=i[s];delete i[s];for(var r=0,a=t.length;r<a;r++)t[r].apply(null,e)})))});return a.memo=n,a.unmemoized=e,a}var dn=l(p?n.nextTick:c?e:f);function mn(e,t,n){n=n||G;var i=F(t)?[]:{};e(t,function(e,t,n){y(e)(function(e,r){arguments.length>2&&(r=o(arguments,1)),i[t]=r,n(e)})},function(e){n(e,i)})}function hn(e,t){mn(Te,e,t)}function bn(e,t,n){mn(Ne(t),e,n)}var gn=function(e,t){var n=y(e);return gt(function(e,t){n(e[0],t)},t,1)},vn=function(e,t){var n=gn(e,t);return n.push=function(e,t,i){if(null==i&&(i=G),"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,Z(e)||(e=[e]),0===e.length)return d(function(){n.drain()});t=t||0;for(var r=n._tasks.head;r&&t>=r.priority;)r=r.next;for(var o=0,a=e.length;o<a;o++){var s={data:e[o],priority:t,callback:i};r?n._tasks.insertBefore(r,s):n._tasks.push(s)}d(n.process)},delete n.unshift,n};function yn(e,t){if(t=J(t||G),!Z(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,i=e.length;n<i;n++)y(e[n])(t)}function Sn(e,t,n,i){St(o(e).reverse(),t,n,i)}function xn(e){var t=y(e);return s(function(e,n){return e.push(function(e,t){var i;e?n(null,{error:e}):(i=arguments.length<=2?t:o(arguments,1),n(null,{value:i}))}),t.apply(this,e)})}function _n(e){var t;return Z(e)?t=Je(e,xn):(t={},Be(e,function(e,n){t[n]=xn.call(this,e)})),t}function Nn(e,t,n,i){Yt(e,t,function(e,t){n(e,function(e,n){t(e,!n)})},i)}var En=Ie(Nn),An=Me(Nn),On=Ae(An,1);function jn(e){return function(){return e}}function Tn(e,t,n){var i=5,r=0,o={times:i,intervalFunc:jn(r)};if(arguments.length<3&&"function"==typeof e?(n=t||G,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||i,e.intervalFunc="function"==typeof t.interval?t.interval:jn(+t.interval||r),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||i}}(o,e),n=n||G),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var a=y(t),s=1;!function e(){a(function(t){t&&s++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(t))?setTimeout(e,o.intervalFunc(s)):n.apply(null,arguments)})}()}var In=function(e,t){t||(t=e,e=null);var n=y(t);return s(function(t,i){function r(e){n.apply(null,t.concat(e))}e?Tn(e,r,i):Tn(r,i)})};function Rn(e,t){mn(yt,e,t)}var wn=Ie(It(Boolean,Tt)),Cn=Me(It(Boolean,Tt)),Mn=Ae(Cn,1);function Pn(e,t,n){var i=y(t);function r(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}we(e,function(e,t){i(e,function(n,i){if(n)return t(n);t(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);n(null,Je(t.sort(r),Wt("value")))})}function Dn(e,t,n){var i=y(e);return s(function(r,o){var a,s=!1;r.push(function(){s||(o.apply(null,arguments),clearTimeout(a))}),a=setTimeout(function(){var t=e.name||"anonymous",i=new Error('Callback function "'+t+'" timed out.');i.code="ETIMEDOUT",n&&(i.info=n),s=!0,o(i)},t),i.apply(null,r)})}var Ln=Math.ceil,kn=Math.max;function Un(e,t,n,i){var r=y(n);Pe(function(e,t,n,i){for(var r=-1,o=kn(Ln((t-e)/(n||1)),0),a=Array(o);o--;)a[i?o:++r]=e,e+=n;return a}(0,e,1),t,r,i)}var Bn=Ae(Un,1/0),Fn=Ae(Un,1);function qn(e,t,n,i){arguments.length<=3&&(i=n,n=t,t=Z(e)?[]:{}),i=J(i||G);var r=y(n);Te(e,function(e,n,i){r(t,e,n,i)},function(e){i(e,t)})}function Gn(e,t){var n,i=null;t=t||G,Jt(e,function(e,t){y(e)(function(e,r){n=arguments.length>2?o(arguments,1):r,i=e,t(!e)})},function(){t(i,n)})}function Jn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Vn(e,t,n){n=_e(n||G);var i=y(t);if(!e())return n(null);var r=function(t){if(t)return n(t);if(e())return i(r);var a=o(arguments,1);n.apply(null,[null].concat(a))};i(r)}function Hn(e,t,n){Vn(function(){return!e.apply(this,arguments)},t,n)}var zn=function(e,t){if(t=J(t||G),!Z(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function i(t){var i=y(e[n++]);t.push(_e(r)),i.apply(null,t)}function r(r){if(r||n===e.length)return t.apply(null,arguments);i(o(arguments,1))}i([])},Xn={apply:a,applyEach:Ce,applyEachSeries:Le,asyncify:m,auto:Ge,autoInject:mt,cargo:vt,compose:_t,concat:At,concatLimit:Et,concatSeries:Ot,constant:jt,detect:wt,detectLimit:Ct,detectSeries:Mt,dir:Dt,doDuring:Lt,doUntil:Ut,doWhilst:kt,during:Bt,each:qt,eachLimit:Gt,eachOf:Te,eachOfLimit:Ee,eachOfSeries:yt,eachSeries:Jt,ensureAsync:Vt,every:zt,everyLimit:Xt,everySeries:Kt,filter:Zt,filterLimit:en,filterSeries:tn,forever:nn,groupBy:on,groupByLimit:rn,groupBySeries:an,log:sn,map:we,mapLimit:Pe,mapSeries:De,mapValues:cn,mapValuesLimit:un,mapValuesSeries:pn,memoize:ln,nextTick:dn,parallel:hn,parallelLimit:bn,priorityQueue:vn,queue:gn,race:yn,reduce:St,reduceRight:Sn,reflect:xn,reflectAll:_n,reject:En,rejectLimit:An,rejectSeries:On,retry:Tn,retryable:In,seq:xt,series:Rn,setImmediate:d,some:wn,someLimit:Cn,someSeries:Mn,sortBy:Pn,timeout:Dn,times:Bn,timesLimit:Un,timesSeries:Fn,transform:qn,tryEach:Gn,unmemoize:Jn,until:Hn,waterfall:zn,whilst:Vn,all:zt,allLimit:Xt,allSeries:Kt,any:wn,anyLimit:Cn,anySeries:Mn,find:wt,findLimit:Ct,findSeries:Mt,forEach:qt,forEachSeries:Jt,forEachLimit:Gt,forEachOf:Te,forEachOfSeries:yt,forEachOfLimit:Ee,inject:St,foldl:St,foldr:Sn,select:Zt,selectLimit:en,selectSeries:tn,wrapSync:m};t.default=Xn,t.apply=a,t.applyEach=Ce,t.applyEachSeries=Le,t.asyncify=m,t.auto=Ge,t.autoInject=mt,t.cargo=vt,t.compose=_t,t.concat=At,t.concatLimit=Et,t.concatSeries=Ot,t.constant=jt,t.detect=wt,t.detectLimit=Ct,t.detectSeries=Mt,t.dir=Dt,t.doDuring=Lt,t.doUntil=Ut,t.doWhilst=kt,t.during=Bt,t.each=qt,t.eachLimit=Gt,t.eachOf=Te,t.eachOfLimit=Ee,t.eachOfSeries=yt,t.eachSeries=Jt,t.ensureAsync=Vt,t.every=zt,t.everyLimit=Xt,t.everySeries=Kt,t.filter=Zt,t.filterLimit=en,t.filterSeries=tn,t.forever=nn,t.groupBy=on,t.groupByLimit=rn,t.groupBySeries=an,t.log=sn,t.map=we,t.mapLimit=Pe,t.mapSeries=De,t.mapValues=cn,t.mapValuesLimit=un,t.mapValuesSeries=pn,t.memoize=ln,t.nextTick=dn,t.parallel=hn,t.parallelLimit=bn,t.priorityQueue=vn,t.queue=gn,t.race=yn,t.reduce=St,t.reduceRight=Sn,t.reflect=xn,t.reflectAll=_n,t.reject=En,t.rejectLimit=An,t.rejectSeries=On,t.retry=Tn,t.retryable=In,t.seq=xt,t.series=Rn,t.setImmediate=d,t.some=wn,t.someLimit=Cn,t.someSeries=Mn,t.sortBy=Pn,t.timeout=Dn,t.times=Bn,t.timesLimit=Un,t.timesSeries=Fn,t.transform=qn,t.tryEach=Gn,t.unmemoize=Jn,t.until=Hn,t.waterfall=zn,t.whilst=Vn,t.all=zt,t.allLimit=Xt,t.allSeries=Kt,t.any=wn,t.anyLimit=Cn,t.anySeries=Mn,t.find=wt,t.findLimit=Ct,t.findSeries=Mt,t.forEach=qt,t.forEachSeries=Jt,t.forEachLimit=Gt,t.forEachOf=Te,t.forEachOfSeries=yt,t.forEachOfLimit=Ee,t.inject=St,t.foldl=St,t.foldr=Sn,t.select=Zt,t.selectLimit=en,t.selectSeries=tn,t.wrapSync=m,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,n(1322).setImmediate,n(1085),n(55),n(169)(e))},1331:function(e,t){function n(e){return e}e.exports=function(e,t,i){if("function"!=typeof e)return n;if(void 0===t)return e;switch(i){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}},1332:function(e,t,n){"use strict";var i=n(1193),r=n(1649),o=n(1652),a=n(1333),s=n(1660);function u(){this._LOOKUP={},this._LOOKUP_EXT={},this._TAGS={},this._CB_DEFINITION={},this._CB_TAG={},this._ID=r.v4(),this.utils=i({},o,a)}u.prototype.use=function(e){return e&&"function"==typeof e?(e["__JXT_LOADED_"+this._ID]||(e(this),e["__JXT_LOADED_"+this._ID]=!0),this):this},u.prototype.getDefinition=function(e,t,n){var i=this._LOOKUP[t+"|"+e];if(n&&!i)throw new Error("Could not find definition for <"+e+' xmlns="'+t+'" />');return i},u.prototype.getExtensions=function(e,t){return this._LOOKUP_EXT[t+"|"+e]||{}},u.prototype.withDefinition=function(e,t,n){var i=t+"|"+e;this._CB_DEFINITION[i]||(this._CB_DEFINITION[i]=[]),this._CB_DEFINITION[i].push(n),this._LOOKUP[i]&&n(this._LOOKUP[i])},u.prototype.withTag=function(e,t){this._CB_TAG[e]||(this._CB_TAG[e]=[]),this._CB_TAG[e].push(t),this.tagged(e).forEach(function(e){t(e)})},u.prototype.tagged=function(e){return this._TAGS[e]||[]},u.prototype.build=function(e){var t=this.getDefinition(e.localName,e.namespaceURI);if(t)return new t(null,e)},u.prototype.parse=function(e){var t=a.parse(e);if(t)return this.build(t)},u.prototype.extend=function(e,t,n,i){var r=e.prototype._NS+"|"+e.prototype._EL,a=t.prototype._name,s=t.prototype._NS+"|"+t.prototype._EL;this._LOOKUP[s]=t,this._LOOKUP_EXT[s]||(this._LOOKUP_EXT[s]={}),this._LOOKUP_EXT[r]||(this._LOOKUP_EXT[r]={}),this._LOOKUP_EXT[r][a]=t,(!n||n&&!i)&&this.add(e,a,o.extension(t)),n&&this.add(e,n,o.multiExtension(t))},u.prototype.add=function(e,t,n){n.enumerable=!0,Object.defineProperty(e.prototype,t,n)},u.prototype.define=function(e){var t=this,n=s(this,e),i=n.prototype._NS,r=n.prototype._EL,o=n.prototype._TAGS,a=i+"|"+r;return this._LOOKUP[a]=n,o.forEach(function(e){t._TAGS[e]||(t._TAGS[e]=[]),t._TAGS[e].push(n)}),Object.keys(e.fields||{}).forEach(function(i){t.add(n,i,e.fields[i])}),this._CB_DEFINITION[a]&&this._CB_DEFINITION[a].forEach(function(e){e(n)}),o.forEach(function(e){t._CB_TAG[e]&&t._CB_TAG[e].forEach(function(e){e(n)})}),n},u.createRegistry=function(){return new u},i(u,a),i(u,o);var c=new u;u.define=c.define.bind(c),u.extend=c.extend.bind(c),u.add=c.add.bind(c),u.parse=c.parse.bind(c),u.build=c.build.bind(c),u.getExtensions=c.getExtensions.bind(c),u.getDefinition=c.getDefinition.bind(c),u.withDefinition=c.withDefinition.bind(c),u.withTag=c.withTag.bind(c),u.tagged=c.tagged.bind(c),u.getGlobalJXT=function(){return c},e.exports=u},1333:function(e,t,n){"use strict";var i=n(1653),r=n(1659),o=t.XML_NS="http://www.w3.org/XML/1998/namespace";t.parse=function(e){var t=i.parse(e,{Element:r});if(1===t.nodeType)return t},t.createElement=function(e,n,i){var o=new r(n);return i&&i===e||t.setAttribute(o,"xmlns",e),o};var a=t.find=function(e,t,n){for(var i=[],r=e.getElementsByTagName(n),o=0,a=r.length;o<a;o++){var s=r[o];s.namespaceURI===t&&s.parentNode===e&&i.push(s)}return i};t.findOrCreate=function(e,n,i){var r=t.find(e,n,i);if(r.length)return r[0];var o=t.createElement(n,i,e.namespaceURI);return e.appendChild(o),o},t.getAttribute=function(e,t,n){return e.getAttribute(t)||n||""},t.getAttributeNS=function(e,t,n,i){return e.getAttributeNS(t,n)||i||""},t.setAttribute=function(e,t,n,i){n||i?e.setAttribute(t,n):e.removeAttribute(t)},t.setAttributeNS=function(e,t,n,i,r){i||r?e.setAttributeNS(t,n,i):e.removeAttributeNS(t,n)},t.getBoolAttribute=function(e,t,n){var i=e.getAttribute(t)||n||"";return"true"===i||"1"===i},t.setBoolAttribute=function(e,t,n){n?e.setAttribute(t,"1"):e.removeAttribute(t)},t.getSubAttribute=function(e,t,n,i,r){var o=a(e,t,n);if(!o)return"";for(var s=0;s<o.length;s++)return o[s].getAttribute(i)||r||"";return""},t.setSubAttribute=function(e,n,i,r,o){var s=a(e,n,i);if(s.length)for(var u=0;u<s.length;u++){if(o)return void s[u].setAttribute(r,o);s[u].removeAttribute(r)}else o&&((i=t.createElement(n,i,e.namespaceURI)).setAttribute(r,o),e.appendChild(i))},t.getBoolSubAttribute=function(e,t,n,i,r){var o=e.getSubAttribute(t,n,i)||r||"";return"true"===o||"1"===o},t.setBoolSubAttribute=function(e,n,i,r,o){o=o?"1":"",t.setSubAttribute(e,n,i,r,o)},t.getText=function(e){return e.textContent},t.setText=function(e,t){e.textContent=t},t.getSubText=t.getTextSub=function(e,t,n,i){var r=a(e,t,n);return i=i||"",r.length&&r[0].textContent||i},t.setSubText=t.setTextSub=function(e,n,i,r){var o=a(e,n,i);if(o.length)for(var s=0;s<o.length;s++)e.removeChild(o[s]);if(r){var u=t.createElement(n,i,e.namespaceURI);!0!==r&&(u.textContent=r),e.appendChild(u)}},t.getMultiSubText=function(e,t,n,i){var r=a(e,t,n),o=[];i=i||function(e){return e.textContent||""};for(var s=0;s<r.length;s++)o.push(i(r[s]));return o},t.setMultiSubText=function(e,n,i,r,o){var s,u,c=a(e,n,i),p=[];for(o=o||function(r){if(r){var o=t.createElement(n,i,e.namespaceURI);o.textContent=r,e.appendChild(o)}},p="string"==typeof r?(r||"").split("\n"):r,s=0,u=c.length;s<u;s++)e.removeChild(c[s]);for(s=0,u=p.length;s<u;s++)o(p[s])},t.getMultiSubAttribute=function(e,n,i,r){return t.getMultiSubText(e,n,i,function(e){return t.getAttribute(e,r)})},t.setMultiSubAttribute=function(e,n,i,r,o){t.setMultiSubText(e,n,i,o,function(o){var a=t.createElement(n,i,e.namespaceURI);t.setAttribute(a,r,o),e.appendChild(a)})},t.getSubLangText=function(e,t,n,i){var r,s,u=a(e,t,n);if(!u.length)return{};for(var c={},p=[],f=0;f<u.length;f++)r=(s=u[f]).getAttributeNS(o,"lang")||i,p.push(r),c[r]=s.textContent||"";return c},t.setSubLangText=function(e,n,i,r,s){var u,c,p=a(e,n,i);if(p.length)for(var f=0;f<p.length;f++)e.removeChild(p[f]);if("string"==typeof r)(u=t.createElement(n,i,e.namespaceURI)).textContent=r,e.appendChild(u);else if("object"==typeof r)for(c in r)r.hasOwnProperty(c)&&(u=t.createElement(n,i,e.namespaceURI),c!==s&&u.setAttributeNS(o,"lang",c),u.textContent=r[c],e.appendChild(u))},t.getBoolSub=function(e,t,n){return!!a(e,t,n).length},t.setBoolSub=function(e,n,i,r){var o=a(e,n,i);if(o.length)for(var s=0;s<o.length;s++){if(r)return;e.removeChild(o[s])}else if(r){var u=t.createElement(n,i,e.namespaceURI);e.appendChild(u)}}},1334:function(e,t,n){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},1336:function(e,t,n){var i=n(1132),r=n(1285),o=n(1798),a={md2:"md2",md5:"md5","sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512"},s=Object.keys(a);t.getHashes=function(){for(var e=[],t=o(),n=0,i=s.length;n<i;n++)t.indexOf(a[s[n]])>=0&&e.push(s[n]);return e},t.createHash=function(e){return e=e.toLowerCase(),a[e]&&(e=a[e]),i(e)},t.createHmac=function(e,t){return e=e.toLowerCase(),a[e]&&(e=a[e]),r(e,t)}},1337:function(e,t,n){var i=n(1090),r=n(1822),o=n(1292),a=n(1338),s=n(1134),u={"content-accept":"onContentAccept","content-add":"onContentAdd","content-modify":"onContentModify","content-reject":"onContentReject","content-remove":"onContentRemove","description-info":"onDescriptionInfo","security-info":"onSecurityInfo","session-accept":"onSessionAccept","session-info":"onSessionInfo","session-initiate":"onSessionInitiate","session-terminate":"onSessionTerminate","transport-accept":"onTransportAccept","transport-info":"onTransportInfo","transport-reject":"onTransportReject","transport-replace":"onTransportReplace","source-add":"onSourceAdd","source-remove":"onSourceRemove"};function c(e){s.call(this);var t=this;this.sid=e.sid||r.v4(),this.peer=e.peer,this.peerID=e.peerID||this.peer.full||this.peer,this.isInitiator=e.initiator||!1,this.parent=e.parent,this.state="starting",this.connectionState="starting",this.pendingApplicationTypes=e.applicationTypes||[],this.pendingAction=!1,this.processingQueue=o.queue(function(e,n){if(t.ended)return n();var i=e.action,r=e.changes,o=e.cb;if(t._log("debug",i),!u[i])return t._log("error","Invalid action: "+i),o({condition:"bad-request"}),n();t[u[i]](r,function(e,t){return o(e,t),n()})})}i.inherits(c,s),Object.keys(u).forEach(function(e){var t=u[e];c.prototype[t]=function(t,n){this._log("error","Unsupported action: "+e),n()}}),Object.defineProperties(c.prototype,{state:{get:function(){return this._sessionState},set:function(e){if(e!==this._sessionState){var t=this._sessionState;this._log("info","Changing session state to: "+e),this._sessionState=e,this.emit("change:sessionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},connectionState:{get:function(){return this._connectionState},set:function(e){if(e!==this._connectionState){var t=this._connectionState;this._log("info","Changing connection state to: "+e),this._connectionState=e,this.emit("change:connectionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},starting:{get:function(){return"starting"===this._sessionState}},pending:{get:function(){return"pending"===this._sessionState}},active:{get:function(){return"active"===this._sessionState}},ended:{get:function(){return"ended"===this._sessionState}},connected:{get:function(){return"connected"===this._connectionState}},connecting:{get:function(){return"connecting"===this._connectionState}},disconnected:{get:function(){return"disconnected"===this._connectionState}},interrupted:{get:function(){return"interrupted"===this._connectionState}}}),c.prototype=a(c.prototype,{_log:function(e,t){t=this.sid+": "+t,this.emit("log:"+e,t)},send:function(e,t){(t=t||{}).sid=this.sid,t.action=e;this.pendingAction=!!{"session-inititate":!0,"session-accept":!0,"content-add":!0,"content-remove":!0,"content-reject":!0,"content-accept":!0,"content-modify":!0,"transport-replace":!0,"transport-reject":!0,"transport-accept":!0,"source-add":!0,"source-remove":!0}[e]&&e,this.emit("send",{to:this.peer,id:r.v4(),type:"set",jingle:t})},process:function(e,t,n){this.processingQueue.push({action:e,changes:t,cb:n})},start:function(){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)},accept:function(){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")},cancel:function(){this.end("cancel")},decline:function(){this.end("decline")},end:function(e,t){this.state="ended",this.processingQueue.kill(),e||(e="success"),"string"==typeof e&&(e={condition:e}),t||this.send("session-terminate",{reason:e}),this.emit("terminated",this,e)},onSessionTerminate:function(e,t){this.end(e.reason,!0),t()},onSessionInfo:function(e,t){var n={sid:!0,action:!0,initiator:!0,responder:!0},i=!1;Object.keys(e).forEach(function(e){n[e]||(i=!0)}),i?t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"}):t()},onDescriptionInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onTransportInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onContentAdd:function(e,t){t(),this.send("content-reject",{reason:{condition:"failed-application",text:"content-add is not supported"}})},onTransportReplace:function(e,t){t(),this.send("transport-reject",{reason:{condition:"failed-application",text:"transport-replace is not supported"}})}}),e.exports=c},1338:function(e,t){var n=[],i=n.forEach,r=n.slice;e.exports=function(e){return i.call(r.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e}},1461:function(e,t,n){var i=n(1216),r=9007199254740991,o=function(e,t){return function(n,i){var o=n?s(n):0;if(!function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(o))return e(n,i);for(var a=t?o:-1,c=u(n);(t?a--:++a<o)&&!1!==i(c[a],a,c););return n}}(function(e,t){return a(e,t,i)}),a=function(e){return function(t,n,i){for(var r=u(t),o=i(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var c=o[s];if(!1===n(r[c],c,r))break}return t}}();var s=function(e){return function(t){return null==t?void 0:t[e]}}("length");function u(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?e:Object(e)}e.exports=o},1462:function(e,t){var n="[object Function]",i=/^\[object .+?Constructor\]$/;var r=Object.prototype,o=Function.prototype.toString,a=r.hasOwnProperty,s=r.toString,u=RegExp("^"+o.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e,t){var r=null==e?void 0:e[t];return function(e){return null!=e&&(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&s.call(e)==n}(e)?u.test(o.call(e)):function(e){return!!e&&"object"==typeof e}(e)&&i.test(e))}(r)?r:void 0}},1463:function(e,t){var n=/^\d+$/,i=9007199254740991;var r=function(e){return function(t){return null==t?void 0:t[e]}}("length");function o(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(r(e))}e.exports=function(e,t,r){if(!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(r))return!1;var a=typeof t;if("number"==a?o(r)&&function(e,t){return e="number"==typeof e||n.test(e)?+e:-1,t=null==t?i:t,e>-1&&e%1==0&&e<t}(t,r.length):"string"==a&&t in r){var s=r[t];return e==e?e===s:s!=s}return!1}},1464:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1465:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},1466:function(e,t,n){"use strict";var i=n(1467);e.exports=function(e,t){var n,r=null,o=null;if((n="function"==typeof t?new t:new i(t)).on("tree",function(e){r=e}),n.on("error",function(e){o=e}),n.write(e),n.end(),o)throw o;return r}},1467:function(e,t,n){"use strict";var i=n(1210).EventEmitter,r=n(1047),o=n(1217),a=n(1654),s=function(e){i.call(this);var t,n=this.Parser=e&&e.Parser||this.DefaultParser,r=this.Element=e&&e.Element||this.DefaultElement;this.parser=new n;var o=this;this.parser.on("startElement",function(e,n){var i=new r(e,n);t=t?t.cnode(i):i}),this.parser.on("endElement",function(e){t&&e===t.name&&(t.parent?t=t.parent:o.tree||(o.tree=t,t=void 0))}),this.parser.on("text",function(e){t&&t.t(e)}),this.parser.on("error",function(e){o.error=e,o.emit("error",e)})};r(s,i),s.prototype.DefaultParser=a,s.prototype.DefaultElement=o,s.prototype.write=function(e){this.parser.write(e)},s.prototype.end=function(e){this.parser.end(e),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},e.exports=s},1468:function(e,t,n){"use strict";function i(e,t){return e.name===t.name}function r(e,t){var n=e.attrs,i=Object.keys(n),r=i.length;if(r!==Object.keys(t.attrs).length)return!1;for(var o=0,a=r;o<a;o++){var s=i[o],u=n[s];if(null==u||null==t.attrs[s]){if(u!==t.attrs[s])return!1}else if(u.toString()!==t.attrs[s].toString())return!1}return!0}function o(e,t){var n=e.children,i=n.length;if(i!==t.children.length)return!1;for(var r=0,o=i;r<o;r++){var a=n[r];if("string"==typeof a){if(a!==t.children[r])return!1}else if(!a.equals(t.children[r]))return!1}return!0}e.exports.name=i,e.exports.attrs=r,e.exports.children=o,e.exports.equal=function(e,t){return!!i(e,t)&&!!r(e,t)&&!!o(e,t)}},1469:function(e,t,n){"use strict";e.exports=function(e){for(var t=new e.constructor(e.name,e.attrs),n=0;n<e.children.length;n++){var i=e.children[n];t.cnode(i.clone?i.clone():i)}return t}},1470:function(e,t,n){"use strict";var i=n(1291).escapeXML;e.exports=function(){for(var e=arguments[0],t="",n=1;n<arguments.length;n++)t+=e[n-1],t+=i(arguments[n]);return t+=e[e.length-1]}},1471:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1472:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},1473:function(e,t,n){"use strict";var i=n(1667),r=n(1668),o=n(1669),a=n(1673);function s(e,t,n){var i=e;return r(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=a(t,{uri:e}),i.callback=n,i}function u(e,t,n){return c(t=s(e,t,n))}function c(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,g)}function r(){if(!s){var t;clearTimeout(p),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=g,r=null;return 0!==t?(i={body:function(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),b)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:l,headers:{},url:f,rawRequest:c},c.getAllResponseHeaders&&(i.headers=o(c.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),n(r,i,i.body)}}var a,s,c=e.xhr||null;c||(c=e.cors||e.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var p,f=c.url=e.uri||e.url,l=c.method=e.method||"GET",d=e.body||e.data,m=c.headers=e.headers||{},h=!!e.sync,b=!1,g={body:void 0,headers:{},statusCode:0,method:l,url:f,rawRequest:c};if("json"in e&&!1!==e.json&&(b=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(r,0)},c.onload=r,c.onerror=i,c.onprogress=function(){},c.onabort=function(){s=!0},c.ontimeout=i,c.open(l,f,!h,e.username,e.password),h||(c.withCredentials=!!e.withCredentials),!h&&e.timeout>0&&(p=setTimeout(function(){if(!s){s=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),c.setRequestHeader)for(a in m)m.hasOwnProperty(a)&&c.setRequestHeader(a,m[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(d||null),c}e.exports=u,e.exports.default=u,u.XMLHttpRequest=i.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){u["delete"===e?"del":e]=function(t,n,i){return(n=s(t,n,i)).method=e.toUpperCase(),c(n)}})},1474:function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},1475:function(e,t,n){"use strict";(function(t){var i=n(1090),r=n(1134),o=n(1292),a=n(1335)&&n(1335).Client?n(1335).Client:window.WebSocket,s=1;function u(e,n){var i=this;r.call(this),i.sm=e,i.closing=!1,i.stanzas={Open:n.getDefinition("open","urn:ietf:params:xml:ns:xmpp-framing",!0),Close:n.getDefinition("close","urn:ietf:params:xml:ns:xmpp-framing",!0),StreamError:n.getStreamError()},i.sendQueue=o.queue(function(e,n){i.conn&&("string"!=typeof e&&(e=e.toString()),e=new t(e,"utf8").toString(),i.emit("raw:outgoing",e),i.conn.readyState===s&&i.conn.send(e)),n()},1),i.on("connected",function(){i.send(i.startHeader())}),i.on("raw:incoming",function(e){var t,r;if(""!==(e=e.trim())){try{t=n.parse(e)}catch(e){return r=new i.stanzas.StreamError({condition:"invalid-xml"}),i.emit("stream:error",r,e),i.send(r),i.disconnect()}if(t){if("openStream"===t._name)return i.hasStream=!0,i.stream=t,i.emit("stream:start",t.toJSON());if("closeStream"===t._name)return i.emit("stream:end"),i.disconnect();!t.lang&&i.stream&&(t.lang=i.stream.lang),i.emit("stream:data",t)}}})}i.inherits(u,r),u.prototype.connect=function(e){var n=this;n.config=e,n.hasStream=!1,n.closing=!1,n.conn=new a(e.wsURL,"xmpp",e.wsOptions),n.conn.onerror=function(e){e.preventDefault(),n.emit("disconnected",n)},n.conn.onclose=function(){n.emit("disconnected",n)},n.conn.onopen=function(){n.sm.started=!1,n.emit("connected",n)},n.conn.onmessage=function(e){n.emit("raw:incoming",new t(e.data,"utf8").toString())}},u.prototype.startHeader=function(){return new this.stanzas.Open({version:this.config.version||"1.0",lang:this.config.lang||"en",to:this.config.server})},u.prototype.closeHeader=function(){return new this.stanzas.Close},u.prototype.disconnect=function(){this.conn&&!this.closing&&this.hasStream?(this.closing=!0,this.send(this.closeHeader())):(this.hasStream=!1,this.stream=void 0,this.conn&&this.conn.readyState===s&&this.conn.close(),this.conn=void 0)},u.prototype.restart=function(){this.hasStream=!1,this.send(this.startHeader())},u.prototype.send=function(e){this.sendQueue.push(e)},e.exports=u}).call(this,n(1053).Buffer)},1476:function(e,t,n){var i=n(1786),r=n(1477),o=n(1790),a=n(1192);e.exports=function(e,t,n){return(a(e)?i:o)(e,t=r(t,n,3))}},1477:function(e,t,n){var i=n(1787),r=n(1331),o=n(1192),a=n(1789),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,u=/^\w*$/,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,p=/\\(\\)?/g;function f(e,t,n){if(null!=e){void 0!==n&&n in m(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&i<r;)e=e[t[i++]];return i&&i==r?e:void 0}}function l(e,t){var n=typeof e;return!!("string"==n&&u.test(e)||"number"==n)||!o(e)&&(!s.test(e)||null!=t&&e in m(t))}function d(e){return e==e&&!b(e)}function m(e){return b(e)?e:Object(e)}function h(e){if(o(e))return e;var t=[];return function(e){return null==e?"":e+""}(e).replace(c,function(e,n,i,r){t.push(i?r.replace(p,"$1"):n||e)}),t}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){return e}e.exports=function(e,t,n){var s=typeof e;return"function"==s?void 0===t?e:r(e,t,n):null==e?g:"object"==s?function(e){var t=function(e){for(var t=a(e),n=t.length;n--;)t[n][2]=d(t[n][1]);return t}(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&e[n]===r&&(void 0!==r||n in m(e))}}return function(e){return function(e,t,n){var r=t.length,o=r,a=!n;if(null==e)return!o;for(e=m(e);r--;){var s=t[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var u=(s=t[r])[0],c=e[u],p=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=n?n(c,p,u):void 0;if(!(void 0===f?i(p,c,n,!0):f))return!1}}return!0}(e,t)}}(e):void 0===t?function(e){return l(e)?function(e){return function(t){return null==t?void 0:t[e]}}(e):function(e){var t=e+"";return e=h(e),function(n){return f(n,e,t)}}(e)}(e):function(e,t){var n=o(e),r=l(e)&&d(t),a=e+"";return e=h(e),function(o){if(null==o)return!1;var s=a;if(o=m(o),(n||!r)&&!(s in o)){if(null==(o=1==e.length?o:f(o,function(e,t,n){var i=-1,r=e.length;(t=null==t?0:+t||0)<0&&(t=-t>r?0:r+t),(n=void 0===n||n>r?r:+n||0)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}(e,0,-1))))return!1;s=function(e){var t=e?e.length:0;return t?e[t-1]:void 0}(e),o=m(o)}return o[s]===t?void 0!==t||s in o:i(t,o[s],void 0,!0)}}(e,t)}},1478:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1479:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},1480:function(e,t,n){var i=n(1090),r=n(1826),o=n(1134),a=n(1830);function s(e,t){var n,i=this;for(n in o.call(this),(e=e||{}).iceServers=e.iceServers||[],this.enableChromeNativeSimulcast=!1,t&&t.optional&&window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&t.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(i.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.enableMultiStreamHacks&&(i.enableMultiStreamHacks=!0)}),this.restrictBandwidth=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetRestrictBandwidth&&(i.restrictBandwidth=e.andyetRestrictBandwidth)}),this.batchIceCandidates=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetBatchIce&&(i.batchIceCandidates=e.andyetBatchIce)}),this.batchedIceCandidates=[],t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.andyetFasterICE&&(i.eliminateDuplicateCandidates=e.andyetFasterICE)}),t&&t.optional&&t.optional.forEach(function(e){e.andyetDontSignalCandidates&&(i.dontSignalCandidates=e.andyetDontSignalCandidates)}),this.assumeSetLocalSuccess=!1,t&&t.optional&&t.optional.forEach(function(e){e.andyetAssumeSetLocalSuccess&&(i.assumeSetLocalSuccess=e.andyetAssumeSetLocalSuccess)}),window.navigator.mozGetUserMedia&&t&&t.optional&&(this.wtFirefox=0,t.optional.forEach(function(e){e.andyetFirefoxMakesMeSad&&(i.wtFirefox=e.andyetFirefoxMakesMeSad,i.wtFirefox>0&&(i.firefoxcandidatebuffer=[]))})),this.pc=new RTCPeerConnection(e,t),"function"==typeof this.pc.getLocalStreams?this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc):this.getLocalStreams=function(){return[]},"function"==typeof this.pc.getSenders?this.getSenders=this.pc.getSenders.bind(this.pc):this.getSenders=function(){return[]},"function"==typeof this.pc.getRemoteStreams?this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc):this.getRemoteStreams=function(){return[]},"function"==typeof this.pc.getReceivers?this.getReceivers=this.pc.getReceivers.bind(this.pc):this.getReceivers=function(){return[]},this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=function(e){"function"==typeof i.pc.removeStream?i.pc.removeStream.apply(i.pc,arguments):"function"==typeof i.pc.removeTrack&&e.getTracks().forEach(function(e){i.pc.removeTrack(e)})},"function"==typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc)),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onremovetrack=this.emit.bind(this,"removeTrack"),this.pc.onaddstream=this.emit.bind(this,"addStream"),this.pc.ontrack=this.emit.bind(this,"addTrack"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1},this.iceCredentials={local:{},remote:{}},e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){(e.logger||console).log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[],this._candidateBuffer=[]}i.inherits(s,o),Object.defineProperty(s.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(s.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),s.prototype._role=function(){return this.isInitiator?"initiator":"responder"},s.prototype.addStream=function(e){this.localStream=e,e.getTracks().forEach(function(t){this.pc.addTrack(t,e)})},s.prototype._checkLocalCandidate=function(e){var t=r.toCandidateJSON(e);"srflx"==t.type?this.hadLocalStunCandidate=!0:"relay"==t.type&&(this.hadLocalRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},s.prototype._checkRemoteCandidate=function(e){var t=r.toCandidateJSON(e);"srflx"==t.type?this.hadRemoteStunCandidate=!0:"relay"==t.type&&(this.hadRemoteRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},s.prototype.processIce=function(e,t){t=t||function(){};var n=this;if("closed"===this.pc.signalingState)return t();if(e.contents||e.jingle&&e.jingle.contents){var i=this.remoteDescription.contents.map(function(e){return e.name});(e.contents||e.jingle.contents).forEach(function(e){var o=e.transport||{},a=o.candidates||[],s=i.indexOf(e.name),u=e.name,c=n.remoteDescription.contents.find(function(t){return t.name===e.name}),p=function(){a.forEach(function(e){var t=r.toCandidateSDP(e);n.pc.addIceCandidate(new RTCIceCandidate({candidate:t,sdpMLineIndex:s,sdpMid:u})).then(function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(t)}),t()};if(n.iceCredentials.remote[e.name]&&o.ufrag&&n.iceCredentials.remote[e.name].ufrag!==o.ufrag)if(c){c.transport.ufrag=o.ufrag,c.transport.pwd=o.pwd;var f={type:"offer",jingle:n.remoteDescription};f.sdp=r.toSessionSDP(f.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.pc.setRemoteDescription(new RTCSessionDescription(f)).then(function(){p()},function(e){n.emit("error",e)})}else n.emit("error","ice restart failed to find matching content");else p()})}else{if(e.candidate&&0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(e.candidate),t();n.pc.addIceCandidate(new RTCIceCandidate(e.candidate)).then(function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate.candidate),t()}},s.prototype.offer=function(e,t){var n=this,i=2===arguments.length,o=i&&e?e:{offerToReceiveAudio:1,offerToReceiveVideo:1};if(t=(t=i?t:e)||function(){},"closed"===this.pc.signalingState)return t("Already closed");this.pc.createOffer(o).then(function(e){var i={type:"offer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("offer",i),t(null,i)),n._candidateBuffer=[],n.pc.setLocalDescription(e).then(function(){var o;n.config.useJingle&&((o=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})).sid=n.config.sid,n.localDescription=o,o.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.local[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),i.jingle=o),i.sdp.split(/\r?\n/).forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("offer",i),t(null,i))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)})},s.prototype.handleOffer=function(e,t){t=t||function(){};var n=this;if(e.type="offer",e.jingle){if(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.application.googConferenceFlag=!0)}),this.enableMultiStreamHacks&&e.jingle.contents.forEach(function(e){if("video"===e.name){var t=e.application.sources||[];0!==t.length&&"3735928559"===t[0].ssrc||(t.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),e.application.sources=t)}}),n.restrictBandwidth>0&&e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name){var i=e.jingle.contents[1];i.application&&i.application.bandwidth&&i.application.bandwidth.bandwidth||(e.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:n.restrictBandwidth.toString()},e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"}))}e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle}e.sdp.split(/\r?\n/).forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e)).then(function(){t()},t)},s.prototype.answerAudioOnly=function(e){this._answer({mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},e)},s.prototype.answerBroadcastOnly=function(e){this._answer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},e)},s.prototype.answer=function(e,t){var n=2===arguments.length,i=n?t:e,r=n&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(r,i)},s.prototype.handleAnswer=function(e,t){t=t||function(){};var n=this;e.jingle&&(e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle,e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})})),e.sdp.split(/\r?\n/).forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e)).then(function(){n.wtFirefox&&window.setTimeout(function(){n.firefoxcandidatebuffer.forEach(function(e){n.pc.addIceCandidate(new RTCIceCandidate(e)).then(function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate)}),n.firefoxcandidatebuffer=null},n.wtFirefox),t(null)},t)},s.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},s.prototype._answer=function(e,t){t=t||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");if("closed"===this.pc.signalingState)return t("Already closed");n.pc.createAnswer(e).then(function(e){var i=[];if(n.enableChromeNativeSimulcast&&(e.jingle=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var o=e.jingle.contents[1].application.sourceGroups||[],s=!1;if(o.forEach(function(e){"SIM"==e.semantics&&(s=!0)}),!s&&e.jingle.contents[1].application.sources.length){var u=JSON.parse(JSON.stringify(e.jingle.contents[1].application.sources[0]));u.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(u),i.push(e.jingle.contents[1].application.sources[0].ssrc),i.push(u.ssrc),o.push({semantics:"SIM",sources:i});var c=JSON.parse(JSON.stringify(u));c.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(c),o.push({semantics:"FID",sources:[u.ssrc,c.ssrc]}),e.jingle.contents[1].application.sourceGroups=o,e.sdp=r.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"})}}var p={type:"answer",sdp:e.sdp};if(n.assumeSetLocalSuccess){var f=a(p);n.emit("answer",f),t(null,f)}n._candidateBuffer=[],n.pc.setLocalDescription(e).then(function(){if(n.config.useJingle){var i=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"});i.sid=n.config.sid,n.localDescription=i,p.jingle=i}if(n.enableChromeNativeSimulcast&&(p.jingle||(p.jingle=r.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})),p.jingle.contents[1].application.sources.forEach(function(e,t){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(t/2)),e})}),p.sdp=r.toSessionSDP(p.jingle,{sid:n.sdpSessionID,role:n._role(),direction:"outgoing"})),p.sdp.split(/\r?\n/).forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),!n.assumeSetLocalSuccess){var o=a(p);n.emit("answer",o),t(null,o)}},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)})},s.prototype._onIce=function(e){var t=this;if(e.candidate){if(this.dontSignalCandidates)return;var n=e.candidate,i={candidate:{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}};this._checkLocalCandidate(n.candidate);var o,a,s=r.toCandidateJSON(n.candidate);if(this.eliminateDuplicateCandidates&&"relay"===s.type&&(a=(o=this._candidateBuffer.filter(function(e){return"relay"===e.type}).map(function(e){return e.foundation+":"+e.component})).indexOf(s.foundation+":"+s.component))>-1&&s.priority>>24>=o[a].priority>>24)return;if("max-bundle"===this.config.bundlePolicy&&(a=(o=this._candidateBuffer.filter(function(e){return s.type===e.type}).map(function(e){return e.address+":"+e.port})).indexOf(s.address+":"+s.port))>-1)return;if("require"===this.config.rtcpMuxPolicy&&"2"===s.component)return;if(this._candidateBuffer.push(s),t.config.useJingle){if(n.sdpMid||(t.pc.remoteDescription&&"offer"===t.pc.remoteDescription.type?n.sdpMid=t.remoteDescription.contents[n.sdpMLineIndex].name:n.sdpMid=t.localDescription.contents[n.sdpMLineIndex].name),!t.iceCredentials.local[n.sdpMid])r.toSessionJSON(t.pc.localDescription.sdp,{role:t._role(),direction:"outgoing"}).contents.forEach(function(e){var n=e.transport||{};n.ufrag&&(t.iceCredentials.local[e.name]={ufrag:n.ufrag,pwd:n.pwd})});if(i.jingle={contents:[{name:n.sdpMid,creator:t._role(),transport:{transportType:"iceUdp",ufrag:t.iceCredentials.local[n.sdpMid].ufrag,pwd:t.iceCredentials.local[n.sdpMid].pwd,candidates:[s]}}]},t.batchIceCandidates>0)return 0===t.batchedIceCandidates.length&&window.setTimeout(function(){var e={};t.batchedIceCandidates.forEach(function(t){t=t.contents[0],e[t.name]||(e[t.name]=t),e[t.name].transport.candidates.push(t.transport.candidates[0])});var n={jingle:{contents:[]}};Object.keys(e).forEach(function(t){n.jingle.contents.push(e[t])}),t.batchedIceCandidates=[],t.emit("ice",n)},t.batchIceCandidates),void t.batchedIceCandidates.push(i.jingle)}this.emit("ice",i)}else this.emit("endOfCandidates")},s.prototype._onDataChannel=function(e){var t=e.channel;this._remoteDataChannels.push(t),this.emit("addChannel",t)},s.prototype.createDataChannel=function(e,t){var n=this.pc.createDataChannel(e,t);return this._localDataChannels.push(n),n},s.prototype.getStats=function(){if("function"!=typeof arguments[0])return this.pc.getStats.apply(this.pc,arguments);var e=arguments[0];this.pc.getStats().then(function(t){e(null,t)},function(t){e(t)})},e.exports=s},1481:function(e,t){e.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},1639:function(e,t,n){"use strict";t.VERSION="__STANZAIO_VERSION__",t.JID=n(1087).JID,t.Client=n(1642),t.createClient=function(e){var i=new t.Client(e);return i.use(n(1791)),i}},1640:function(e,t,n){"use strict";var i=n(1641);t.available=!1,t.toUnicode=i.toUnicode,t.nameprep=function(e){return e.toLowerCase()},t.nodeprep=function(e){return e.toLowerCase()},t.resourceprep=function(e){return e}},1641:function(e,t,n){(function(e,i){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,p=1,f=26,l=38,d=700,m=72,h=128,b="-",g=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-p,_=Math.floor,N=String.fromCharCode;function E(e){throw new RangeError(S[e])}function A(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function O(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+A((e=e.replace(y,".")).split("."),t).join(".")}function j(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function T(e){return A(e,function(e){var t="";return e>65535&&(t+=N((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function I(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var i=0;for(e=n?_(e/d):e>>1,e+=_(e/t);e>x*f>>1;i+=c)e=_(e/x);return _(i+(x+1)*e/(e+l))}function C(e){var t,n,i,r,o,a,s,l,d,g,v=[],y=e.length,S=0,x=h,N=m;for((n=e.lastIndexOf(b))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&E("not-basic"),v.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(o=S,a=1,s=c;r>=y&&E("invalid-input"),((l=I(e.charCodeAt(r++)))>=c||l>_((u-S)/a))&&E("overflow"),S+=l*a,!(l<(d=s<=N?p:s>=N+f?f:s-N));s+=c)a>_(u/(g=c-d))&&E("overflow"),a*=g;N=w(S-o,t=v.length+1,0==o),_(S/t)>u-x&&E("overflow"),x+=_(S/t),S%=t,v.splice(S++,0,x)}return T(v)}function M(e){var t,n,i,r,o,a,s,l,d,g,v,y,S,x,A,O=[];for(y=(e=j(e)).length,t=h,n=0,o=m,a=0;a<y;++a)(v=e[a])<128&&O.push(N(v));for(i=r=O.length,r&&O.push(b);i<y;){for(s=u,a=0;a<y;++a)(v=e[a])>=t&&v<s&&(s=v);for(s-t>_((u-n)/(S=i+1))&&E("overflow"),n+=(s-t)*S,t=s,a=0;a<y;++a)if((v=e[a])<t&&++n>u&&E("overflow"),v==t){for(l=n,d=c;!(l<(g=d<=o?p:d>=o+f?f:d-o));d+=c)A=l-g,x=c-g,O.push(N(R(g+A%x,0))),l=_(A/x);O.push(N(R(l,0))),o=w(n,S,i==r),n=0,++i}++n,++t}return O.join("")}s={version:"1.4.1",ucs2:{decode:j,encode:T},decode:C,encode:M,toASCII:function(e){return O(e,function(e){return v.test(e)?"xn--"+M(e):e})},toUnicode:function(e){return O(e,function(e){return g.test(e)?C(e.slice(4).toLowerCase()):e})}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(169)(e),n(55))},1642:function(e,t,n){"use strict";var i=n(1191),r=n(1193),o=n(1192),a=n(1332),s=n(1134),u=n(1090),c=n(1662),p=n(1087).JID,f=n(1665),l=n(1666),d=n(1675),m={external:n(1677),"scram-sha-1":n(1679),"digest-md5":n(1683),"x-oauth2":n(1684),plain:n(1686),anonymous:n(1688)};function h(e){var t=this;s.call(this),e=e||{},this._initConfig(e),this.stanzas=a.getGlobalJXT(),this.jid=new p,this.stanzas=a.createRegistry(),this.stanzas.use(n(1690)),this.stanzas.use(n(1698)),this.use(n(1776)),this.use(n(1777)),this.use(n(1778)),this.use(n(1779)),this.use(n(1780)),this.sm=new f(this),this.transports={},this.on("stream:data",function(e){var n=e?e.toJSON():null;if(n){if("iq"===e._name&&(n._xmlChildCount=0,i(e.xml.childNodes,function(e){1===e.nodeType&&(n._xmlChildCount+=1)})),t.emit(e._eventname||e._name,n),"message"===e._name||"presence"===e._name||"iq"===e._name)t.sm.handle(n),t.emit("stanza",n);else{if("smAck"===e._name)return t.sm.process(n);if("smRequest"===e._name)return t.sm.ack()}n.id&&(t.emit("id:"+n.id,n),t.emit(e._name+":id:"+n.id,n))}}),this.on("disconnected",function(){t.transport&&(t.transport.off("*"),delete t.transport),t.releaseGroup("connection")}),this.on("auth:success",function(){t.transport&&(t.transport.authenticated=!0)}),this.on("iq",function(e){var n=e.type,i=e._xmlChildCount;delete e._xmlChildCount;var r=Object.keys(e).filter(function(e){return"id"!==e&&"to"!==e&&"from"!==e&&"lang"!==e&&"type"!==e&&"errorReply"!==e&&"resultReply"!==e});if("get"===e.type||"set"===e.type){if(1!==i)return t.sendIq(e.errorReply({error:{type:"modify",condition:"bad-request"}}));if(!r.length)return t.sendIq(e.errorReply({error:{type:"cancel",condition:"service-unavailable"}}));var o="iq:"+n+":"+r[0];t.callbacks[o]?t.emit(o,e):t.sendIq(e.errorReply({error:{type:"cancel",condition:"service-unavailable"}}))}}),this.on("message",function(e){Object.keys(e.$body||{}).length&&("chat"===e.type||"normal"===e.type?t.emit("chat",e):"groupchat"===e.type&&t.emit("groupchat",e)),"error"===e.type&&t.emit("message:error",e)}),this.on("presence",function(e){var n=e.type||"available";"error"===n&&(n="presence:error"),t.emit(n,e)})}u.inherits(h,s),Object.defineProperty(h.prototype,"stream",{get:function(){return this.transport?this.transport.stream:void 0}}),h.prototype._initConfig=function(e){var t=this,n=this.config||{};this.config=r({useStreamManagement:!0,transports:["websocket","bosh"],sasl:["external","scram-sha-1","digest-md5","plain","anonymous"]},n,e),o(this.config.sasl)||(this.config.sasl=[this.config.sasl]),this.SASLFactory=new d,this.config.sasl.forEach(function(e){if("string"==typeof e){var n=m[e.toLowerCase()];n&&n.prototype&&n.prototype.name&&t.SASLFactory.use(n)}else t.SASLFactory.use(e)}),this.config.jid=new p(this.config.jid),this.config.server||(this.config.server=this.config.jid.domain),this.config.password&&(this.config.credentials=this.config.credentials||{},this.config.credentials.password=this.config.password,delete this.config.password),this.config.transport&&(this.config.transports=[this.config.transport]),o(this.config.transports)||(this.config.transports=[this.config.transports])},h.prototype.use=function(e){"function"==typeof e&&e(this,this.stanzas,this.config)},h.prototype.nextId=function(){return c.v4()},h.prototype.discoverBindings=function(e,t){l(e,function(e,n){if(e)return t(e,[]);var i={websocket:[],bosh:[]};(n.links||[]).forEach(function(e){e.href&&"urn:xmpp:alt-connections:websocket"===e.rel&&i.websocket.push(e.href),e.href&&"urn:xmpp:altconnect:websocket"===e.rel&&i.websocket.push(e.href),e.href&&"urn:xmpp:alt-connections:xbosh"===e.rel&&i.bosh.push(e.href),e.href&&"urn:xmpp:altconnect:bosh"===e.rel&&i.bosh.push(e.href)}),t(!1,i)})},h.prototype._getConfiguredCredentials=function(){var e=this.config.credentials||{},t=new p(this.config.jid),n=e.username||t.local,i=e.server||t.domain,o={username:n,password:this.config.password,server:i,host:i,realm:i,serviceType:"xmpp",serviceName:i};return r(o,e)},h.prototype.getCredentials=function(e){return e(null,this._getConfiguredCredentials())},h.prototype.connect=function(e,t){var i=this;if(this._initConfig(e),t||1!==i.config.transports.length||((t={}).name=i.config.transports[0]),t&&t.name){"websocket"!==t.name&&"old-websocket"!==t.name||(this.use(n(1781)),this.use(n(1782))),"bosh"===t.name&&this.use(n(1784));var r=i.transport=new i.transports[t.name](i.sm,i.stanzas);return r.on("*",function(e,t){i.emit(e,t)}),r.connect(i.config)}return i.discoverBindings(i.config.server,function(e,t){if(e)return console.error("Could not find https://"+i.config.server+"/.well-known/host-meta file to discover connection endpoints for the requested transports."),i.disconnect();for(var n=0,r=i.config.transports.length;n<r;n++){var o=i.config.transports[n];console.log("Checking for %s endpoints",o);for(var a=0,s=(t[o]||[]).length;a<s;a++){var u=t[o][a];if(0===u.indexOf("wss://")||0===u.indexOf("https://"))return"websocket"===o?i.config.wsURL=u:i.config.boshURL=u,console.log("Using %s endpoint: %s",o,u),i.connect(null,{name:o,url:u});console.warn("Discovered unencrypted %s endpoint (%s). Ignoring",o,u)}}return console.error("No endpoints found for the requested transports."),i.disconnect()})},h.prototype.disconnect=function(){this.sessionStarted&&(this.releaseGroup("session"),this.sm.started||this.emit("session:end")),this.sessionStarted=!1,this.releaseGroup("connection"),this.transport?this.transport.disconnect():this.emit("disconnected")},h.prototype.send=function(e){this.sm.track(e),this.transport&&this.transport.send(e)},h.prototype.sendMessage=function(e){(e=e||{}).id||(e.id=this.nextId());var t=new(this.stanzas.getMessage())(e);return this.emit("message:sent",t.toJSON()),this.send(t),e.id},h.prototype.sendPresence=function(e){(e=e||{}).id||(e.id=this.nextId());var t=this.stanzas.getPresence();return this.send(new t(e)),e.id},h.prototype.sendIq=function(e,t){var n,i,r,o,a=this;(e=e||{}).id||(e.id=this.nextId());var s=this.stanzas.getIq(),u=e.toJSON?e:new s(e);if("error"!==e.type&&"result"!==e.type)return o=new p(e.to),(r={})[""]=!0,r[o.full]=!0,r[o.bare]=!0,r[o.domain]=!0,r[a.jid.bare]=!0,r[a.jid.domain]=!0,i="iq:id:"+e.id,n=new Promise(function(e,t){var n=function(o){r[o.from.full]&&("result"!==o.type&&"error"!==o.type||(a.off(i,n),o.error?t(o):e(o)))};a.on(i,"session",n)}),this.send(u),function(e,t,n){var i;return Promise.race([e,new Promise(function(e,r){i=setTimeout(function(){r({id:t,type:"error",error:{condition:"timeout"}})},n)})]).then(function(e){return clearTimeout(i),e})}(n,e.id,1e3*(a.config.timeout||15)).then(function(e){return t&&t(null,e),e},function(e){if(t)return t(e);throw e});this.send(u)},h.prototype.sendStreamError=function(e){e=e||{};var t=new(this.stanzas.getStreamError())(e);this.emit("stream:error",t.toJSON()),this.send(t),this.disconnect()},e.exports=h},1643:function(e,t){e.exports=function(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}},1644:function(e,t){var n=9007199254740991,i="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,s=a.hasOwnProperty,u=a.toString,c=a.propertyIsEnumerable;e.exports=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?u.call(e):"";return t==r||t==o}(e)}(e)}(e)&&s.call(e,"callee")&&(!c.call(e,"callee")||u.call(e)==i)}},1645:function(e,t,n){var i=n(1646),r=n(1216);e.exports=function(e,t){return null==t?e:i(t,r(t),e)}},1646:function(e,t){e.exports=function(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}},1647:function(e,t,n){var i=n(1331),r=n(1463),o=n(1648);e.exports=function(e){return o(function(t,n){var o=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,c,5),a-=2):a-=(s="function"==typeof c?c:void 0)?1:0,u&&r(n[0],n[1],u)&&(s=a<3?void 0:s,a=1);++o<a;){var p=n[o];p&&e(t,p,s)}return t})}},1648:function(e,t){var n="Expected a function",i=Math.max;e.exports=function(e,t){if("function"!=typeof e)throw new TypeError(n);return t=i(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,o=i(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}},1649:function(e,t,n){var i=n(1650),r=n(1651),o=r;o.v1=i,o.v4=r,e.exports=o},1650:function(e,t,n){var i,r,o=n(1464),a=n(1465),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,p=t||[],f=(e=e||{}).node||i,l=void 0!==e.clockseq?e.clockseq:r;if(null==f||null==l){var d=o();null==f&&(f=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==l&&(l=r=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:u+1,b=m-s+(h-u)/1e4;if(b<0&&void 0===e.clockseq&&(l=l+1&16383),(b<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,u=h,r=l;var g=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;p[c++]=g>>>24&255,p[c++]=g>>>16&255,p[c++]=g>>>8&255,p[c++]=255&g;var v=m/4294967296*1e4&268435455;p[c++]=v>>>8&255,p[c++]=255&v,p[c++]=v>>>24&15|16,p[c++]=v>>>16&255,p[c++]=l>>>8|128,p[c++]=255&l;for(var y=0;y<6;++y)p[c+y]=f[y];return t||a(p)}},1651:function(e,t,n){var i=n(1464),r=n(1465);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||r(a)}},1652:function(e,t,n){"use strict";(function(e){var i=n(1333),r=n(1193),o=i.find,a=i.createElement,s=t.field=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return{get:function(){return e.apply(null,[this.xml].concat(n))},set:function(e){t.apply(null,[this.xml].concat(n).concat([e]))}}}};t.boolAttribute=s(i.getBoolAttribute,i.setBoolAttribute),t.subAttribute=s(i.getSubAttribute,i.setSubAttribute),t.boolSubAttribute=s(i.getSubBoolAttribute,i.setSubBoolAttribute),t.text=s(i.getText,i.setText),t.textSub=t.subText=s(i.getSubText,i.setSubText),t.multiTextSub=t.multiSubText=s(i.getMultiSubText,i.setMultiSubText),t.multiSubAttribute=s(i.getMultiSubAttribute,i.setMultiSubAttribute),t.langTextSub=t.subLangText=s(i.getSubLangText,i.setSubLangText),t.boolSub=s(i.getBoolSub,i.setBoolSub),t.langAttribute=s(function(e){return e.getAttributeNS(i.XML_NS,"lang")||""},function(e,t){e.setAttributeNS(i.XML_NS,"lang",t)}),t.b64Text=s(function(t){return t.textContent&&"="!==t.textContent?new e(t.textContent,"base64"):""},function(t,n){if("string"==typeof n){var i=new e(n).toString("base64");t.textContent=i||"="}else t.textContent=""}),t.dateAttribute=function(e,t){return{get:function(){var n=i.getAttribute(this.xml,e);return n?new Date(n):t?new Date(Date.now()):void 0},set:function(t){t&&("string"!=typeof t&&(t=t.toISOString()),i.setAttribute(this.xml,e,t))}}},t.dateSub=function(e,t,n){return{get:function(){var r=i.getSubText(this.xml,e,t);return r?new Date(r):n?new Date(Date.now()):void 0},set:function(n){n&&("string"!=typeof n&&(n=n.toISOString()),i.setSubText(this.xml,e,t,n))}}},t.dateSubAttribute=function(e,t,n,r){return{get:function(){var o=i.getSubAttribute(this.xml,e,t,n);return o?new Date(o):r?new Date(Date.now()):void 0},set:function(r){r&&("string"!=typeof r&&(r=r.toISOString()),i.setSubAttribute(this.xml,e,t,n,r))}}},t.numberAttribute=function(e,t,n){return{get:function(){var r=t?parseFloat:parseInt,o=i.getAttribute(this.xml,e,"");if(!o)return n;var a=r(o,10);return isNaN(a)?n:a},set:function(t){i.setAttribute(this.xml,e,t.toString())}}},t.numberSub=function(e,t,n,r){return{get:function(){var o=n?parseFloat:parseInt,a=i.getSubText(this.xml,e,t,"");if(!a)return r;var s=o(a,10);return isNaN(s)?r:s},set:function(n){i.setSubText(this.xml,e,t,n.toString())}}},t.numberSubAttribute=function(e,t,n,r,o){return{get:function(){var a=r?parseFloat:parseInt,s=i.getSubAttribute(this.xml,e,t,n,"");if(!s)return o;var u=a(s,10);return isNaN(u)?o:u},set:function(r){i.setSubAttribute(this.xml,e,t,n,r.toString())}}},t.attribute=function(e,t){return{get:function(){return i.getAttribute(this.xml,e,t)},set:function(t){i.setAttribute(this.xml,e,t)}}},t.attributeNS=function(e,t,n){return{get:function(){return i.getAttributeNS(this.xml,e,t,n)},set:function(n){i.setAttributeNS(this.xml,e,t,n)}}},t.extension=function(e){return{get:function(){var t=e.prototype._name;if(!this._extensions[t]){var n=o(this.xml,e.prototype._NS,e.prototype._EL);n.length?this._extensions[t]=new e(null,n[0],this):(this._extensions[t]=new e({},null,this),this.xml.appendChild(this._extensions[t].xml)),this._extensions[t].parent=this}return this._extensions[t]},set:function(t){if(t){var n=this[e.prototype._name];!0===t&&(t={}),r(n,t)}}}},t.multiExtension=function(e){return{get:function(){for(var t=o(this.xml,e.prototype._NS,e.prototype._EL),n=[],i=0,r=t.length;i<r;i++)n.push(new e({},t[i],this));return n},set:function(t){t=t||[];var n,i,r=o(this.xml,e.prototype._NS,e.prototype._EL);for(n=0,i=r.length;n<i;n++)this.xml.removeChild(r[n]);for(n=0,i=t.length;n<i;n++){var a=new e(t[n],null,this);this.xml.appendChild(a.xml)}}}},t.enumSub=function(e,t){return{get:function(){var n=this,i=[];return t.forEach(function(t){var r=o(n.xml,e,t);r.length&&i.push(r[0].nodeName)}),i[0]||""},set:function(n){var i=this,r=!1;if(t.forEach(function(t){var a=o(i.xml,e,t);a.length&&(t===n?r=!0:i.xml.removeChild(a[0]))}),n&&!r){var s=a(e,n);this.xml.appendChild(s)}}}},t.subExtension=function(e,t,n,i){return{get:function(){if(!this._extensions[e]){var r=o(this.xml,t,n);r.length?r=r[0]:(r=a(t,n,this._NS),this.xml.appendChild(r));var s=o(r,i.prototype._NS,i.prototype._EL);s.length?this._extensions[e]=new i(null,s[0],{xml:r}):(this._extensions[e]=new i({},null,{xml:r}),r.appendChild(this._extensions[e].xml)),this._extensions[e].parent=this}return this._extensions[e]},set:function(i){var a=o(this.xml,t,n);if(a.length&&!i&&this.xml.removeChild(a[0]),i){var s=this[e];!0===i&&(i={}),r(s,i)}}}},t.subMultiExtension=function(e,t,n){return{get:function(){var i=this,r=[],a=o(this.xml,e,t);return a.length?(a=a[0],o(a,n.prototype._NS,n.prototype._EL).forEach(function(e){r.push(new n({},e,i))}),r):r},set:function(i){var r=o(this.xml,e,t);r.length&&this.xml.removeChild(r[0]),i.length&&(r=a(e,t,this._NS),i.forEach(function(t){var i=new n(t,null,{xml:{namespaceURI:e}});r.appendChild(i.xml)}),this.xml.appendChild(r))}}}}).call(this,n(1053).Buffer)},1653:function(e,t,n){"use strict";var i=n(1466),r=n(1467),o=n(1291),a=n(1217),s=n(1468),u=n(1655),c=n(1656),p=n(1470),f=n(1657),l=n(1469),d=n(1658);(t=e.exports=function(){return c.apply(null,arguments)}).Element=a,t.equal=s.equal,t.nameEqual=s.name,t.attrsEqual=s.attrs,t.childrenEqual=s.children,t.isNode=f.isNode,t.isElement=f.isElement,t.isText=f.isText,t.clone=l,t.createElement=u,t.escapeXML=o.escapeXML,t.unescapeXML=o.unescapeXML,t.escapeXMLText=o.escapeXMLText,t.unescapeXMLText=o.unescapeXMLText,t.Parser=r,t.parse=i,t.tag=c,t.tagString=p,t.stringify=d},1654:function(e,t,n){"use strict";var i=n(1047),r=n(1210).EventEmitter,o=n(1291).unescapeXML,a=e.exports=function(){r.call(this);var e,t,n,i,a,s,u,c,p=0,f=0;this._handleTagOpening=function(e,t,n){e?this.emit("endElement",t):(this.emit("startElement",t,n),a&&this.emit("endElement",t))},this.write=function(r){"string"!=typeof r&&(r=r.toString());var l=0;function d(){if("number"==typeof f){var e=r.substring(f,l);return f=void 0,e}}for(e&&(r=e+r,l+=e.length,e=null);l<r.length;l++){if(0===p){const e=r.indexOf("<",l);-1!==e&&l!==e&&(l=e)}else if(8===p){const e=r.indexOf(u,l);-1!==e&&(l=e)}else if(1===p){const e=r.indexOf("--\x3e",l);-1!==e&&(l=e+2)}var m=r.charCodeAt(l);switch(p){case 0:if(60===m){var h=d();h&&this.emit("text",o(h)),p=3,f=l+1,n={}}break;case 9:if(93===m&&"]>"===r.substr(l+1,2)){var b=d();b&&this.emit("text",b),p=1}break;case 3:47===m&&f===l?(f=l+1,i=!0):33===m?"[CDATA["===r.substr(l+1,7)?(f=l+8,p=9):(f=void 0,p=1):63===m?(f=void 0,p=2):(m<=32||47===m||62===m)&&(t=d(),l--,p=4);break;case 1:if(62===m){var g=r.charCodeAt(l-1),v=r.charCodeAt(l-2);(45===g&&45===v||93===g&&93===v)&&(p=0)}break;case 2:if(62===m)63===r.charCodeAt(l-1)&&(p=0);break;case 4:62===m?(this._handleTagOpening(i,t,n),t=void 0,n=void 0,i=void 0,a=void 0,p=0,f=l+1):47===m?a=!0:m>32&&(f=l,p=5);break;case 5:(m<=32||61===m)&&(c=d(),l--,p=6);break;case 6:61===m&&(p=7);break;case 7:34!==m&&39!==m||(s=m,u=34===m?'"':"'",p=8,f=l+1);break;case 8:if(m===s){var y=o(d());n[c]=y,c=void 0,p=4}}}"number"==typeof f&&f<=r.length&&(e=r.slice(f),f=0)}};i(a,r),a.prototype.end=function(e){e&&this.write(e),this.write=function(){}}},1655:function(e,t,n){"use strict";var i=n(1217);e.exports=function(e,t){for(var n=new i(e,t),r=2;r<arguments.length;r++){var o=arguments[r];o&&n.cnode(o)}return n}},1656:function(e,t,n){"use strict";var i=n(1470),r=n(1466);e.exports=function(){return r(i.apply(null,arguments))}},1657:function(e,t,n){"use strict";var i=n(1217);e.exports.isNode=function(e){return e instanceof i||"string"==typeof e},e.exports.isElement=function(e){return e instanceof i},e.exports.isText=function(e){return"string"==typeof e}},1658:function(e,t,n){"use strict";e.exports=function e(t,n,i){"number"==typeof n&&(n=" ".repeat(n)),i||(i=1);var r="";return r+="<"+t.name,Object.keys(t.attrs).forEach(function(e){r+=" "+e+'="'+t.attrs[e]+'"'}),t.children.length?(r+=">",t.children.forEach(function(t,o){n&&(r+="\n"+n.repeat(i)),r+="string"==typeof t?t:e(t,n,i+1)}),n&&(r+="\n"+n.repeat(i-1)),r+="</"+t.name+">"):r+="/>",r}},1659:function(e,t,n){"use strict";var i=n(1047),r=n(1217);function o(e,t){r.call(this,e,t),this.nodeType=1,this.nodeName=this.localName}i(o,r),o.prototype._getElement=function(e,t){return new o(e,t)},Object.defineProperty(o.prototype,"localName",{get:function(){return this.getName()}}),Object.defineProperty(o.prototype,"namespaceURI",{get:function(){return this.getNS()}}),Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(o.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.getText()},set:function(e){this.children.push(e)}}),o.prototype.getElementsByTagName=function(e){return this.getChildren(e)},o.prototype.getAttribute=function(e){return this.getAttr(e)},o.prototype.setAttribute=function(e,t){this.attr(e,t)},o.prototype.getAttributeNS=function(e,t){return"http://www.w3.org/XML/1998/namespace"===e?this.getAttr(["xml",t].join(":")):this.getAttr(t,e)},o.prototype.setAttributeNS=function(e,t,n){var i;"http://www.w3.org/XML/1998/namespace"===e?i="xml":i=this.getXmlns()[e]||"";i&&this.attr([i,t].join(":"),n)},o.prototype.removeAttribute=function(e){this.attr(e,null)},o.prototype.removeAttributeNS=function(e,t){var n;"http://www.w3.org/XML/1998/namespace"===e?n="xml":n=this.getXmlns()[e]||"";n&&this.attr([n,t].join(":"),null)},o.prototype.appendChild=function(e){this.cnode(e)},o.prototype.removeChild=function(e){this.remove(e)},o.createElement=function(e,t){var n=new o(e,t);return Array.prototype.slice.call(arguments,2).forEach(function(e){n.appendChild(e)}),n},e.exports=o},1660:function(e,t,n){"use strict";var i=n(1333),r=n(1193),o={constructor:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};e.exports=function(e,t){function n(n,o,a){var s=this,u=((o||{}).parentNode||(a||{}).xml||{}).namespaceURI;s.xml=o||i.createElement(s._NS,s._EL,u),Object.keys(s._PREFIXES).forEach(function(e){var t=s._PREFIXES[e];s.xml.setAttribute("xmlns:"+e,t)}),s._extensions={};for(var c=0,p=s.xml.childNodes.length;c<p;c++){var f=s.xml.childNodes[c],l=e.getDefinition(f.localName,f.namespaceURI);if(void 0!==l){var d=l.prototype._name;s._extensions[d]=new l(null,f),s._extensions[d].parent=s}}return r(s,n),t.init&&t.init.apply(s,[n]),s}return n.prototype._isJXT=!0,n.prototype._name=t.name,n.prototype._eventname=t.eventName,n.prototype._NS=t.namespace,n.prototype._EL=t.element||t.name,n.prototype._PREFIXES=t.prefixes||{},n.prototype._TAGS=t.tags||[],n.prototype.toString=function(){return this.xml.toString()},n.prototype.toJSON=function(){var t,n={};for(t in this._extensions)this._extensions[t].toJSON&&"_"!==t[0]&&(n[t]=this._extensions[t].toJSON());for(t in this){var i=!o[t]&&"_"!==t[0],r=e.getExtensions(this._EL,this._NS)[t];if(i&&!r){var a=this[t];if("function"==typeof a)continue;var s=Object.prototype.toString.call(a);if(s.indexOf("Object")>=0)Object.keys(a).length>0&&(a._isJXT?n[t]=a.toJSON():n[t]=a);else if(s.indexOf("Array")>=0){if(a.length>0){for(var u=[],c=a.length,p=0;p<c;p++){var f=a[p];void 0!==f&&(f._isJXT?u.push(f.toJSON()):u.push(f))}n[t]=u}}else void 0!==a&&!1!==a&&""!==a&&(n[t]=a)}}return n},n}},1661:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},1662:function(e,t,n){var i=n(1663),r=n(1664),o=r;o.v1=i,o.v4=r,e.exports=o},1663:function(e,t,n){var i,r,o=n(1471),a=n(1472),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,p=t||[],f=(e=e||{}).node||i,l=void 0!==e.clockseq?e.clockseq:r;if(null==f||null==l){var d=o();null==f&&(f=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==l&&(l=r=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:u+1,b=m-s+(h-u)/1e4;if(b<0&&void 0===e.clockseq&&(l=l+1&16383),(b<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,u=h,r=l;var g=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;p[c++]=g>>>24&255,p[c++]=g>>>16&255,p[c++]=g>>>8&255,p[c++]=255&g;var v=m/4294967296*1e4&268435455;p[c++]=v>>>8&255,p[c++]=255&v,p[c++]=v>>>24&15|16,p[c++]=v>>>16&255,p[c++]=l>>>8|128,p[c++]=255&l;for(var y=0;y<6;++y)p[c+y]=f[y];return t||a(p)}},1664:function(e,t,n){var i=n(1471),r=n(1472);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||r(a)}},1665:function(e,t,n){"use strict";var i=Math.pow(2,32);function r(e,t){return(e%t+t)%t}function o(e){this.client=e,this.id=!1,this.allowResume=!0,this.started=!1,this.inboundStarted=!1,this.outboundStarted=!1,this.lastAck=0,this.handled=0,this.windowSize=1,this.unacked=[],this.pendingAck=!1;var t="urn:xmpp:sm:3";this.stanzas={Enable:e.stanzas.getDefinition("enable",t),Resume:e.stanzas.getDefinition("resume",t),Ack:e.stanzas.getDefinition("a",t),Request:e.stanzas.getDefinition("r",t)}}o.prototype={constructor:{value:o},enable:function(){var e=new this.stanzas.Enable;e.resume=this.allowResume,this.client.send(e),this.handled=0,this.outboundStarted=!0},resume:function(){var e=new this.stanzas.Resume({h:this.handled,previd:this.id});this.client.send(e),this.outboundStarted=!0},enabled:function(e){this.id=e.id,this.handled=0,this.inboundStarted=!0},resumed:function(e){this.id=e.previd,e.h&&this.process(e,!0),this.inboundStarted=!0},failed:function(){this.inboundStarted=!1,this.outboundStarted=!1,this.id=!1,this.lastAck=0,this.handled=0,this.unacked=[]},ack:function(){this.client.send(new this.stanzas.Ack({h:this.handled}))},request:function(){this.pendingAck=!0,this.client.send(new this.stanzas.Request)},process:function(e,t){var n=this,o=r(e.h-this.lastAck,i);this.pendingAck=!1;for(var a=0;a<o&&this.unacked.length>0;a++)this.client.emit("stanza:acked",this.unacked.shift());if(this.lastAck=e.h,t){var s=this.unacked;this.unacked=[],s.forEach(function(e){n.client.send(e)})}this.needAck()&&this.request()},track:function(e){var t=e._name;this.outboundStarted&&{message:!0,presence:!0,iq:!0}[t]&&(this.unacked.push(e),this.needAck()&&this.request())},handle:function(){this.inboundStarted&&(this.handled=r(this.handled+1,i))},needAck:function(){return!this.pendingAck&&this.unacked.length>=this.windowSize}},Object.defineProperties(o.prototype,{started:{get:function(){return this.outboundStarted&&this.inboundStarted},set:function(e){e||(this.outboundStarted=!1,this.inboundStarted=!1)}}}),e.exports=o},1666:function(e,t,n){"use strict";var i=n(1292),r=n(1473),o=n(1332).createRegistry();o.use(n(1674)),e.exports=function(e,t){"string"==typeof e&&(e={host:e});var n={ssl:!0,json:!0,xrd:!0};for(var a in e)n[a]=e[a];var s=n.ssl?"https://":"http://";i.parallel([function(e){r(s+n.host+"/.well-known/host-meta.json",function(t,n,i){if(t)return e(null);var r;try{r=JSON.parse(i)}catch(e){r=null}return e(r)})},function(e){r(s+n.host+"/.well-known/host-meta",function(t,n,i){if(t)return e(null);var r=o.parse(i);return e(r.toJSON())})}],function(e){e?t(null,e):t("no-host-meta")})}},1667:function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(55))},1668:function(e,t){e.exports=function(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},1669:function(e,t,n){var i=n(1670),r=n(1671);e.exports=function(e){if(!e)return{};var t={};return r(i(e).split("\n"),function(e){var n=e.indexOf(":"),r=i(e.slice(0,n)).toLowerCase(),o=i(e.slice(n+1));void 0===t[r]?t[r]=o:!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t[r])?t[r]=[t[r],o]:t[r].push(o)}),t}},1670:function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},1671:function(e,t,n){"use strict";var i=n(1672),r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!i(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===r.call(e)?function(e,t,n){for(var i=0,r=e.length;i<r;i++)o.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(e,t,a):"string"==typeof e?function(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)}(e,t,a):function(e,t,n){for(var i in e)o.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))}(e,t,a)}},1672:function(e,t,n){"use strict";var i=Function.prototype.toString,r=/^\s*class\b/,o=function(e){try{var t=i.call(e);return r.test(t)}catch(e){return!1}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(s)return function(e){try{return!o(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},1673:function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)n.call(i,r)&&(e[r]=i[r])}return e};var n=Object.prototype.hasOwnProperty},1674:function(e,t,n){"use strict";var i=n(1332),r="http://docs.oasis-open.org/ns/xri/xrd-1.0";e.exports=function(e){var t={get:function(){for(var e={},t=i.find(this.xml,r,"Property"),n=0,o=t.length;n<o;n++){var a=t[n];e[i.getAttribute(a,"type")]=a.textContent}return e}},n=e.define({name:"xrd",namespace:r,element:"XRD",fields:{subject:i.subText(r,"Subject"),expires:i.dateSub(r,"Expires"),aliases:i.multiSubText(r,"Alias"),properties:t}}),o=e.define({name:"_xrdlink",namespace:r,element:"Link",fields:{rel:i.attribute("rel"),href:i.attribute("href"),type:i.attribute("type"),template:i.attribute("template"),titles:i.subLangText(r,"Title","default"),properties:t}});return e.extend(n,o,"links"),n}},1675:function(e,t,n){(function(e){!function(e,t,n){(t.exports=n).Factory=n}(0,e,n(1676))}).call(this,n(169)(e))},1676:function(e,t,n){(function(e){!function(e,t){function n(){this._mechs=[]}n.prototype.use=function(e,t){return t||(e=(t=e).prototype.name),this._mechs.push({name:e,mech:t}),this},n.prototype.create=function(e){for(var t=0,n=this._mechs.length;t<n;t++)for(var i=0,r=e.length;i<r;i++){var o=this._mechs[t];if(o.name==e[i])return new o.mech}return null},t.exports=n}(0,e)}).call(this,n(169)(e))},1677:function(e,t,n){(function(e){!function(e,t,n){(t.exports=n).Mechanism=n}(0,e,n(1678))}).call(this,n(169)(e))},1678:function(e,t,n){(function(e){!function(e,t){function n(){}n.prototype.name="EXTERNAL",n.prototype.clientFirst=!0,n.prototype.response=function(e){return e.authzid||""},n.prototype.challenge=function(e){},t.exports=n}(0,e)}).call(this,n(169)(e))},1679:function(e,t,n){(function(t){var i=n(1680),r=n(1682),o={};function a(e){e=e||{},this._genNonce=e.genNonce||r.genNonce,this._stage="initial"}a.Mechanism=a,a.prototype.name="SCRAM-SHA-1",a.prototype.clientFirst=!0,a.prototype.response=function(e){return o[this._stage](this,e)},a.prototype.challenge=function(e){var n=r.parse(e);return this._salt=new t(n.s||"","base64"),this._iterationCount=parseInt(n.i,10),this._nonce=n.r,this._verifier=n.v,this._error=n.e,this._challenge=e,this},o.initial=function(e,t){e._cnonce=e._genNonce();var n="";t.authzid&&(n="a="+r.saslname(t.authzid)),e._gs2Header="n,"+n+",";var i="r="+e._cnonce,o="n="+r.saslname(t.username||"");e._clientFirstMessageBare=o+","+i;var a=e._gs2Header+e._clientFirstMessageBare;return e._stage="challenge",a},o.challenge=function(e,n){var r,o,a,s=new t(e._gs2Header).toString("base64");e._clientFinalMessageWithoutProof="c="+s+",r="+e._nonce,n.salt&&0===t.compare(n.salt,e._salt)?n.clientKey&&n.serverKey?(o=n.clientKey,a=n.serverKey):n.saltedPassword&&(r=n.saltedPassword,o=i.HMAC(r,"Client Key"),a=i.HMAC(r,"Server Key")):(r=i.Hi(n.password||"",e._salt,e._iterationCount),o=i.HMAC(r,"Client Key"),a=i.HMAC(r,"Server Key"));var u=i.H(o),c=e._clientFirstMessageBare+","+e._challenge+","+e._clientFinalMessageWithoutProof,p=i.HMAC(u,c),f=i.XOR(o,p).toString("base64");e._serverSignature=i.HMAC(a,c);var l=e._clientFinalMessageWithoutProof+",p="+f;return e._stage="final",e.cache={salt:e._salt,saltedPassword:r,clientKey:o,serverKey:a},l},o.final=function(){return""},e.exports=a}).call(this,n(1053).Buffer)},1680:function(e,t,n){(function(e){var i=n(1132),r=n(1285),o=n(1681);t.XOR=o,t.H=function(e){return i("sha1").update(e).digest()},t.HMAC=function(e,t){return r("sha1",e).update(t).digest()},t.Hi=function(n,i,r){for(var o=t.HMAC(n,e.concat([i,new e([0,0,0,1],"binary")])),a=o,s=0;s<r-1;s++)o=t.HMAC(n,o),a=t.XOR(a,o);return a}}).call(this,n(1053).Buffer)},1681:function(e,t,n){(function(t){e.exports=function(e,n){t.isBuffer(e)||(e=new t(e));t.isBuffer(n)||(n=new t(n));var i=[];if(e.length>n.length)for(var r=0;r<n.length;r++)i.push(e[r]^n[r]);else for(var r=0;r<e.length;r++)i.push(e[r]^n[r]);return new t(i)}}).call(this,n(1053).Buffer)},1682:function(e,t,n){var i=n(1108).randomBytes||n(1108);t.parse=function(e){for(var t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),i=0,r=n.length;i<r;i++){var o=/(\w+)=["]?([^"]+)["]?$/.exec(n[i]);o&&(t[o[1]]=o[2])}return t},t.saslname=function(e){for(var t=[],n="",i=0;i<e.length;i++)","===(n=e[i])?t.push("=2C"):"="===n?t.push("=3D"):t.push(n);return t.join("")},t.genNonce=function(e){return i((e||32)/2).toString("hex")}},1683:function(e,t,n){var i=n(1108),r=n(1132);function o(){return i(16).toString("hex")}function a(e){e=e||{},this._genNonce=e.genNonce||o}a.Mechanism=a,a.prototype.name="DIGEST-MD5",a.prototype.clientFirst=!1,a.prototype.response=function(e){if(!this._completed){var t=e.serviceType+"/"+e.host;e.serviceName&&e.host!==e.serviceName&&(t+="/"+e.serviceName);var n=e.realm||this._realm||"",i=this._genNonce(),o="00000001",a="auth",s="";s+='username="'+e.username+'"',n&&(s+=',realm="'+n+'"'),s+=',nonce="'+this._nonce+'"',s+=',cnonce="'+i+'"',s+=",nc="+o,s+=",qop=auth",s+=',digest-uri="'+t+'"';var u=r("md5").update(e.username).update(":").update(n).update(":").update(e.password).digest(),c=r("md5").update(u).update(":").update(this._nonce).update(":").update(i);e.authzid&&c.update(":").update(e.authzid),c=c.digest("hex");var p=r("md5").update("AUTHENTICATE:").update(t);return p=p.digest("hex"),s+=",response="+r("md5").update(c).update(":").update(this._nonce).update(":").update(o).update(":").update(i).update(":").update(a).update(":").update(p).digest("hex"),"utf-8"===this._charset&&(s+=",charset=utf-8"),e.authzid&&(s+='authzid="'+e.authzid+'"'),s}},a.prototype.challenge=function(e){var t=function(e){for(var t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/),i=0,r=n.length;i<r;i++){var o=/(\w+)=["]?([^"]+)["]?$/.exec(n[i]);o&&(t[o[1]]=o[2])}return t}(e);return this._completed=!!t.rspauth,this._realm=t.realm,this._nonce=t.nonce,this._qop=(t.qop||"auth").split(","),this._stale=t.stale,this._maxbuf=parseInt(t.maxbuf)||65536,this._charset=t.charset,this._algo=t.algorithm,this._cipher=t.cipher,this._cipher&&this._cipher.split(","),this},e.exports=a},1684:function(e,t,n){(function(e){!function(e,t,n){(t.exports=n).Mechanism=n}(0,e,n(1685))}).call(this,n(169)(e))},1685:function(e,t,n){(function(e){!function(e,t){function n(){}n.prototype.name="X-OAUTH2",n.prototype.clientFirst=!0,n.prototype.response=function(e){var t="";return t+="\0",t+=e.username,t+="\0",t+=e.token},n.prototype.challenge=function(e){},t.exports=n}(0,e)}).call(this,n(169)(e))},1686:function(e,t,n){(function(e){!function(e,t,n){(t.exports=n).Mechanism=n}(0,e,n(1687))}).call(this,n(169)(e))},1687:function(e,t,n){(function(e){!function(e,t){function n(){}n.prototype.name="PLAIN",n.prototype.clientFirst=!0,n.prototype.response=function(e){var t="";return t+=e.authzid||"",t+="\0",t+=e.username,t+="\0",t+=e.password},n.prototype.challenge=function(e){return this},t.exports=n}(0,e)}).call(this,n(169)(e))},1688:function(e,t,n){(function(e){!function(e,t,n){(t.exports=n).Mechanism=n}(0,e,n(1689))}).call(this,n(169)(e))},1689:function(e,t,n){(function(e){!function(e,t){function n(){}n.prototype.name="ANONYMOUS",n.prototype.clientFirst=!0,n.prototype.response=function(e){return e.trace||""},n.prototype.challenge=function(e){},t.exports=n}(0,e)}).call(this,n(169)(e))},1690:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1691)),o=i(n(1697));t.default=function(e){e.use(o.default),e.use(r.default)},e.exports=t.default},1691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r={client:i.Namespace.CLIENT,server:i.Namespace.SERVER,component:i.Namespace.COMPONENT};t.default=function(e){e.extendMessage=function(e,t){var n=this;this.withMessage(function(i){n.extend(i,e,t)})},e.extendPresence=function(e,t){var n=this;this.withPresence(function(i){n.extend(i,e,t)})},e.extendIQ=function(e,t){var n=this;this.withIQ(function(i){n.extend(i,e,t)})},e.extendStreamFeatures=function(e){var t=this;this.withStreamFeatures(function(n){t.extend(n,e)})},e.extendPubsubItem=function(e){var t=this;this.withPubsubItem(function(n){t.extend(n,e)})},e.withIQ=function(e){this.withDefinition("iq",i.Namespace.CLIENT,e),this.withDefinition("iq",i.Namespace.COMPONENT,e)},e.withMessage=function(e){this.withDefinition("message",i.Namespace.CLIENT,e),this.withDefinition("message",i.Namespace.COMPONENT,e)},e.withPresence=function(e){this.withDefinition("presence",i.Namespace.CLIENT,e),this.withDefinition("presence",i.Namespace.COMPONENT,e)},e.withStreamFeatures=function(e){this.withDefinition("features",i.Namespace.STREAM,e)},e.withStanzaError=function(e){this.withDefinition("error",i.Namespace.CLIENT,e),this.withDefinition("error",i.Namespace.COMPONENT,e)},e.withDataForm=function(e){this.withDefinition("x",i.Namespace.DATAFORM,e)},e.withPubsubItem=function(e){this.withDefinition("item",i.Namespace.PUBSUB,e),this.withDefinition("item",i.Namespace.PUBSUB_EVENT,e)},e.getMessage=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("message",r[e])},e.getPresence=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("presence",r[e])},e.getIQ=function(){var e=void 0===arguments[0]?"client":arguments[0];return this.getDefinition("iq",r[e])},e.getStreamError=function(){return this.getDefinition("error",i.Namespace.STREAM)},e.getIq=e.getIQ,e.withIq=e.withIQ},e.exports=t.default},1692:function(e,t){e.exports={BIND:"urn:ietf:params:xml:ns:xmpp-bind",CLIENT:"jabber:client",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",SERVER:"jabber:server",SESSION:"urn:ietf:params:xml:ns:xmpp-session",STANZA_ERROR:"urn:ietf:params:xml:ns:xmpp-stanzas",STREAM:"http://etherx.jabber.org/streams",STREAM_ERROR:"urn:ietf:params:xml:ns:xmpp-streams",ROSTER:"jabber:iq:roster",ROSTER_VERSIONING:"urn:xmpp:features:rosterver",SUBSCRIPTION_PREAPPROVAL:"urn:xmpp:features:pre-approval",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",DATAFORM:"jabber:x:data",RPC:"jabber:iq:rpc",LAST_ACTIVITY:"jabber:iq:last",PRIVACY:"jabber:iq:privacy",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",ADDRESS:"http://jabber.org/protocol/address",MUC:"http://jabber.org/protocol/muc",MUC_ADMIN:"http://jabber.org/protocol/muc#admin",MUC_OWNER:"http://jabber.org/protocol/muc#owner",MUC_USER:"http://jabber.org/protocol/muc#user",IBB:"http://jabber.org/protocol/ibb",BOOKMARKS:"storage:bookmarks",PRIVATE:"jabber:iq:private",ADHOC_COMMANDS:"http://jabber.org/protocol/commands",VCARD_TEMP:"vcard-temp",SEARCH:"jabber:iq:search",RSM:"http://jabber.org/protocol/rsm",PUBSUB:"http://jabber.org/protocol/pubsub",PUBSUB_ERRORS:"http://jabber.org/protocol/pubsub#errors",PUBSUB_EVENT:"http://jabber.org/protocol/pubsub#event",PUBSUB_OWNER:"http://jabber.org/protocol/pubsub#owner",SOCKS5:"http://jabber.org/protocol/bytestreams",OOB_IQ:"jabber:iq:oob",OOB:"jabber:x:oob",HTTP_AUTH:"http://jabber.org/protocol/http-auth",XHTML_IM:"http://jabber.org/protocol/xhtml-im",REGISTER:"jabber:iq:register",AMP:"http://jabber.org/protocol/amp",GEOLOC:"http://jabber.org/protocol/geoloc",ROSTER_DELIMITER:"roster:delimiter",AVATAR_DATA:"urn:xmpp:avatar:data",AVATAR_METADATA:"urn:xmpp:avatar:metadata",CHAT_STATES:"http://jabber.org/protocol/chatstates",VERSION:"jabber:iq:version",MOOD:"http://jabber.org/protocol/mood",ACTIVITY:"http://jabber.org/protocol/activity",COMPONENT:"jabber:component:accept",CAPS:"http://jabber.org/protocol/caps",TUNE:"http://jabber.org/protocol/tune",DATAFORM_VALIDATION:"http://jabber.org/protocol/xdata-validate",BOSH:"http://jabber.org/protocol/httpbind",SHIM:"http://jabber.org/protocol/shim",COMPRESSION:"http://jabber.org/features/compress",DATAFORM_LAYOUT:"http://jabber.org/protocol/xdata-layout",ROSTER_EXCHANGE:"http://jabber.org/protocol/rosterx",ROSTER_NOTES:"storage:rosternotes",REACH_0:"urn:xmpp:reach:0",VCARD_TEMP_UPDATE:"vcard-temp:x:update",CAPTCHA:"urn:xmpp:captcha",JINGLE_1:"urn:xmpp:jingle:1",JINGLE_ERRORS_1:"urn:xmpp:jingle:errors:1",JINGLE_RTP_1:"urn:xmpp:jingle:apps:rtp:1",JINGLE_RTP_ERRORS_1:"urn:xmpp:jingle:apps:rtp:errors:1",JINGLE_RTP_INFO_1:"urn:xmpp:jingle:apps:rtp:info:1",LANG_TRANS:"urn:xmpp:langtrans",LANG_TRANS_ITEMS:"urn:xmpp:langtrans:items",NICK:"http://jabber.org/protocol/nick",JINGLE_ICE_UDP_1:"urn:xmpp:jingle:transports:ice-udp:1",JINGLE_RAW_UDP_1:"urn:xmpp:jingle:transports:raw-udp:1",RECEIPTS:"urn:xmpp:receipts",INVISIBLE_0:"urn:xmpp:invisible:0",BLOCKING:"urn:xmpp:blocking",SMACKS_3:"urn:xmpp:sm:3",PING:"urn:xmpp:ping",TIME:"urn:xmpp:time",DELAY:"urn:xmpp:delay",BOSH_XMPP:"urn:xmpp:xbosh",DISCO_EXTERNAL_1:"urn:xmpp:extdisco:1",DATAFORM_MEDIA:"urn:xmpp:media-element",ATTENTION_0:"urn:xmpp:attention:0",BOB:"urn:xmpp:bob",FILE_TRANSFER_3:"urn:xmpp:jingle:apps:file-transfer:3",FILE_TRANSFER_4:"urn:xmpp:jingle:apps:file-transfer:4",FILE_TRANSFER_5:"urn:xmpp:jingle:apps:file-transfer:5",MUC_DIRECT_INVITE:"jabber:x:conference",SEC_LABEL_0:"urn:xmpp:sec-label:0",SEC_LABEL_CATALOG_2:"urn:xmpp:sec-label:catalog:2",SEC_LABEL_ESS_0:"urn:xmpp:sec-label:ess:0",JINGLE_SOCKS5_1:"urn:xmpp:jingle:transports:s5b:1",JINGLE_IBB_1:"urn:xmpp:jingle:transports:ibb:1",JINGLE_RTP_ZRTP_1:"urn:xmpp:jingle:apps:rtp:zrtp:1",THUMBS_0:"urn:xmpp:thumbs:0",THUMBS_1:"urn:xmpp:thumbs:1",DECLOAKING_0:"urn:xmpp:decloaking:0",CARBONS_2:"urn:xmpp:carbons:2",JINGLE_RTP_RTCP_FB_0:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",JINGLE_RTP_HDREXT_0:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",FORWARD_0:"urn:xmpp:forward:0",HASHES_1:"urn:xmpp:hashes:1",RTT_0:"urn:xmpp:rtt:0",MUC_UNIQUE:"http://jabber.org/protocol/muc#unique",CORRECTION_0:"urn:xmpp:message-correct:0",PSA:"urn:xmpp:psa",MAM_TMP:"urn:xmpp:mam:tmp",MAM_0:"urn:xmpp:mam:0",MAM_1:"urn:xmpp:mam:1",MAM_2:"urn:xmpp:mam:2",HATS_0:"urn:xmpp:hats:0",IDLE_1:"urn:xmpp:idle:1",JINGLE_DTLS_0:"urn:xmpp:jingle:apps:dtls:0",JID_PREP_0:"urn:xmpp:jidprep:0",CHAT_MARKERS:"urn:xmpp:chat-markers:0",HINTS:"urn:xmpp:hints",JSON_0:"urn:xmpp:json:0",EVENTLOG:"urn:xmpp:eventlog",JINGLE_GROUPING_0:"urn:xmpp:jingle:apps:grouping:0",JINGLE_RTP_SSMA_0:"urn:xmpp:jingle:apps:rtp:ssma:0",COLIBRI:"http://jitsi.org/protocol/colibri",DTLS_SCTP_1:"urn:xmpp:jingle:transports:dtls-sctp:1",CSI:"urn:xmpp:csi:0",JINGLE_MSG_INITIATE_0:"urn:xmpp:jingle:jingle-message:0",PUSH_0:"urn:xmpp:push:0",JINGLE_PUB_1:"urn:xmpp:jinglepub:1",STANZA_ID_0:"urn:xmpp:sid:0",HTTP_UPLOAD_0:"urn:xmpp:http:upload:0",JINGLE_HTTP_0:"urn:xmpp:jingle:transports:http:0",JINGLE_HTTP_UPLOAD_0:"urn:xmpp:jingle:transports:http:upload:0",REFERENCE_0:"urn:xmpp:reference:0",SPOILER_0:"urn:xmppp:spoiler:0"}},1693:function(e,t){e.exports={Status:{REALJID_PUBLIC:"100",AFFILIATION_CHANGED:"101",UNAVAILABLE_SHOWN:"102",UNAVAILABLE_NOT_SHOWN:"103",CONFIGURATION_CHANGED:"104",SELF_PRESENCE:"110",LOGGING_ENABLED:"170",LOGGING_DISABLED:"171",NON_ANONYMOUS:"172",SEMI_ANONYMOUS:"173",FULLY_ANONYMOUS:"174",ROOM_CREATED:"201",NICK_ASSIGNED:"210",BANNED:"301",NEW_NICK:"303",KICKED:"307",REMOVED_AFFILIATION:"321",REMOVED_MEMBERSHIP:"322",REMOVED_SHUTDOWN:"332"},Affiliation:{ADMIN:"admin",MEMBER:"member",NONE:"none",OUTCAST:"outcast",OWNER:"owner"},Role:{MODERATOR:"moderator",NONE:"none",PARTICIPANT:"participant",VISITOR:"visitor"}}},1694:function(e,t){e.exports={Affiliation:{MEMBER:"member",NONE:"none",OUTCAST:"outcast",OWNER:"owner",PUBLISHER:"publisher",PUBLISH_ONLY:"publish-only"},Subscription:{NONE:"none",PENDING:"pending",UNCONFIGURED:"unconfigured",SUBSCRIBED:"subscribed"},AccessModel:{OPEN:"open",PRESENCE:"presence",ROSTER:"roster",AUTHORIZE:"authorize",WHITELIST:"whitelist"},Condition:{CONFLICT:"conflict"}}},1695:function(e,t){e.exports={Action:{CONTENT_ACCEPT:"content-accept",CONTENT_ADD:"content-add",CONTENT_MODIFY:"content-modify",CONTENT_REJECT:"content-reject",CONTENT_REMOVE:"content-remove",DESCRIPTION_INFO:"description-info",SECURITY_INFO:"security-info",SESSION_ACCEPT:"session-accept",SESSION_INFO:"session-info",SESSION_INITIATE:"session-initiate",SESSION_TERMINATE:"session-terminate",TRANSPORT_ACCEPT:"transport-accept",TRANSPORT_INFO:"transport-info",TRANSPORT_REJECT:"transport-reject",TRANSPORT_REPLACE:"transport-replace"},Reason:{ALTERNATIVE_SESSION:"alernative-session",BUSY:"busy",CANCEL:"cancel",CONNECTIVITY_ERROR:"connectivity-error",DECLINE:"decline",EXPIRED:"expired",FAILED_APPLICATION:"failed-application",FAILED_TRANSPORT:"failed-transport",GENERAL_ERROR:"general-error",GONE:"gone",INCOMPATIBLE_PARAMETERS:"incompatible-parameters",MEDIA_ERROR:"media-error",SECURITY_ERROR:"security-error",SUCCESS:"success",TIMEOUT:"timeout",UNSUPPORTED_APPLICATIONS:"unsupported-applications",UNSUPPORTED_TRANSPORTS:"unsupported-transports"},Condition:{OUT_OF_ORDER:"out-of-order",TIE_BREAK:"tie-break",UNKNOWN_SESSION:"unknown-session",UNSUPPORTED_INFO:"unsupported-info"}}},1696:function(e,t){e.exports={Type:{SUBSCRIBE:"subscribe",SUBSCRIBED:"subscribed",UNSUBSCRIBE:"unsubscribe",UNSUBSCRIBED:"unsubscribed",PROBE:"probe",UNAVAILABLE:"unavailable"},Show:{CHAT:"chat",AWAY:"away",DO_NOT_DISTURB:"dnd",EXTENDED_AWAY:"xa"}}},1697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1087);t.default=function(e){var t=e.utils;t.jidAttribute=function(e,n){return{get:function(){var r=new i.JID(t.getAttribute(this.xml,e));return n&&(r.prepped=!0),r},set:function(n){t.setAttribute(this.xml,e,(n||"").toString())}}},t.jidSub=function(e,n,r){return{get:function(){var o=new i.JID(t.getSubText(this.xml,e,n));return r&&(o.prepped=!0),o},set:function(i){t.setSubText(this.xml,e,n,(i||"").toString())}}},t.tzoSub=t.field(function(e,n,i,r){var o,a=-1,s=t.getSubText(e,n,i);return s?("-"===s.charAt(0)&&(a=1,s=s.slice(1)),o=s.split(":"),(60*parseInt(o[0],10)+parseInt(o[1],10))*a):r},function(e,n,i,r){var o=void 0,a=void 0,s="-";"number"==typeof r?(r<0&&(r=-r,s="+"),a=r%60,s+=((o=r/60)<10?"0":"")+o+":"+(a<10?"0":"")+a):s=r,t.setSubText(e,n,i,s)})},e.exports=t.default},1698:function(e,t,n){"use strict";var i=n(1334).default;Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1699)),o=i(n(1700)),a=i(n(1701)),s=i(n(1702)),u=i(n(1703)),c=i(n(1704)),p=i(n(1705)),f=i(n(1706)),l=i(n(1707)),d=i(n(1708)),m=i(n(1709)),h=i(n(1710)),b=i(n(1711)),g=i(n(1712)),v=i(n(1713)),y=i(n(1714)),S=i(n(1715)),x=i(n(1716)),_=i(n(1717)),N=i(n(1718)),E=i(n(1719)),A=i(n(1720)),O=i(n(1721)),j=i(n(1722)),T=i(n(1723)),I=i(n(1738)),R=i(n(1739)),w=i(n(1740)),C=i(n(1741)),M=i(n(1742)),P=i(n(1743)),D=i(n(1744)),L=i(n(1745)),k=i(n(1746)),U=i(n(1747)),B=i(n(1748)),F=i(n(1749)),q=i(n(1750)),G=i(n(1751)),J=i(n(1752)),V=i(n(1753)),H=i(n(1754)),z=i(n(1755)),X=i(n(1756)),K=i(n(1757)),W=i(n(1758)),Q=i(n(1759)),$=i(n(1760)),Y=i(n(1761)),Z=i(n(1762)),ee=i(n(1763)),te=i(n(1764)),ne=i(n(1765)),ie=i(n(1766)),re=i(n(1767)),oe=i(n(1768)),ae=i(n(1769)),se=i(n(1770)),ue=i(n(1771)),ce=i(n(1772)),pe=i(n(1773)),fe=i(n(1774)),le=i(n(1775));t.default=function(e){e.use(r.default),e.use(o.default),e.use(a.default),e.use(s.default),e.use(u.default),e.use(c.default),e.use(p.default),e.use(f.default),e.use(l.default),e.use(d.default),e.use(m.default),e.use(h.default),e.use(b.default),e.use(g.default),e.use(v.default),e.use(y.default),e.use(S.default),e.use(x.default),e.use(_.default),e.use(N.default),e.use(E.default),e.use(A.default),e.use(O.default),e.use(j.default),e.use(T.default),e.use(I.default),e.use(R.default),e.use(w.default),e.use(C.default),e.use(M.default),e.use(P.default),e.use(D.default),e.use(L.default),e.use(k.default),e.use(U.default),e.use(B.default),e.use(F.default),e.use(q.default),e.use(G.default),e.use(J.default),e.use(V.default),e.use(H.default),e.use(z.default),e.use(X.default),e.use(K.default),e.use(W.default),e.use(Q.default),e.use($.default),e.use(Y.default),e.use(Z.default),e.use(ee.default),e.use(te.default),e.use(ne.default),e.use(ie.default),e.use(re.default),e.use(oe.default),e.use(ae.default),e.use(se.default),e.use(ue.default),e.use(ce.default),e.use(pe.default),e.use(fe.default),e.use(le.default)},e.exports=t.default},1699:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"_address",namespace:i.Namespace.ADDRESS,element:"address",fields:{jid:t.jidAttribute("jid"),uri:t.attribute("uri"),node:t.attribute("node"),description:t.attribute("desc"),delivered:t.boolAttribute("delivered"),type:t.attribute("type")}}),r=t.subMultiExtension(i.Namespace.ADDRESS,"addresses",n);e.withMessage(function(t){e.add(t,"addresses",r)}),e.withPresence(function(t){e.add(t,"addresses",r)})},e.exports=t.default},1700:function(e,t,n){"use strict";var i=n(1334).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(1046),o=i(n(1191));t.default=function(e){var t=e.utils,n=e.define({name:"avatar",namespace:r.Namespace.AVATAR_METADATA,element:"info",fields:{id:t.attribute("id"),bytes:t.attribute("bytes"),height:t.attribute("height"),width:t.attribute("width"),type:t.attribute("type","image/png"),url:t.attribute("url")}}),i={get:function(){var e=t.find(this.xml,r.Namespace.AVATAR_METADATA,"metadata"),i=[];if(e.length){var a=t.find(e[0],r.Namespace.AVATAR_METADATA,"info");(0,o.default)(a,function(e){i.push(new n({},e))})}return i},set:function(e){var i=t.findOrCreate(this.xml,r.Namespace.AVATAR_METADATA,"metadata");t.setAttribute(i,"xmlns",r.Namespace.AVATAR_METADATA),(0,o.default)(e,function(e){var t=new n(e);i.appendChild(t.xml)})}};e.withPubsubItem(function(n){e.add(n,"avatars",i),e.add(n,"avatarData",t.textSub(r.Namespace.AVATAR_DATA,"data"))})},e.exports=t.default},1701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"bind",namespace:i.Namespace.BIND,element:"bind",fields:{resource:t.textSub(i.Namespace.BIND,"resource"),jid:t.jidSub(i.Namespace.BIND,"jid")}});e.extendIQ(n),e.extendStreamFeatures(n)},e.exports=t.default},1702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=n(1087);t.default=function(e){var t=e.utils,n={get:function(){var e=[],n=t.find(this.xml,i.Namespace.BLOCKING,"item");return n.length?(n.forEach(function(n){e.push(new r.JID(t.getAttribute(n,"jid","")))}),e):e},set:function(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.BLOCKING,"item",i.Namespace.BLOCKING);t.setAttribute(r,"jid",e.toString()),n.xml.appendChild(r)})}},o=e.define({name:"block",namespace:i.Namespace.BLOCKING,element:"block",fields:{jids:n}}),a=e.define({name:"unblock",namespace:i.Namespace.BLOCKING,element:"unblock",fields:{jids:n}}),s=e.define({name:"blockList",namespace:i.Namespace.BLOCKING,element:"blocklist",fields:{jids:n}});e.extendIQ(o),e.extendIQ(a),e.extendIQ(s)},e.exports=t.default},1703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"bob",namespace:i.Namespace.BOB,element:"data",fields:{cid:t.attribute("cid"),maxAge:t.numberAttribute("max-age"),type:t.attribute("type"),data:t.text()}});e.extendIQ(n),e.extendMessage(n),e.extendPresence(n)},e.exports=t.default},1704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"_conference",namespace:i.Namespace.BOOKMARKS,element:"conference",fields:{name:t.attribute("name"),autoJoin:t.boolAttribute("autojoin"),jid:t.jidAttribute("jid"),nick:t.textSub(i.Namespace.BOOKMARKS,"nick")}}),r=e.define({name:"bookmarks",namespace:i.Namespace.BOOKMARKS,element:"storage"});e.extend(r,n,"conferences"),e.withDefinition("query",i.Namespace.PRIVATE,function(t){e.extend(t,r)})},e.exports=t.default},1705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils;e.define({name:"bosh",namespace:i.Namespace.BOSH,element:"body",prefixes:{xmpp:i.Namespace.BOSH_XMPP},fields:{accept:t.attribute("accept"),ack:t.numberAttribute("ack"),authid:t.attribute("authid"),charsets:t.attribute("charsets"),condition:t.attribute("condition"),content:t.attribute("content"),from:t.jidAttribute("from",!0),hold:t.numberAttribute("hold"),inactivity:t.numberAttribute("inactivity"),key:t.attribute("key"),maxpause:t.numberAttribute("maxpause"),newKey:t.attribute("newkey"),pause:t.numberAttribute("pause"),polling:t.numberAttribute("polling"),resport:t.numberAttribute("report"),requests:t.numberAttribute("requests"),rid:t.numberAttribute("rid"),sid:t.attribute("sid"),stream:t.attribute("stream"),time:t.attribute("time"),to:t.jidAttribute("to",!0),type:t.attribute("type"),ver:t.attribute("ver"),wait:t.numberAttribute("wait"),uri:t.textSub(i.Namespace.BOSH,"uri"),lang:t.langAttribute(),version:t.attribute("xmpp:version","1.0"),restart:t.attribute("xmpp:restart"),restartLogic:t.boolAttribute("xmpp:restartLogic"),payload:{get:function(){for(var t=[],n=0,i=this.xml.childNodes.length;n<i;n++){var r=e.build(this.xml.childNodes[n]);void 0!==r&&t.push(r)}return t},set:function(e){var t=this;e.forEach(function(e){t.xml.appendChild(e.xml)})}}}})},e.exports=t.default},1706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"carbonSent",eventName:"carbon:sent",namespace:i.Namespace.CARBONS_2,element:"sent"}),n=e.define({name:"carbonReceived",eventName:"carbon:received",namespace:i.Namespace.CARBONS_2,element:"received"}),r=e.define({name:"carbonPrivate",eventName:"carbon:private",namespace:i.Namespace.CARBONS_2,element:"private"}),o=e.define({name:"enableCarbons",namespace:i.Namespace.CARBONS_2,element:"enable"}),a=e.define({name:"disableCarbons",namespace:i.Namespace.CARBONS_2,element:"disable"});e.withDefinition("forwarded",i.Namespace.FORWARD_0,function(i){e.extend(t,i),e.extend(n,i)}),e.extendMessage(t),e.extendMessage(n),e.extendMessage(r),e.extendIQ(o),e.extendIQ(a)},e.exports=t.default},1707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["next","prev","complete","cancel"],o=["bad-action","bad-locale","bad-payload","bad-sessionid","malformed-action","session-expired"];t.default=function(e){var t=e.utils,n=e.define({name:"command",namespace:i.Namespace.ADHOC_COMMANDS,element:"command",fields:{action:t.attribute("action"),node:t.attribute("node"),sessionid:t.attribute("sessionid"),status:t.attribute("status"),execute:t.subAttribute(i.Namespace.ADHOC_COMMANDS,"actions","execute"),actions:{get:function(){var e=[],n=t.find(this.xml,i.Namespace.ADHOC_COMMANDS,"actions");return n.length?(r.forEach(function(r){t.find(n[0],i.Namespace.ADHOC_COMMANDS,r).length&&e.push(r)}),e):[]},set:function(e){for(var n=t.findOrCreate(this.xml,i.Namespace.ADHOC_COMMANDS,"actions"),r=0,o=n.childNodes.length;r<o;r++)n.removeChild(n.childNodes[r]);e.forEach(function(e){n.appendChild(t.createElement(i.Namespace.ADHOC_COMMANDS,e.toLowerCase(),i.Namespace.ADHOC_COMMANDS))})}}}}),a=e.define({name:"_commandNote",namespace:i.Namespace.ADHOC_COMMANDS,element:"note",fields:{type:t.attribute("type"),value:t.text()}});e.extend(n,a,"notes"),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"adhocCommandCondition",t.enumSub(i.Namespace.ADHOC_COMMANDS,o))}),e.withDataForm(function(t){e.extend(n,t)})},e.exports=t.default},1708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"clientStateIndication",namespace:i.Namespace.CSI,element:"csi"});e.define({name:"csiActive",eventName:"csi:active",namespace:i.Namespace.CSI,element:"active",topLevel:!0}),e.define({name:"csiInactive",eventName:"csi:inactive",namespace:i.Namespace.CSI,element:"inactive",topLevel:!0}),e.extendStreamFeatures(t)},e.exports=t.default},1709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=n(1087),o=["text-single","text-private","list-single","jid-single"];t.default=function(e){var t=e.utils,n=e.define({name:"_field",namespace:i.Namespace.DATAFORM,element:"field",init:function(e){this._type=(e||{}).type||this.type},fields:{type:{get:function(){return t.getAttribute(this.xml,"type","text-single")},set:function(e){this._type=e,t.setAttribute(this.xml,"type",e)}},name:t.attribute("var"),desc:t.textSub(i.Namespace.DATAFORM,"desc"),required:t.boolSub(i.Namespace.DATAFORM,"required"),label:t.attribute("label"),value:{get:function(){var e=t.getMultiSubText(this.xml,i.Namespace.DATAFORM,"value");return"boolean"===this._type?"1"===e[0]||"true"===e[0]:e.length>1?"text-multi"===this._type?e.join("\n"):"jid-multi"===this._type?e.map(function(e){return new r.JID(e)}):e:o.indexOf(this._type)>=0?"jid-single"===this._type?new r.JID(e[0]):e[0]:e},set:function(e){if("boolean"===this._type||!0===e||!1===e){var n=!0===e||"true"===e||"1"===e,r=t.createElement(i.Namespace.DATAFORM,"value",i.Namespace.DATAFORM);r.textContent=n?"1":"0",this.xml.appendChild(r)}else"text-multi"===this._type&&"string"==typeof e&&(e=e.split("\n")),t.setMultiSubText(this.xml,i.Namespace.DATAFORM,"value",e,function(e){var n=t.createElement(i.Namespace.DATAFORM,"value",i.Namespace.DATAFORM);n.textContent=e,this.xml.appendChild(n)}.bind(this))}}}}),a=e.define({name:"_formoption",namespace:i.Namespace.DATAFORM,element:"option",fields:{label:t.attribute("label"),value:t.textSub(i.Namespace.DATAFORM,"value")}}),s=e.define({name:"_formitem",namespace:i.Namespace.DATAFORM,element:"item"}),u=e.define({name:"media",element:"media",namespace:i.Namespace.DATAFORM_MEDIA,fields:{height:t.numberAttribute("height"),width:t.numberAttribute("width")}}),c=e.define({name:"_mediaURI",element:"uri",namespace:i.Namespace.DATAFORM_MEDIA,fields:{uri:t.text(),type:t.attribute("type")}}),p=e.define({name:"validation",element:"validate",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{dataType:t.attribute("datatype"),basic:t.boolSub(i.Namespace.DATAFORM_VALIDATION,"basic"),open:t.boolSub(i.Namespace.DATAFORM_VALIDATION,"open"),regex:t.textSub(i.Namespace.DATAFORM_VALIDATION,"regex")}}),f=e.define({name:"range",element:"range",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{min:t.attribute("min"),max:t.attribute("max")}}),l=e.define({name:"select",element:"list-range",namespace:i.Namespace.DATAFORM_VALIDATION,fields:{min:t.numberAttribute("min"),max:t.numberAttribute("max")}}),d={get:function(){for(var e=[],t=0,n=this.xml.childNodes.length;t<n;t++){var r=this.xml.childNodes[t];if(r.namespaceURI===i.Namespace.DATAFORM_LAYOUT)switch(r.localName){case"text":e.push({text:r.textContent});break;case"fieldref":e.push({field:r.getAttribute("var")});break;case"reportedref":e.push({reported:!0});break;case"section":e.push({section:new m(null,r,this).toJSON()})}}return e},set:function(e){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(o.text){var a=t.createElement(i.Namespace.DATAFORM_LAYOUT,"text",i.Namespace.DATAFORM_LAYOUT);a.textContent=o.text,this.xml.appendChild(a)}if(o.field){var s=t.createElement(i.Namespace.DATAFORM_LAYOUT,"fieldref",i.Namespace.DATAFORM_LAYOUT);s.setAttribute("var",o.field),this.xml.appendChild(s)}if(o.reported&&this.xml.appendChild(t.createElement(i.Namespace.DATAFORM_LAYOUT,"reportedref",i.Namespace.DATAFORM_LAYOUT)),o.section){var u=t.createElement(i.Namespace.DATAFORM_LAYOUT,"section",i.Namespace.DATAFORM_LAYOUT);this.xml.appendChild(u);var c=new m(null,u);c.label=o.section.label,c.contents=o.section.contents}}}},m=e.define({name:"_section",element:"section",namespace:i.Namespace.DATAFORM_LAYOUT,fields:{label:t.attribute("label"),contents:d}}),h=e.define({name:"_page",element:"page",namespace:i.Namespace.DATAFORM_LAYOUT,fields:{label:t.attribute("label"),contents:d}}),b=e.define({name:"form",namespace:i.Namespace.DATAFORM,element:"x",init:function(){if(this.reportedFields.length){var e={};this.reportedFields.forEach(function(t){e[t.name]=t.type}),this.items.forEach(function(t){t.fields.forEach(function(t){t.type=t._type=e[t.name]})})}},fields:{title:t.textSub(i.Namespace.DATAFORM,"title"),instructions:t.multiTextSub(i.Namespace.DATAFORM,"instructions"),type:t.attribute("type","form"),reportedFields:t.subMultiExtension(i.Namespace.DATAFORM,"reported",n)}});e.extend(b,n,"fields"),e.extend(b,s,"items"),e.extend(b,h,"layout"),e.extend(n,u),e.extend(n,p),e.extend(n,a,"options"),e.extend(s,n,"fields"),e.extend(u,c,"uris"),e.extend(p,f),e.extend(p,l),e.extendMessage(b)},e.exports=t.default},1710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"delay",namespace:i.Namespace.DELAY,element:"delay",fields:{from:t.jidAttribute("from"),stamp:t.dateAttribute("stamp"),reason:t.text()}});e.extendMessage(n),e.extendPresence(n)},e.exports=t.default},1711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"caps",namespace:i.Namespace.CAPS,element:"c",fields:{ver:t.attribute("ver"),node:t.attribute("node"),hash:t.attribute("hash"),ext:t.attribute("ext")}}),r=e.define({name:"discoInfo",namespace:i.Namespace.DISCO_INFO,element:"query",fields:{node:t.attribute("node"),features:t.multiSubAttribute(i.Namespace.DISCO_INFO,"feature","var")}}),o=e.define({name:"_discoIdentity",namespace:i.Namespace.DISCO_INFO,element:"identity",fields:{category:t.attribute("category"),type:t.attribute("type"),name:t.attribute("name"),lang:t.langAttribute()}}),a=e.define({name:"discoItems",namespace:i.Namespace.DISCO_ITEMS,element:"query",fields:{node:t.attribute("node")}}),s=e.define({name:"_discoItem",namespace:i.Namespace.DISCO_ITEMS,element:"item",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node"),name:t.attribute("name")}});e.extend(a,s,"items"),e.extend(r,o,"identities"),e.extendIQ(r),e.extendIQ(a),e.extendPresence(n),e.extendStreamFeatures(n),e.withDataForm(function(t){e.extend(r,t,"extensions")}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(a,t)})},e.exports=t.default},1712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"];t.default=function(e){var t=e.utils,n=e.define({name:"error",namespace:i.Namespace.CLIENT,element:"error",fields:{lang:{get:function(){return(this.parent||{}).lang||""}},condition:t.enumSub(i.Namespace.STANZA_ERROR,r),gone:{get:function(){return t.getSubText(this.xml,i.Namespace.STANZA_ERROR,"gone")},set:function(e){this.condition="gone",t.setSubText(this.xml,i.Namespace.STANZA_ERROR,"gone",e)}},redirect:{get:function(){return t.getSubText(this.xml,i.Namespace.STANZA_ERROR,"redirect")},set:function(e){this.condition="redirect",t.setSubText(this.xml,i.Namespace.STANZA_ERROR,"redirect",e)}},code:t.attribute("code"),type:t.attribute("type"),by:t.jidAttribute("by"),$text:{get:function(){return t.getSubLangText(this.xml,i.Namespace.STANZA_ERROR,"text",this.lang)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,i.Namespace.STANZA_ERROR,"text",e,this.lang)}}}});e.extendMessage(n),e.extendPresence(n),e.extendIQ(n)},e.exports=t.default},1713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var n=e.utils,r=t.Services=e.define({name:"services",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"services",fields:{type:n.attribute("type")}}),o=t.Credentials=e.define({name:"credentials",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"credentials"}),a=e.define({name:"service",namespace:i.Namespace.DISCO_EXTERNAL_1,element:"service",fields:{host:n.attribute("host"),port:n.attribute("port"),transport:n.attribute("transport"),type:n.attribute("type"),username:n.attribute("username"),password:n.attribute("password")}});e.extend(r,a,"services"),e.extend(o,a),e.extendIQ(r),e.extendIQ(o),e.withDataForm(function(t){e.extend(a,t)})},e.exports=t.default},1714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=i.Namespace.FILE_TRANSFER_4;t.default=function(e){var t=e.utils,n=e.define({name:"file",namespace:r,element:"file",fields:{name:t.textSub(r,"name"),description:t.textSub(r,"desc"),mediaType:t.textSub(r,"media-type"),size:t.numberSub(r,"size"),date:t.dateSub(r,"date")}}),o=e.define({name:"range",namespace:r,element:"range",fields:{offset:t.numberAttribute("offset"),length:t.numberAttribute("length")}}),a=e.define({name:"_"+r,namespace:r,element:"description",tags:["jingle-application"],fields:{applicationType:{value:r,writable:!0}}}),s=e.define({name:"_{"+r+"}received",namespace:r,element:"received",tags:["jingle-info"],fields:{infoType:{value:"{"+r+"}received"},creator:t.attribute("creator"),name:t.attribute("name")}}),u=e.define({name:"_{"+r+"}checksum",namespace:r,element:"checksum",tags:["jingle-info"],fields:{infoType:{value:"{"+r+"}checksum"},creator:t.attribute("creator"),name:t.attribute("name")}});e.extend(n,o),e.extend(u,n),e.extend(a,n),e.withDefinition("hash",i.Namespace.HASHES_1,function(t){e.extend(n,t,"hashes"),e.extend(o,t,"hashes")}),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,a)}),e.withDefinition("jingle",i.Namespace.JINGLE_1,function(t){e.extend(t,s),e.extend(t,u)})},e.exports=t.default},1715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=i.Namespace.FILE_TRANSFER_3;t.default=function(e){var t=e.utils,n=e.define({name:"_file",namespace:r,element:"file",fields:{name:t.textSub(r,"name"),desc:t.textSub(r,"desc"),size:t.numberSub(r,"size"),date:t.dateSub(r,"date")}}),o=e.define({name:"range",namespace:r,element:"range",fields:{offset:t.numberAttribute("offset")}}),a=e.define({name:"thumbnail",namespace:i.Namespace.THUMBS_0,element:"thumbnail",fields:{cid:t.attribute("cid"),mimeType:t.attribute("mime-type"),width:t.numberAttribute("width"),height:t.numberAttribute("height")}}),s=e.define({name:"_filetransfer",namespace:r,element:"description",tags:["jingle-application"],fields:{applicationType:{value:"filetransfer"},offer:t.subExtension("offer",r,"offer",n),request:t.subExtension("request",r,"request",n)}});e.extend(n,o),e.extend(n,a),e.withDefinition("hash",i.Namespace.HASHES_1,function(t){e.extend(n,t,"hashes")}),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,s)})},e.exports=t.default},1716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"forwarded",namespace:i.Namespace.FORWARD_0,element:"forwarded"});e.withMessage(function(n){e.extend(n,t),e.extend(t,n)}),e.withPresence(function(n){e.extend(n,t),e.extend(t,n)}),e.withIQ(function(n){e.extend(n,t),e.extend(t,n)}),e.withDefinition("delay",i.Namespace.DELAY,function(n){e.extend(t,n)})},e.exports=t.default},1717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils;e.define({name:"openStream",namespace:i.Namespace.FRAMING,element:"open",topLevel:!0,fields:{lang:t.langAttribute(),id:t.attribute("id"),version:t.attribute("version","1.0"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0)}}),e.define({name:"closeStream",namespace:i.Namespace.FRAMING,element:"close",topLevel:!0,fields:{seeOtherURI:t.attribute("see-other-uri")}})},e.exports=t.default},1718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"geoloc",namespace:i.Namespace.GEOLOC,element:"geoloc",fields:{accuracy:t.numberSub(i.Namespace.GEOLOC,"accuracy",!0),altitude:t.numberSub(i.Namespace.GEOLOC,"alt",!0),area:t.textSub(i.Namespace.GEOLOC,"area"),heading:t.numberSub(i.Namespace.GEOLOC,"bearing",!0),bearing:t.numberSub(i.Namespace.GEOLOC,"bearing",!0),building:t.textSub(i.Namespace.GEOLOC,"building"),country:t.textSub(i.Namespace.GEOLOC,"country"),countrycode:t.textSub(i.Namespace.GEOLOC,"countrycode"),datum:t.textSub(i.Namespace.GEOLOC,"datum"),description:t.textSub(i.Namespace.GEOLOC,"description"),error:t.numberSub(i.Namespace.GEOLOC,"error",!0),floor:t.textSub(i.Namespace.GEOLOC,"floor"),latitude:t.numberSub(i.Namespace.GEOLOC,"lat",!0),locality:t.textSub(i.Namespace.GEOLOC,"locality"),longitude:t.numberSub(i.Namespace.GEOLOC,"lon",!0),postalcode:t.textSub(i.Namespace.GEOLOC,"postalcode"),region:t.textSub(i.Namespace.GEOLOC,"region"),room:t.textSub(i.Namespace.GEOLOC,"room"),speed:t.numberSub(i.Namespace.GEOLOC,"speed",!0),street:t.textSub(i.Namespace.GEOLOC,"street"),text:t.textSub(i.Namespace.GEOLOC,"text"),timestamp:t.dateSub(i.Namespace.GEOLOC,"timestamp"),tzo:t.tzoSub(i.Namespace.GEOLOC,"tzo"),uri:t.textSub(i.Namespace.GEOLOC,"uri")}});e.extendPubsubItem(n)},e.exports=t.default},1719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){e.define({name:"hash",namespace:i.Namespace.HASHES_1,element:"hash",fields:{algo:e.utils.attribute("algo"),value:e.utils.text()}})},e.exports=t.default},1720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"_hat",namespace:i.Namespace.HATS_0,element:"hat",fields:{lang:e.utils.langAttribute(),name:e.utils.attribute("name"),displayName:e.utils.attribute("displayName")}});e.withPresence(function(n){e.add(n,"hats",e.utils.subMultiExtension(i.Namespace.HATS_0,"hats",t))})},e.exports=t.default},1721:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"_iceUdp",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"transport",tags:["jingle-transport"],fields:{transportType:{value:"iceUdp",writable:!0},pwd:t.attribute("pwd"),ufrag:t.attribute("ufrag")}}),r=e.define({name:"remoteCandidate",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"remote-candidate",fields:{component:t.attribute("component"),ip:t.attribute("ip"),port:t.attribute("port")}}),o=e.define({name:"_iceUdpCandidate",namespace:i.Namespace.JINGLE_ICE_UDP_1,element:"candidate",fields:{component:t.attribute("component"),foundation:t.attribute("foundation"),generation:t.attribute("generation"),id:t.attribute("id"),ip:t.attribute("ip"),network:t.attribute("network"),port:t.attribute("port"),priority:t.attribute("priority"),protocol:t.attribute("protocol"),relAddr:t.attribute("rel-addr"),relPort:t.attribute("rel-port"),tcpType:t.attribute("tcptype"),type:t.attribute("type")}}),a=e.define({name:"_iceFingerprint",namespace:i.Namespace.JINGLE_DTLS_0,element:"fingerprint",fields:{hash:t.attribute("hash"),setup:t.attribute("setup"),value:t.text(),required:t.boolAttribute("required")}}),s=e.define({name:"_sctpMap",namespace:i.Namespace.DTLS_SCTP_1,element:"sctpmap",fields:{number:t.attribute("number"),protocol:t.attribute("protocol"),streams:t.attribute("streams")}});e.extend(n,o,"candidates"),e.extend(n,r),e.extend(n,a,"fingerprints"),e.extend(n,s,"sctp"),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,n)})},e.exports=t.default},1722:function(e,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1046),o="http://jabber.org/protocol/ibb",a="urn:xmpp:jingle:transports:ibb:1";t.default=function(e){var t=e.utils,n={get:function(){var e=t.find(this.xml,o,"data");if(e.length)return e=e[0],{action:"data",sid:t.getAttribute(e,"sid"),seq:parseInt(t.getAttribute(e,"seq")||"0",10),data:new i(t.getText(e),"base64")};var n=t.find(this.xml,o,"open");if(n.length){n=n[0];var r=t.getAttribute(n,"stanza");return r="message"!==r,{action:"open",sid:t.getAttribute(n,"sid"),blockSize:t.getAttribute(n,"block-size"),ack:r}}var a=t.find(this.xml,o,"close");return a.length?{action:"close",sid:t.getAttribute(a[0],"sid")}:void 0},set:function(e){if("data"===e.action){var n=t.createElement(o,"data");t.setAttribute(n,"sid",e.sid),t.setAttribute(n,"seq",e.seq.toString()),t.setText(n,e.data.toString("base64")),this.xml.appendChild(n)}if("open"===e.action){var i=t.createElement(o,"open");t.setAttribute(i,"sid",e.sid),t.setAttribute(i,"block-size",(e.blockSize||"4096").toString()),!1===e.ack?t.setAttribute(i,"stanza","message"):t.setAttribute(i,"stanza","iq"),this.xml.appendChild(i)}if("close"===e.action){var r=t.createElement(o,"close");t.setAttribute(r,"sid",e.sid),this.xml.appendChild(r)}}},s=e.define({name:"_"+a,namespace:a,element:"transport",tags:["jingle-transport"],fields:{transportType:{value:a,writable:!0},sid:t.attribute("sid"),blockSize:t.numberAttribute("block-size"),ack:{get:function(){return"message"!==t.getAttribute(this.xml,"stanza")},set:function(e){!1===e.ack?t.setAttribute(this.xml,"stanza","message"):t.setAttribute(this.xml,"stanza","iq")}}}});e.withDefinition("content",r.Namespace.JINGLE_1,function(t){e.extend(t,s)}),e.withIQ(function(t){e.add(t,"ibb",n)}),e.withMessage(function(t){e.add(t,"ibb",n)})},e.exports=t.default}).call(this,n(1053).Buffer)},1723:function(e,t,n){"use strict";var i=n(1724).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(1046),o={defineIQ:function(e,t,n){var r=e.utils,o=e.define({name:t,namespace:n,element:"iq",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),type:r.attribute("type")}}),a=o.prototype.toJSON;i(o.prototype,{toJSON:function(){var e=a.call(this);return e.resultReply=this.resultReply,e.errorReply=this.errorReply,e},resultReply:function(e){return(e=e||{}).to=this.from,e.id=this.id,e.type="result",new o(e)},errorReply:function(e){return(e=e||{}).to=this.from,e.id=this.id,e.type="error",new o(e)}})}};t.default=function(e){o.defineIQ(e,"iq",r.Namespace.CLIENT),o.defineIQ(e,"serverIQ",r.Namespace.SERVER),o.defineIQ(e,"componentIQ",r.Namespace.COMPONENT)},e.exports=t.default},1724:function(e,t,n){e.exports={default:n(1725),__esModule:!0}},1725:function(e,t,n){n(1726),e.exports=n(1474).Object.assign},1726:function(e,t,n){var i=n(1727);i(i.S+i.F,"Object",{assign:n(1731)})},1727:function(e,t,n){var i=n(1728),r=n(1474),o=n(1729),a=function(e,t,n){var s,u,c,p=e&a.F,f=e&a.G,l=e&a.S,d=e&a.P,m=e&a.B,h=e&a.W,b=f?r:r[t]||(r[t]={}),g=f?i:l?i[t]:(i[t]||{}).prototype;for(s in f&&(n=t),n)(u=!p&&g&&s in g)&&s in b||(c=u?g[s]:n[s],b[s]=f&&"function"!=typeof g[s]?n[s]:m&&u?o(c,i):h&&g[s]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((b.prototype||(b.prototype={}))[s]=c))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,e.exports=a},1728:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},1729:function(e,t,n){var i=n(1730);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},1730:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1731:function(e,t,n){var i=n(1732),r=n(1733),o=n(1735);e.exports=n(1737)(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=r(e),a=arguments,s=a.length,u=1,c=i.getKeys,p=i.getSymbols,f=i.isEnum;s>u;)for(var l,d=o(a[u++]),m=p?c(d).concat(p(d)):c(d),h=m.length,b=0;h>b;)f.call(d,l=m[b++])&&(n[l]=d[l]);return n}:Object.assign},1732:function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},1733:function(e,t,n){var i=n(1734);e.exports=function(e){return Object(i(e))}},1734:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},1735:function(e,t,n){var i=n(1736);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},1736:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},1737:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},1738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=n(1087);t.default=function(e){e.withIQ(function(t){e.add(t,"jidPrep",{get:function(){var t=e.utils.getSubText(this.xml,i.Namespace.JID_PREP_0,"jid");if(t){var n=new r.JID(t);return n.prepped=!0,n}},set:function(t){e.utils.setSubText(this.xml,i.Namespace.JID_PREP_0,"jid",(t||"").toString())}})})},e.exports=t.default},1739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["out-of-order","tie-break","unknown-session","unsupported-info"],o=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"];t.default=function(e){var t=e.utils,n=e.define({name:"jingle",namespace:i.Namespace.JINGLE_1,element:"jingle",fields:{action:t.attribute("action"),initiator:t.attribute("initiator"),responder:t.attribute("responder"),sid:t.attribute("sid"),info:{get:function(){for(var n=e.tagged("jingle-info").map(function(e){return e.prototype._name}),i=0,r=n.length;i<r;i++)if(this._extensions[n[i]])return this._extensions[n[i]];if("session-info"===t.getAttribute(this.xml,"action"))return 0===this.xml.children.length?{infoType:"ping"}:{infoType:"unknown"}},set:function(e){"ping"!==e.infoType&&(this["_"+e.infoType]=e)}}}}),a=e.define({name:"_jingleContent",namespace:i.Namespace.JINGLE_1,element:"content",fields:{creator:t.attribute("creator"),disposition:t.attribute("disposition","session"),name:t.attribute("name"),senders:t.attribute("senders","both"),application:{get:function(){for(var t=e.tagged("jingle-application").map(function(e){return e.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function(e){this["_"+e.applicationType]=e}},transport:{get:function(){for(var t=e.tagged("jingle-transport").map(function(e){return e.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function(e){this["_"+e.transportType]=e}},security:{get:function(){for(var t=e.tagged("jingle-security").map(function(e){return Security.prototype._name}),n=0,i=t.length;n<i;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function(e){this["_"+e.securityType]=e}}}}),s=e.define({name:"reason",namespace:i.Namespace.JINGLE_1,element:"reason",fields:{condition:t.enumSub(i.Namespace.JINGLE_1,o),alternativeSession:{get:function(){return t.getSubText(this.xml,i.Namespace.JINGLE_1,"alternative-session")},set:function(e){this.condition="alternative-session",t.setSubText(this.xml,i.Namespace.JINGLE_1,"alternative-session",e)}},text:t.textSub(i.Namespace.JINGLE_1,"text")}});e.extend(n,a,"contents"),e.extend(n,s),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"jingleCondition",t.enumSub(i.Namespace.JINGLE_ERRORS_1,r))})},e.exports=t.default},1740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t={get:function(){var t=e.utils.getSubText(this.xml,i.Namespace.JSON_0,"json");if(t)return JSON.parse(t)},set:function(t){(t=JSON.stringify(t))&&e.utils.setSubText(this.xml,i.Namespace.JSON_0,"json",t)}};e.withMessage(function(n){e.add(n,"json",t)}),e.withPubsubItem(function(n){e.add(n,"json",t)})},e.exports=t.default},1741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"log",namespace:i.Namespace.EVENTLOG,element:"log",fields:{id:t.attribute("id"),timestamp:t.dateAttribute("timestamp"),type:t.attribute("type"),level:t.attribute("level"),object:t.attribute("object"),subject:t.attribute("subject"),facility:t.attribute("facility"),module:t.attribute("module"),message:t.textSub(i.Namespace.EVENTLOG,"message"),stackTrace:t.textSub(i.Namespace.EVENTLOG,"stackTrace")}}),r=e.define({name:"_logtag",namespace:i.Namespace.EVENTLOG,element:"tag",fields:{name:t.attribute("name"),value:t.attribute("value"),type:t.attribute("type")}});e.extend(n,r,"tags"),e.extendMessage(n),e.extendPubsubItem(n)},e.exports=t.default},1742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=n(1087);t.default=function(e){var t=e.utils,n=e.define({name:"mam",namespace:i.Namespace.MAM_2,element:"query",fields:{queryid:t.attribute("queryid"),node:t.attribute("node")}}),o=e.define({name:"mamItem",namespace:i.Namespace.MAM_2,element:"result",fields:{queryid:t.attribute("queryid"),id:t.attribute("id")}}),a=e.define({name:"mamResult",namespace:i.Namespace.MAM_2,element:"fin",fields:{complete:t.boolAttribute("complete"),stable:t.boolAttribute("stable")}}),s=e.define({name:"mamPrefs",namespace:i.Namespace.MAM_2,element:"prefs",fields:{defaultCondition:t.attribute("default"),always:{get:function(){var e=[],n=t.find(this.xml,i.Namespace.MAM_2,"always");return 0===n.length?e:(n=n[0],t.getMultiSubText(n,i.Namespace.MAM_2,"jid").forEach(function(t){e.push(new r.JID(t.textContent))}),e)},set:function(e){if(e.length>0){var n=t.findOrCreate(this.xml,i.Namespace.MAM_2,"always");t.setMultiSubText(n,i.Namespace.MAM_2,"jid",e)}}},never:{get:function(){var e=[],n=t.find(this.xml,i.Namespace.MAM_2,"always");return 0===n.length?e:(n=n[0],t.getMultiSubText(n,i.Namespace.MAM_2,"jid").forEach(function(t){e.push(new r.JID(t.textContent))}),e)},set:function(e){if(e.length>0){var n=t.findOrCreate(this.xml,i.Namespace.MAM_2,"never");t.setMultiSubText(n,i.Namespace.MAM_2,"jid",e)}}}}});e.extendMessage(o),e.extendIQ(n),e.extendIQ(s),e.extendIQ(a),e.withDataForm(function(t){e.extend(n,t)}),e.withDefinition("forwarded",i.Namespace.FORWARD_0,function(t){e.extend(o,t)}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(n,t),e.extend(a,t)})},e.exports=t.default},1743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r={defineMessage:function(e,t,n){var r=e.utils;e.define({name:t,namespace:n,element:"message",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),type:r.attribute("type","normal"),thread:r.textSub(n,"thread"),parentThread:r.subAttribute(n,"thread","parent"),subject:r.textSub(n,"subject"),$body:{get:function(){return r.getSubLangText(this.xml,n,"body",this.lang)}},body:{get:function(){return this.$body[this.lang]||""},set:function(e){r.setSubLangText(this.xml,n,"body",e,this.lang)}},attention:r.boolSub(i.Namespace.ATTENTION_0,"attention"),chatState:r.enumSub(i.Namespace.CHAT_STATES,["active","composing","paused","inactive","gone"]),replace:r.subAttribute(i.Namespace.CORRECTION_0,"replace","id"),requestReceipt:r.boolSub(i.Namespace.RECEIPTS,"request"),receipt:r.subAttribute(i.Namespace.RECEIPTS,"received","id")}})}};t.default=function(e){r.defineMessage(e,"message",i.Namespace.CLIENT),r.defineMessage(e,"serverMessage",i.Namespace.SERVER),r.defineMessage(e,"componentMessage",i.Namespace.COMPONENT)},e.exports=t.default},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["afraid","amazed","amorous","angry","annoyed","anxious","aroused","ashamed","bored","brave","calm","cautious","cold","confident","confused","contemplative","contented","cranky","crazy","creative","curious","dejected","depressed","disappointed","disgusted","dismayed","distracted","embarrassed","envious","excited","flirtatious","frustrated","grateful","grieving","grumpy","guilty","happy","hopeful","hot","humbled","humiliated","hungry","hurt","impressed","in_awe","in_love","indignant","interested","intoxicated","invincible","jealous","lonely","lucky","mean","moody","nervous","neutral","offended","outraged","playful","proud","relaxed","relieved","remorseful","restless","sad","sarcastic","serious","shocked","shy","sick","sleepy","spontaneous","stressed","strong","surprised","thankful","thirsty","tired","undefined","weak","worried"];t.default=function(e){var t=e.define({name:"mood",namespace:i.Namespace.MOOD,element:"mood",fields:{text:e.utils.textSub(i.Namespace.MOOD,"text"),value:e.utils.enumSub(i.Namespace.MOOD,r)}});e.extendMessage(t),e.extendPubsubItem(t)},e.exports=t.default},1745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);function r(e,t){return{get:function(){if(this._extensions[e])return this[e][t]},set:function(n){this[e][t]=n}}}t.default=function(e){var t=e.utils,n=e.define({name:"_mucUserItem",namespace:i.Namespace.MUC_USER,element:"item",fields:{affiliation:t.attribute("affiliation"),nick:t.attribute("nick"),jid:t.jidAttribute("jid"),role:t.attribute("role"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),o=e.define({name:"_mucUserActor",namespace:i.Namespace.MUC_USER,element:"actor",fields:{nick:t.attribute("nick"),jid:t.jidAttribute("jid")}}),a=e.define({name:"destroyed",namespace:i.Namespace.MUC_USER,element:"destroy",fields:{jid:t.jidAttribute("jid"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),s=e.define({name:"invite",namespace:i.Namespace.MUC_USER,element:"invite",fields:{to:t.jidAttribute("to"),from:t.jidAttribute("from"),reason:t.textSub(i.Namespace.MUC_USER,"reason"),thread:t.subAttribute(i.Namespace.MUC_USER,"continue","thread"),continue:t.boolSub(i.Namespace.MUC_USER,"continue")}}),u=e.define({name:"decline",namespace:i.Namespace.MUC_USER,element:"decline",fields:{to:t.jidAttribute("to"),from:t.jidAttribute("from"),reason:t.textSub(i.Namespace.MUC_USER,"reason")}}),c=e.define({name:"_mucAdminItem",namespace:i.Namespace.MUC_ADMIN,element:"item",fields:{affiliation:t.attribute("affiliation"),nick:t.attribute("nick"),jid:t.jidAttribute("jid"),role:t.attribute("role"),reason:t.textSub(i.Namespace.MUC_ADMIN,"reason")}}),p=e.define({name:"actor",namespace:i.Namespace.MUC_USER,element:"actor",fields:{nick:t.attribute("nick"),jid:t.jidAttribute("jid")}}),f=e.define({name:"destroy",namespace:i.Namespace.MUC_OWNER,element:"destroy",fields:{jid:t.jidAttribute("jid"),password:t.textSub(i.Namespace.MUC_OWNER,"password"),reason:t.textSub(i.Namespace.MUC_OWNER,"reason")}}),l=e.define({name:"muc",namespace:i.Namespace.MUC_USER,element:"x",fields:{affiliation:r("_mucUserItem","affiliation"),nick:r("_mucUserItem","nick"),jid:r("_mucUserItem","jid"),role:r("_mucUserItem","role"),actor:r("_mucUserItem","_mucUserActor"),reason:r("_mucUserItem","reason"),password:t.textSub(i.Namespace.MUC_USER,"password"),codes:{get:function(){return t.getMultiSubText(this.xml,i.Namespace.MUC_USER,"status",function(e){return t.getAttribute(e,"code")})},set:function(e){var n=this;t.setMultiSubText(this.xml,i.Namespace.MUC_USER,"status",e,function(e){var r=t.createElement(i.Namespace.MUC_USER,"status",i.Namespace.MUC_USER);t.setAttribute(r,"code",e),n.xml.appendChild(r)})}}}}),d=e.define({name:"mucAdmin",namespace:i.Namespace.MUC_ADMIN,element:"query",fields:{affiliation:r("_mucAdminItem","affiliation"),nick:r("_mucAdminItem","nick"),jid:r("_mucAdminItem","jid"),role:r("_mucAdminItem","role"),actor:r("_mucAdminItem","_mucAdminActor"),reason:r("_mucAdminItem","reason")}}),m=e.define({name:"mucOwner",namespace:i.Namespace.MUC_OWNER,element:"query"}),h=e.define({name:"joinMuc",namespace:i.Namespace.MUC,element:"x",fields:{password:t.textSub(i.Namespace.MUC,"password"),history:{get:function(){var e={},n=t.find(this.xml,i.Namespace.MUC,"history");if(!n.length)return{};var r=(n=n[0]).getAttribute("maxchars")||"",o=n.getAttribute("maxstanzas")||"",a=n.getAttribute("seconds")||"",s=n.getAttribute("since")||"";r&&(e.maxchars=parseInt(r,10)),o&&(e.maxstanzas=parseInt(o,10)),a&&(e.seconds=parseInt(a,10)),s&&(e.since=new Date(s))},set:function(e){var n=t.find(this.xml,i.Namespace.MUC,"history");if(n.length)for(var r=0;r<n.length;r++)this.xml.removeChild(n[r]);var o=t.createElement(i.Namespace.MUC,"history",i.Namespace.MUC);this.xml.appendChild(o),e.maxchars&&o.setAttribute("maxchars",""+e.maxchars),e.maxstanzas&&o.setAttribute("maxstanzas",""+e.maxstanzas),e.seconds&&o.setAttribute("seconds",""+e.seconds),e.since&&o.setAttribute("since",e.since.toISOString())}}}}),b=e.define({name:"mucInvite",namespace:i.Namespace.MUC_DIRECT_INVITE,element:"x",fields:{jid:t.jidAttribute("jid"),password:t.attribute("password"),reason:t.attribute("reason"),thread:t.attribute("thread"),continue:t.boolAttribute("continue")}});e.extend(n,o),e.extend(l,n),e.extend(l,s,"invites"),e.extend(l,u),e.extend(l,a),e.extend(c,p),e.extend(d,c,"items"),e.extend(m,f),e.extendPresence(l),e.extendPresence(h),e.extendMessage(l),e.extendMessage(b),e.withIQ(function(n){e.add(n,"mucUnique",t.textSub(i.Namespace.MUC_UNIQUE,"unique")),e.extend(n,d),e.extend(n,m)}),e.withDataForm(function(t){e.extend(m,t)})},e.exports=t.default},1746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils.textSub(i.Namespace.NICK,"nick");e.withPubsubItem(function(n){e.add(n,"nick",t)}),e.withPresence(function(n){e.add(n,"nick",t)}),e.withMessage(function(n){e.add(n,"nick",t)})},e.exports=t.default},1747:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"oob",element:"x",namespace:i.Namespace.OOB,fields:{url:e.utils.textSub(i.Namespace.OOB,"url"),desc:e.utils.textSub(i.Namespace.OOB,"desc")}}),n=e.define({name:"oob",element:"query",namespace:i.Namespace.OOB_IQ,fields:{url:e.utils.textSub(i.Namespace.OOB,"url"),desc:e.utils.textSub(i.Namespace.OOB,"desc")}});e.extendMessage(t,"oobURIs"),e.extendIQ(n)},e.exports=t.default},1748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"ping",namespace:i.Namespace.PING,element:"ping"});e.extendIQ(t)},e.exports=t.default},1749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r={definePresence:function(e,t,n){var r=e.utils;e.define({name:t,namespace:n,element:"presence",topLevel:!0,fields:{lang:r.langAttribute(),id:r.attribute("id"),to:r.jidAttribute("to",!0),from:r.jidAttribute("from",!0),priority:r.numberSub(n,"priority",!1,0),show:r.textSub(n,"show"),type:{get:function(){return r.getAttribute(this.xml,"type","available")},set:function(e){"available"===e&&(e=!1),r.setAttribute(this.xml,"type",e)}},$status:{get:function(){return r.getSubLangText(this.xml,n,"status",this.lang)}},status:{get:function(){return this.$status[this.lang]||""},set:function(e){r.setSubLangText(this.xml,n,"status",e,this.lang)}},idleSince:r.dateSubAttribute(i.Namespace.IDLE_1,"idle","since"),decloak:r.subAttribute(i.Namespace.DECLOAKING_0,"decloak","reason"),avatarId:{get:function(){var e=r.find(this.xml,i.Namespace.VCARD_TEMP_UPDATE,"x");return e.length?r.getSubText(e[0],i.Namespace.VCARD_TEMP_UPDATE,"photo"):""},set:function(e){var t=r.findOrCreate(this.xml,i.Namespace.VCARD_TEMP_UPDATE,"x");if(""===e)r.setBoolSub(t,i.Namespace.VCARD_TEMP_UPDATE,"photo",!0);else{if(!0===e)return;e?r.setSubText(t,i.Namespace.VCARD_TEMP_UPDATE,"photo",e):this.xml.removeChild(t)}}}}})}};t.default=function(e){r.definePresence(e,"presence",i.Namespace.CLIENT),r.definePresence(e,"serverPresence",i.Namespace.SERVER),r.definePresence(e,"componentPresence",i.Namespace.COMPONENT)},e.exports=t.default},1750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"privateStorage",namespace:i.Namespace.PRIVATE,element:"query"});e.extendIQ(t)},e.exports=t.default},1751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["server-unavailable","connection-paused"];t.default=function(e){var t=e.define({name:"state",namespace:i.Namespace.PSA,element:"state-annotation",fields:{from:e.utils.jidAttribute("from"),condition:e.utils.enumSub(i.Namespace.PSA,r),description:e.utils.textSub(i.Namespace.PSA,"description")}});e.extendPresence(t)},e.exports=t.default},1752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"pubsub",namespace:i.Namespace.PUBSUB,element:"pubsub",fields:{create:{get:function(){var e=t.getSubAttribute(this.xml,i.Namespace.PUBSUB,"create","node");return e||t.getBoolSub(this.xml,i.Namespace.PUBSUB,"create")},set:function(e){!0!==e&&e?t.setSubAttribute(this.xml,i.Namespace.PUBSUB,"create","node",e):t.setBoolSub(this.xml,i.Namespace.PUBSUB,"create",e)}},publishOptions:{get:function(){var n=e.getDefinition("x",i.Namespace.DATAFORM),r=t.find(this.xml,i.Namespace.PUBSUB,"publish-options");if(r.length&&r[0].childNodes.length)return new n({},r[0].childNodes[0])},set:function(n){var r=e.getDefinition("x",i.Namespace.DATAFORM),o=t.findOrCreate(this.xml,i.Namespace.PUBSUB,"publish-options");if(n){var a=new r(n);o.appendChild(a.xml)}}}}}),r=e.define({name:"config",namespace:i.Namespace.PUBSUB,element:"configure"}),o=e.define({name:"subscribe",namespace:i.Namespace.PUBSUB,element:"subscribe",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid")}}),a=e.define({name:"subscription",namespace:i.Namespace.PUBSUB,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid"),type:t.attribute("subscription"),configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function(){var e=t.find(this.xml,i.Namespace.PUBSUB,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],i.Namespace.PUBSUB,"required")}}}}),s=e.define({name:"subscriptions",namespace:i.Namespace.PUBSUB,element:"subscriptions",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid")}}),u=e.define({name:"affiliation",namespace:i.Namespace.PUBSUB,element:"affiliation",fields:{node:t.attribute("node"),type:t.attribute("affiliation")}}),c=e.define({name:"affiliations",namespace:i.Namespace.PUBSUB,element:"affiliations",fields:{node:t.attribute("node")}}),p=e.define({name:"subscriptionOptions",namespace:i.Namespace.PUBSUB,element:"options",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid")}}),f=e.define({name:"unsubscribe",namespace:i.Namespace.PUBSUB,element:"unsubscribe",fields:{node:t.attribute("node"),subid:t.attribute("subid"),jid:t.jidAttribute("jid")}}),l=e.define({name:"publish",namespace:i.Namespace.PUBSUB,element:"publish",fields:{node:t.attribute("node")}}),d=e.define({name:"retract",namespace:i.Namespace.PUBSUB,element:"retract",fields:{node:t.attribute("node"),notify:t.boolAttribute("notify"),id:t.subAttribute(i.Namespace.PUBSUB,"item","id")}}),m=e.define({name:"retrieve",namespace:i.Namespace.PUBSUB,element:"items",fields:{node:t.attribute("node"),max:t.attribute("max_items")}}),h=e.define({name:"item",namespace:i.Namespace.PUBSUB,element:"item",fields:{id:t.attribute("id"),publisher:t.jidAttribute("publisher")}});e.extend(n,r),e.extend(n,o),e.extend(n,f),e.extend(n,l),e.extend(n,d),e.extend(n,m),e.extend(n,a),e.extend(n,p),e.extend(n,s),e.extend(n,c),e.extend(l,h,"items"),e.extend(m,h,"items"),e.extend(s,a,"list"),e.extend(c,u,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(p,t),e.extend(h,t),e.extend(r,t)}),e.withDefinition("set",i.Namespace.RSM,function(t){e.extend(n,t)})},e.exports=t.default},1753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["closed-node","configuration-required","invalid-jid","invalid-options","invalid-payload","invalid-subid","item-forbidden","item-required","jid-required","max-items-exceeded","max-nodes-exceeded","nodeid-required","not-in-roster-group","not-subscribed","payload-too-big","payload-required","pending-subscription","presence-subscription-required","subid-required","too-many-subscriptions","unsupported","unsupported-access-model"];t.default=function(e){e.withStanzaError(function(t){e.add(t,"pubsubCondition",e.utils.enumSub(i.Namespace.PUBSUB_ERRORS,r)),e.add(t,"pubsubUnsupportedFeature",{get:function(){return e.utils.getSubAttribute(this.xml,i.Namespace.PUBSUB_ERRORS,"unsupported","feature")},set:function(t){t&&(this.pubsubCondition="unsupported"),e.utils.setSubAttribute(this.xml,i.Namespace.PUBSUB_ERRORS,"unsupported","feature",t)}})})},e.exports=t.default},1754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"event",namespace:i.Namespace.PUBSUB_EVENT,element:"event"}),r=e.define({name:"purged",namespace:i.Namespace.PUBSUB_EVENT,element:"purge",fields:{node:t.attribute("node")}}),o=e.define({name:"deleted",namespace:i.Namespace.PUBSUB_EVENT,element:"delete",fields:{node:t.attribute("node"),redirect:t.subAttribute(i.Namespace.PUBSUB_EVENT,"redirect","uri")}}),a=e.define({name:"subscriptionChanged",namespace:i.Namespace.PUBSUB_EVENT,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),type:t.attribute("subscription"),subid:t.attribute("subid"),expiry:{get:function(){var e=t.getAttribute(this.xml,"expiry");return"presence"===e?e:e?new Date(e):void 0},set:function(e){e&&("string"!=typeof e&&(e=e.toISOString()),t.setAttribute(this.xml,"expiry",e))}}}}),s=e.define({name:"configurationChanged",namespace:i.Namespace.PUBSUB_EVENT,element:"configuration",fields:{node:t.attribute("node")}}),u=e.define({name:"updated",namespace:i.Namespace.PUBSUB_EVENT,element:"items",fields:{node:t.attribute("node"),retracted:{get:function(){var e=[];return t.find(this.xml,i.Namespace.PUBSUB_EVENT,"retract").forEach(function(t){e.push(t.getAttribute("id"))}),e},set:function(e){e.forEach(function(e){var n=t.createElement(i.Namespace.PUBSUB_EVENT,"retract",i.Namespace.PUBSUB_EVENT);n.setAttribute("id",e),this.xml.appendChild(n)})}}}}),c=e.define({name:"_eventItem",namespace:i.Namespace.PUBSUB_EVENT,element:"item",fields:{id:t.attribute("id"),node:t.attribute("node"),publisher:t.jidAttribute("publisher")}});e.extend(u,c,"published"),e.extend(n,u),e.extend(n,a),e.extend(n,s),e.extend(n,o),e.extend(n,r),e.extendMessage(n),e.withDataForm(function(t){e.extend(s,t)})},e.exports=t.default},1755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"pubsubOwner",namespace:i.Namespace.PUBSUB_OWNER,element:"pubsub",fields:{purge:t.subAttribute(i.Namespace.PUBSUB_OWNER,"purge","node"),del:t.subAttribute(i.Namespace.PUBSUB_OWNER,"delete","node"),redirect:{get:function(){var e=t.find(this.xml,i.Namespace.PUBSUB_OWNER,"delete");return e.length?t.getSubAttribute(e[0],i.Namespace.PUBSUB_OWNER,"redirect","uri"):""},set:function(e){var n=t.findOrCreate(this.xml,i.Namespace.PUBSUB_OWNER,"delete");t.setSubAttribute(n,i.Namespace.PUBSUB_OWNER,"redirect","uri",e)}}}}),r=e.define({name:"subscription",namespace:i.Namespace.PUBSUB_OWNER,element:"subscription",fields:{node:t.attribute("node"),jid:t.jidAttribute("jid"),subid:t.attribute("subid"),type:t.attribute("subscription"),configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function(){var e=t.find(this.xml,i.Namespace.PUBSUB_OWNER,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],i.Namespace.PUBSUB_OWNER,"required")}}}}),o=e.define({name:"subscriptions",namespace:i.Namespace.PUBSUB_OWNER,element:"subscriptions",fields:{node:t.attribute("node")}}),a=e.define({name:"affiliation",namespace:i.Namespace.PUBSUB_OWNER,element:"affiliation",fields:{jid:t.jidAttribute("jid"),type:t.attribute("affiliation")}}),s=e.define({name:"affiliations",namespace:i.Namespace.PUBSUB_OWNER,element:"affiliations",fields:{node:t.attribute("node")}}),u=e.define({name:"config",namespace:i.Namespace.PUBSUB_OWNER,element:"configure",fields:{node:t.attribute("node")}});e.extend(n,u),e.extend(n,o),e.extend(n,s),e.extend(o,r,"list"),e.extend(s,a,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(u,t)})},e.exports=t.default},1756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"enablePush",element:"enable",namespace:i.Namespace.PUSH_0,fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")}}),r=e.define({name:"disablePush",element:"disable",namespace:i.Namespace.PUSH_0,fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")}}),o=e.define({name:"pushNotification",element:"notification",namespace:i.Namespace.PUSH_0});e.withDataForm(function(t){e.extend(o,t),e.extend(n,t)}),e.extendIQ(n),e.extendIQ(r)},e.exports=t.default},1757:function(e,t,n){"use strict";var i=n(1334).default;Object.defineProperty(t,"__esModule",{value:!0});var r=n(1046),o=i(n(1191));t.default=function(e){var t=e.utils,n=e.define({name:"_reachAddr",namespace:r.Namespace.REACH_0,element:"addr",fields:{uri:t.attribute("uri"),$desc:{get:function(){return t.getSubLangText(this.xml,r.Namespace.REACH_0,"desc",this.lang)}},desc:{get:function(){return this.$desc[this.lang]||""},set:function(e){t.setSubLangText(this.xml,r.Namespace.REACH_0,"desc",e,this.lang)}}}}),i={get:function(){var e=t.find(this.xml,r.Namespace.REACH_0,"reach"),i=[];if(e.length){var a=t.find(e[0],r.Namespace.REACH_0,"addr");(0,o.default)(a,function(e){i.push(new n({},e))})}return i},set:function(e){var i=t.findOrCreate(this.xml,r.Namespace.REACH_0,"reach");t.setAttribute(i,"xmlns",r.Namespace.REACH_0),(0,o.default)(e,function(e){var t=new n(e);i.appendChild(t.xml)})}};e.withPubsubItem(function(t){e.add(t,"reach",i)}),e.withPresence(function(t){e.add(t,"reach",i)})},e.exports=t.default},1758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"register",namespace:i.Namespace.REGISTER,element:"query",fields:{instructions:t.textSub(i.Namespace.REGISTER,"instructions"),registered:t.boolSub(i.Namespace.REGISTER,"registered"),remove:t.boolSub(i.Namespace.REGISTER,"remove"),username:t.textSub(i.Namespace.REGISTER,"username"),nick:t.textSub(i.Namespace.REGISTER,"nick"),password:t.textSub(i.Namespace.REGISTER,"password"),name:t.textSub(i.Namespace.REGISTER,"name"),first:t.textSub(i.Namespace.REGISTER,"first"),last:t.textSub(i.Namespace.REGISTER,"last"),email:t.textSub(i.Namespace.REGISTER,"email"),address:t.textSub(i.Namespace.REGISTER,"address"),city:t.textSub(i.Namespace.REGISTER,"city"),state:t.textSub(i.Namespace.REGISTER,"state"),zip:t.textSub(i.Namespace.REGISTER,"zip"),phone:t.textSub(i.Namespace.REGISTER,"phone"),url:t.textSub(i.Namespace.REGISTER,"url"),date:t.textSub(i.Namespace.REGISTER,"date"),misc:t.textSub(i.Namespace.REGISTER,"misc"),text:t.textSub(i.Namespace.REGISTER,"text"),key:t.textSub(i.Namespace.REGISTER,"key")}});e.extendIQ(n),e.withDefinition("x",i.Namespace.OOB,function(t){e.extend(n,t)}),e.withDataForm(function(t){e.extend(n,t)})},e.exports=t.default},1759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"reference",element:"reference",namespace:i.Namespace.REFERENCE_0,fields:{type:t.attribute("type"),begin:t.numberAttribute("begin"),end:t.numberAttribute("end"),uri:t.attribute("uri"),anchor:t.attribute("anchor")}}),r=t.multiExtension(n);e.withMessage(function(t){e.add(t,"references",r)})},e.exports=t.default},1760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"roster",namespace:i.Namespace.ROSTER,element:"query",fields:{ver:{get:function(){return t.getAttribute(this.xml,"ver")},set:function(e){var n=""===e;t.setAttribute(this.xml,"ver",e,n)}}}}),r=e.define({name:"_rosterItem",namespace:i.Namespace.ROSTER,element:"item",fields:{jid:t.jidAttribute("jid",!0),name:t.attribute("name"),subscription:t.attribute("subscription","none"),subscriptionRequested:{get:function(){return"subscribe"===t.getAttribute(this.xml,"ask")}},preApproved:t.boolAttribute(i.Namespace.ROSTER,"approved"),groups:t.multiTextSub(i.Namespace.ROSTER,"group")}});e.extend(n,r,"items"),e.extendIQ(n)},e.exports=t.default},1761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils;e.define({name:"rsm",namespace:i.Namespace.RSM,element:"set",fields:{after:t.textSub(i.Namespace.RSM,"after"),before:{get:function(){return t.getSubText(this.xml,i.Namespace.RSM,"before")},set:function(e){!0===e?t.findOrCreate(this.xml,i.Namespace.RSM,"before"):t.setSubText(this.xml,i.Namespace.RSM,"before",e)}},count:t.numberSub(i.Namespace.RSM,"count",!1,0),first:t.textSub(i.Namespace.RSM,"first"),firstIndex:t.numberSubAttribute(i.Namespace.RSM,"first","index"),index:t.numberSub(i.Namespace.RSM,"index",!1),last:t.textSub(i.Namespace.RSM,"last"),max:t.numberSub(i.Namespace.RSM,"max",!1)}})},e.exports=t.default},1762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n={get:function(){var e=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb"),n=[];return e.forEach(function(e){n.push({type:t.getAttribute(e,"type"),subtype:t.getAttribute(e,"subtype")})}),(e=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int")).forEach(function(e){n.push({type:t.getAttribute(e,"type"),value:t.getAttribute(e,"value")})}),n},set:function(e){var n=this,r=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb");r.forEach(function(e){n.xml.removeChild(e)}),(r=t.find(this.xml,i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int")).forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var r=void 0;"trr-int"===e.type?(r=t.createElement(i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int",i.Namespace.JINGLE_RTP_1),t.setAttribute(r,"type",e.type),t.setAttribute(r,"value",e.value)):(r=t.createElement(i.Namespace.JINGLE_RTP_RTCP_FB_0,"rtcp-fb",i.Namespace.JINGLE_RTP_1),t.setAttribute(r,"type",e.type),t.setAttribute(r,"subtype",e.subtype)),n.xml.appendChild(r)})}},r=e.define({name:"bandwidth",namespace:i.Namespace.JINGLE_RTP_1,element:"bandwidth",fields:{type:t.attribute("type"),bandwidth:t.text()}}),o=e.define({name:"_rtp",namespace:i.Namespace.JINGLE_RTP_1,element:"description",tags:["jingle-application"],fields:{applicationType:{value:"rtp",writable:!0},media:t.attribute("media"),ssrc:t.attribute("ssrc"),mux:t.boolSub(i.Namespace.JINGLE_RTP_1,"rtcp-mux"),encryption:{get:function(){var e=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption");if(!e.length)return[];e=e[0];var n=this,r=[];return t.find(e,i.Namespace.JINGLE_RTP_1,"crypto").forEach(function(e){r.push(new s({},e,n).toJSON())}),r},set:function(e){var n=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption");if(n.length&&this.xml.removeChild(n),e.length){t.setBoolSubAttribute(this.xml,i.Namespace.JINGLE_RTP_1,"encryption","required",!0),n=t.find(this.xml,i.Namespace.JINGLE_RTP_1,"encryption")[0];var r=this;e.forEach(function(e){var t=new s(e,null,r);n.appendChild(t.xml)})}}},feedback:n,headerExtensions:{get:function(){var e=[];return t.find(this.xml,i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext").forEach(function(n){e.push({id:t.getAttribute(n,"id"),uri:t.getAttribute(n,"uri"),senders:t.getAttribute(n,"senders")})}),e},set:function(e){var n=this;t.find(this.xml,i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext").forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_HDREXT_0,"rtp-hdrext",i.Namespace.JINGLE_RTP_1);t.setAttribute(r,"id",e.id),t.setAttribute(r,"uri",e.uri),t.setAttribute(r,"senders",e.senders),n.xml.appendChild(r)})}}}}),a=e.define({name:"_payloadType",namespace:i.Namespace.JINGLE_RTP_1,element:"payload-type",fields:{channels:t.attribute("channels"),clockrate:t.attribute("clockrate"),id:t.attribute("id"),maxptime:t.attribute("maxptime"),name:t.attribute("name"),ptime:t.attribute("ptime"),feedback:n,parameters:{get:function(){var e=[];return t.find(this.xml,i.Namespace.JINGLE_RTP_1,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_1,"parameter");t.setAttribute(r,"name",e.key),t.setAttribute(r,"value",e.value),n.xml.appendChild(r)})}}}}),s=e.define({name:"crypto",namespace:i.Namespace.JINGLE_RTP_1,element:"crypto",fields:{cipherSuite:t.attribute("crypto-suite"),keyParams:t.attribute("key-params"),sessionParams:t.attribute("session-params"),tag:t.attribute("tag")}}),u=e.define({name:"_group",namespace:i.Namespace.JINGLE_GROUPING_0,element:"group",fields:{semantics:t.attribute("semantics"),contents:t.multiSubAttribute(i.Namespace.JINGLE_GROUPING_0,"content","name")}}),c=e.define({name:"_sourceGroup",namespace:i.Namespace.JINGLE_RTP_SSMA_0,element:"ssrc-group",fields:{semantics:t.attribute("semantics"),sources:t.multiSubAttribute(i.Namespace.JINGLE_RTP_SSMA_0,"source","ssrc")}}),p=e.define({name:"_source",namespace:i.Namespace.JINGLE_RTP_SSMA_0,element:"source",fields:{ssrc:t.attribute("ssrc"),parameters:{get:function(){var e=[];return t.find(this.xml,i.Namespace.JINGLE_RTP_SSMA_0,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function(e){var n=this;e.forEach(function(e){var r=t.createElement(i.Namespace.JINGLE_RTP_SSMA_0,"parameter");t.setAttribute(r,"name",e.key),t.setAttribute(r,"value",e.value),n.xml.appendChild(r)})}}}}),f=e.define({name:"mute",namespace:i.Namespace.JINGLE_RTP_INFO_1,element:"mute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}}),l=e.define({name:"unmute",namespace:i.Namespace.JINGLE_RTP_INFO_1,element:"unmute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}});e.extend(o,r),e.extend(o,a,"payloads"),e.extend(o,p,"sources"),e.extend(o,c,"sourceGroups"),e.withDefinition("content",i.Namespace.JINGLE_1,function(t){e.extend(t,o)}),e.withDefinition("jingle",i.Namespace.JINGLE_1,function(n){e.extend(n,f),e.extend(n,l),e.extend(n,u,"groups"),e.add(n,"ringing",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"ringing")),e.add(n,"hold",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"hold")),e.add(n,"active",t.boolSub(i.Namespace.JINGLE_RTP_INFO_1,"active"))})},e.exports=t.default},1763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r={insert:"t",erase:"e",wait:"w"},o={t:"insert",e:"erase",w:"wait"};t.default=function(e){var t=e.utils,n=e.define({name:"rtt",namespace:i.Namespace.RTT_0,element:"rtt",fields:{id:t.attribute("id"),event:t.attribute("event","edit"),seq:t.numberAttribute("seq"),actions:{get:function(){for(var e=[],n=0,r=this.xml.childNodes.length;n<r;n++){var a=this.xml.childNodes[n],s=a.localName,u={};if(a.namespaceURI===i.Namespace.RTT_0&&o[s]){u.type=o[s];var c=t.getAttribute(a,"p");c&&(u.pos=parseInt(c,10));var p=t.getAttribute(a,"n");p&&(u.num=parseInt(p,10));var f=t.getText(a);f&&"t"===s&&(u.text=f),e.push(u)}}return e},set:function(e){for(var n=this,o=0,a=this.xml.childNodes.length;o<a;o++)this.xml.removeChild(this.xml.childNodes[o]);e.forEach(function(e){if(r[e.type]){var o=t.createElement(i.Namespace.RTT_0,r[e.type],i.Namespace.RTT_0);void 0!==e.pos&&t.setAttribute(o,"p",e.pos.toString()),e.num&&t.setAttribute(o,"n",e.num.toString()),e.text&&t.setText(o,e.text),n.xml.appendChild(o)}})}}}});e.extendMessage(n)},e.exports=t.default},1764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["aborted","account-disabled","credentials-expired","encryption-required","incorrect-encoding","invalid-authzid","invalid-mechanism","malformed-request","mechanism-too-weak","not-authorized","temporary-auth-failure","not-supported"];t.default=function(e){var t=e.utils,n=e.define({name:"sasl",namespace:i.Namespace.SASL,element:"mechanisms",fields:{mechanisms:t.multiTextSub(i.Namespace.SASL,"mechanism")}});e.define({name:"saslAuth",eventName:"sasl:auth",namespace:i.Namespace.SASL,element:"auth",topLevel:!0,fields:{value:t.text(),mechanism:t.attribute("mechanism")}}),e.define({name:"saslChallenge",eventName:"sasl:challenge",namespace:i.Namespace.SASL,element:"challenge",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslResponse",eventName:"sasl:response",namespace:i.Namespace.SASL,element:"response",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslAbort",eventName:"sasl:abort",namespace:i.Namespace.SASL,element:"abort",topLevel:!0}),e.define({name:"saslSuccess",eventName:"sasl:success",namespace:i.Namespace.SASL,element:"success",topLevel:!0,fields:{value:t.text()}}),e.define({name:"saslFailure",eventName:"sasl:failure",namespace:i.Namespace.SASL,element:"failure",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},condition:t.enumSub(i.Namespace.SASL,r),$text:{get:function(){return t.getSubLangText(this.xml,i.Namespace.SASL,"text",this.lang)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,i.Namespace.SASL,"text",e,this.lang)}}}}),e.extendStreamFeatures(n)},e.exports=t.default},1765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"session",namespace:i.Namespace.SESSION,element:"session",fields:{required:e.utils.boolSub(i.Namespace.SESSION,"required"),optional:e.utils.boolSub(i.Namespace.SESSION,"optional")}});e.extendIQ(t),e.extendStreamFeatures(t)},e.exports=t.default},1766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n={get:function(){var e=t.find(this.xml,i.Namespace.SHIM,"headers");return e.length?t.getMultiSubText(e[0],i.Namespace.SHIM,"header",function(e){var n=t.getAttribute(e,"name");if(n)return{name:n,value:t.getText(e)}}):[]},set:function(n){var r=t.findOrCreate(this.xml,i.Namespace.SHIM,"headers");e.setMultiSubText(r,i.Namespace.SHIM,"header",n,function(e){var n=t.createElement(i.Namespace.SHIM,"header",i.Namespace.SHIM);t.setAttribute(n,"name",e.name),t.setText(n,e.value),r.appendChild(n)})}};e.withMessage(function(t){e.add(t,"headers",n)}),e.withPresence(function(t){e.add(t,"headers",n)})},e.exports=t.default},1767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"streamManagement",namespace:i.Namespace.SMACKS_3,element:"sm"});e.define({name:"smEnable",eventName:"stream:management:enable",namespace:i.Namespace.SMACKS_3,element:"enable",topLevel:!0,fields:{resume:t.boolAttribute("resume")}}),e.define({name:"smEnabled",eventName:"stream:management:enabled",namespace:i.Namespace.SMACKS_3,element:"enabled",topLevel:!0,fields:{id:t.attribute("id"),resume:t.boolAttribute("resume")}}),e.define({name:"smResume",eventName:"stream:management:resume",namespace:i.Namespace.SMACKS_3,element:"resume",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")}}),e.define({name:"smResumed",eventName:"stream:management:resumed",namespace:i.Namespace.SMACKS_3,element:"resumed",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")}}),e.define({name:"smFailed",eventName:"stream:management:failed",namespace:i.Namespace.SMACKS_3,element:"failed",topLevel:!0}),e.define({name:"smAck",eventName:"stream:management:ack",namespace:i.Namespace.SMACKS_3,element:"a",topLevel:!0,fields:{h:t.numberAttribute("h",!1,0)}}),e.define({name:"smRequest",eventName:"stream:management:request",namespace:i.Namespace.SMACKS_3,element:"r",topLevel:!0}),e.extendStreamFeatures(n)},e.exports=t.default},1768:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils;e.define({name:"stream",namespace:i.Namespace.STREAM,element:"stream",fields:{lang:t.langAttribute(),id:t.attribute("id"),version:t.attribute("version","1.0"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0)}})},e.exports=t.default},1769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046),r=["bad-format","bad-namespace-prefix","conflict","connection-timeout","host-gone","host-unknown","improper-addressing","internal-server-error","invalid-from","invalid-namespace","invalid-xml","not-authorized","not-well-formed","policy-violation","remote-connection-failed","reset","resource-constraint","restricted-xml","see-other-host","system-shutdown","undefined-condition","unsupported-encoding","unsupported-feature","unsupported-stanza-type","unsupported-version"];t.default=function(e){var t=e.utils;e.define({name:"streamError",namespace:i.Namespace.STREAM,element:"error",topLevel:!0,fields:{lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},condition:t.enumSub(i.Namespace.STREAM_ERROR,r),seeOtherHost:{get:function(){return t.getSubText(this.xml,i.Namespace.STREAM_ERROR,"see-other-host")},set:function(e){this.condition="see-other-host",t.setSubText(this.xml,i.Namespace.STREAM_ERROR,"see-other-host",e)}},$text:{get:function(){return t.getSubLangText(this.xml,i.Namespace.STREAM_ERROR,"text",this.lang)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,i.Namespace.STREAM_ERROR,"text",e,this.lang)}}}})},e.exports=t.default},1770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){e.define({name:"streamFeatures",namespace:i.Namespace.STREAM,element:"features",topLevel:!0});var t=e.define({name:"rosterVersioning",namespace:i.Namespace.ROSTER_VERSIONING,element:"ver"}),n=e.define({name:"subscriptionPreApproval",namespace:i.Namespace.SUBSCRIPTION_PREAPPROVAL,element:"sub"});e.extendStreamFeatures(t),e.extendStreamFeatures(n)},e.exports=t.default},1771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"time",namespace:i.Namespace.TIME,element:"time",fields:{utc:e.utils.dateSub(i.Namespace.TIME,"utc"),tzo:e.utils.tzoSub(i.Namespace.TIME,"tzo",0)}});e.extendIQ(t)},e.exports=t.default},1772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"tune",namespace:i.Namespace.TUNE,element:"tune",fields:{artist:t.textSub(i.Namespace.TUNE,"artist"),length:t.numberSub(i.Namespace.TUNE,"length"),rating:t.numberSub(i.Namespace.TUNE,"rating"),source:t.textSub(i.Namespace.TUNE,"source"),title:t.textSub(i.Namespace.TUNE,"title"),track:t.textSub(i.Namespace.TUNE,"track"),uri:t.textSub(i.Namespace.TUNE,"uri")}});e.extendPubsubItem(n),e.extendMessage(n)},e.exports=t.default},1773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.utils,n=e.define({name:"vCardTemp",namespace:i.Namespace.VCARD_TEMP,element:"vCard",fields:{role:t.textSub(i.Namespace.VCARD_TEMP,"ROLE"),website:t.textSub(i.Namespace.VCARD_TEMP,"URL"),title:t.textSub(i.Namespace.VCARD_TEMP,"TITLE"),description:t.textSub(i.Namespace.VCARD_TEMP,"DESC"),fullName:t.textSub(i.Namespace.VCARD_TEMP,"FN"),birthday:t.dateSub(i.Namespace.VCARD_TEMP,"BDAY"),nicknames:t.multiTextSub(i.Namespace.VCARD_TEMP,"NICKNAME"),jids:t.multiTextSub(i.Namespace.VCARD_TEMP,"JABBERID")}}),r=e.define({name:"_email",namespace:i.Namespace.VCARD_TEMP,element:"EMAIL",fields:{email:t.textSub(i.Namespace.VCARD_TEMP,"USERID"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),o=e.define({name:"_tel",namespace:i.Namespace.VCARD_TEMP,element:"TEL",fields:{number:t.textSub(i.Namespace.VCARD_TEMP,"NUMBER"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),mobile:t.boolSub(i.Namespace.VCARD_TEMP,"CELL"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),a=e.define({name:"_address",namespace:i.Namespace.VCARD_TEMP,element:"ADR",fields:{street:t.textSub(i.Namespace.VCARD_TEMP,"STREET"),street2:t.textSub(i.Namespace.VCARD_TEMP,"EXTADD"),country:t.textSub(i.Namespace.VCARD_TEMP,"CTRY"),city:t.textSub(i.Namespace.VCARD_TEMP,"LOCALITY"),region:t.textSub(i.Namespace.VCARD_TEMP,"REGION"),postalCode:t.textSub(i.Namespace.VCARD_TEMP,"PCODE"),pobox:t.textSub(i.Namespace.VCARD_TEMP,"POBOX"),home:t.boolSub(i.Namespace.VCARD_TEMP,"HOME"),work:t.boolSub(i.Namespace.VCARD_TEMP,"WORK"),preferred:t.boolSub(i.Namespace.VCARD_TEMP,"PREF")}}),s=e.define({name:"organization",namespace:i.Namespace.VCARD_TEMP,element:"ORG",fields:{name:t.textSub(i.Namespace.VCARD_TEMP,"ORGNAME"),unit:t.textSub(i.Namespace.VCARD_TEMP,"ORGUNIT")}}),u=e.define({name:"name",namespace:i.Namespace.VCARD_TEMP,element:"N",fields:{family:t.textSub(i.Namespace.VCARD_TEMP,"FAMILY"),given:t.textSub(i.Namespace.VCARD_TEMP,"GIVEN"),middle:t.textSub(i.Namespace.VCARD_TEMP,"MIDDLE"),prefix:t.textSub(i.Namespace.VCARD_TEMP,"PREFIX"),suffix:t.textSub(i.Namespace.VCARD_TEMP,"SUFFIX")}}),c=e.define({name:"photo",namespace:i.Namespace.VCARD_TEMP,element:"PHOTO",fields:{type:t.textSub(i.Namespace.VCARD_TEMP,"TYPE"),data:t.textSub(i.Namespace.VCARD_TEMP,"BINVAL"),url:t.textSub(i.Namespace.VCARD_TEMP,"EXTVAL")}});e.extend(n,r,"emails"),e.extend(n,a,"addresses"),e.extend(n,o,"phoneNumbers"),e.extend(n,s),e.extend(n,u),e.extend(n,c),e.extendIQ(n)},e.exports=t.default},1774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){var t=e.define({name:"version",namespace:i.Namespace.VERSION,element:"query",fields:{name:e.utils.textSub(i.Namespace.VERSION,"name"),version:e.utils.textSub(i.Namespace.VERSION,"version"),os:e.utils.textSub(i.Namespace.VERSION,"os")}});e.extendIQ(t)},e.exports=t.default},1775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1046);t.default=function(e){e.withIQ(function(t){e.add(t,"visible",e.utils.boolSub(i.Namespace.INVISIBLE_0,"visible")),e.add(t,"invisible",e.utils.boolSub(i.Namespace.INVISIBLE_0,"invisible"))})},e.exports=t.default},1776:function(e,t,n){"use strict";var i=n(1292);e.exports=function(e){e.features={negotiated:{},order:[],handlers:{}},e.registerFeature=function(t,n,i){this.features.order.push({priority:n,name:t}),this.features.order.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),this.features.handlers[t]=i.bind(e)},e.on("streamFeatures",function(t){var n=[],r=e.features.negotiated,o=e.features.handlers;e.features.order.forEach(function(e){var i=e.name;t[i]&&o[i]&&!r[i]&&n.push(function(e){r[i]?e():o[i](t,e)})}),i.series(n,function(t,n){"restart"===t?e.transport.restart():"disconnect"===t&&(e.emit("stream:error",{condition:"policy-violation",text:"Failed to negotiate stream features: "+n}),e.disconnect())})})}},1777:function(e,t,n){"use strict";(function(t){var n="urn:ietf:params:xml:ns:xmpp-sasl";e.exports=function(e,i){var r=i.getDefinition("auth",n),o=i.getDefinition("response",n),a=i.getDefinition("abort",n);e.registerFeature("sasl",100,function(e,n){var i=this,s=i.SASLFactory.create(e.sasl.mechanisms);if(!s)return i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed");i.on("sasl:success","sasl",function(){i.features.negotiated.sasl=!0,i.releaseGroup("sasl"),i.emit("auth:success",i.config.credentials),n("restart")}),i.on("sasl:challenge","sasl",function(e){return s.challenge(new t(e.value,"base64").toString()),i.getCredentials(function(e,n){if(e)return i.send(new a);var r=s.response(n);r||""===r?i.send(new o({value:new t(r).toString("base64")})):i.send(new o),s.cache&&(Object.keys(s.cache).forEach(function(e){s.cache[e]&&(i.config.credentials[e]=new t(s.cache[e]))}),i.emit("credentials:update",i.config.credentials))})}),i.on("sasl:failure","sasl",function(){i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed")}),i.on("sasl:abort","sasl",function(){i.releaseGroup("sasl"),i.emit("auth:failed"),n("disconnect","authentication failed")});var u={mechanism:s.name};if(s.clientFirst)return i.getCredentials(function(e,n){if(e)return i.send(new a);u.value=new t(s.response(n)).toString("base64"),i.send(new r(u))});i.send(new r(u))}),e.on("disconnected",function(){e.features.negotiated.sasl=!1,e.releaseGroup("sasl")})}}).call(this,n(1053).Buffer)},1778:function(e,t,n){"use strict";e.exports=function(e,t,n){var i=function(e,t){var i=this;if(!n.useStreamManagement)return t();i.on("stream:management:enabled","sm",function(e){i.sm.enabled(e),i.features.negotiated.streamManagement=!0,i.releaseGroup("sm"),t()}),i.on("stream:management:resumed","sm",function(e){i.sm.resumed(e),i.features.negotiated.streamManagement=!0,i.features.negotiated.bind=!0,i.sessionStarted=!0,i.releaseGroup("sm"),t("break")}),i.on("stream:management:failed","sm",function(){i.sm.failed(),i.emit("session:end"),i.releaseGroup("session"),i.releaseGroup("sm"),t()}),i.sm.id?i.sm.id&&i.sm.allowResume?i.sm.resume():(i.releaseGroup("sm"),t()):i.features.negotiated.bind?i.sm.enable():(i.releaseGroup("sm"),t())};e.on("disconnected",function(){e.features.negotiated.streamManagement=!1}),e.registerFeature("streamManagement",200,i),e.registerFeature("streamManagement",500,i)}},1779:function(e,t,n){"use strict";var i=n(1087).JID;e.exports=function(e,t,n){e.registerFeature("bind",300,function(e,t){var i=this;i.sendIq({type:"set",bind:{resource:n.resource}},function(n,r){if(n)return i.emit("session:error",n),t("disconnect","JID binding failed");i.features.negotiated.bind=!0,i.emit("session:prebind",r.bind.jid);var o=!e.session||e.session&&e.session.optional;return!i.sessionStarted&&o&&i.emit("session:started",i.jid),t()})}),e.on("session:started",function(){e.sessionStarted=!0}),e.on("session:prebind",function(t){e.jid=new i(t),e.emit("session:bound",e.jid)}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.bind=!1})}},1780:function(e,t,n){"use strict";e.exports=function(e){e.registerFeature("session",1e3,function(e,t){var n=this;if(e.session.optional||n.sessionStarted)return n.features.negotiated.session=!0,t();n.sendIq({type:"set",session:{}},function(e){if(e)return t("disconnect","session request failed");n.features.negotiated.session=!0,n.sessionStarted||(n.sessionStarted=!0,n.emit("session:started",n.jid)),t()})}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.session=!1})}},1781:function(e,t,n){"use strict";var i=n(1475);e.exports=function(e){e.transports.websocket=i}},1782:function(e,t,n){"use strict";var i=n(1783);e.exports=function(e){e.transports["old-websocket"]=i}},1783:function(e,t,n){"use strict";var i=n(1191),r=n(1475);function o(e,t){r.call(this,e,t);var n=this;n.on("connected",function(){n.streamStart='<stream:stream xmlns:stream="http://etherx.jabber.org/streams">',n.streamEnd="</stream:stream>"}),n.off("raw:incoming"),n.on("raw:incoming",function(e){var r,o,a;if(""!==(e=(e=e.trim()).replace(/^(\s*<\?.*\?>\s*)*/,""))){if(e.match(n.streamEnd))return n.disconnect();if(n.hasStream)try{r=t.parse(function(e){return[n.streamStart,e,n.streamEnd].join("")}(e))}catch(e){return a=new this.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",a,e),n.send(a),n.disconnect()}else{var s=e.trim().split(" ")[0].slice(1).split(":");n.streamStart=e,n.streamEnd="</"+s[0]+(s[1]?":"+s[1]:"")+">",o=!1;try{r=t.parse(e+n.streamEnd)}catch(i){try{r=t.parse(e),o=!0}catch(e){return a=new this.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",a,e),n.send(a),n.disconnect()}}n.hasStream=!0,n.stream=r,n.emit("stream:start",r)}i(r._extensions,function(e){!e.lang&&n.stream&&(e.lang=n.stream.lang),n.emit("stream:data",e)}),o&&n.emit("stream:end")}})}n(1090).inherits(o,r),o.prototype.startHeader=function(){return["<stream:stream",'xmlns:stream="http://etherx.jabber.org/streams"','xmlns="jabber:client"','version="'+(this.config.version||"1.0")+'"','xml:lang="'+(this.config.lang||"en")+'"','to="'+this.config.server+'">'].join(" ")},o.prototype.closeHeader=function(){return"</stream:stream>"},e.exports=o},1784:function(e,t,n){"use strict";var i=n(1785);e.exports=function(e){e.transports.bosh=i}},1785:function(e,t,n){"use strict";(function(t,i){var r=n(1193),o=n(1476),a=n(1090),s=n(1473),u=n(1134);function c(e,t,n){return function(e,t){var n;return Promise.race([e,new Promise(function(e,i){n=setTimeout(function(){i()},t)})]).then(function(e){return clearTimeout(n),e})}(function(e){return new Promise(function(t,n){s(e,function(e,i,r){return e?n(e):t([i,r])})})}(e),1e3*(t||20)).then(function(e){var t=e[0],n=e[1];if(t.statusCode<200||t.statusCode>=400)throw new Error("HTTP Status Error"+t.statusCode);return n}).catch(function(){if(n>0)return function(e){return new Promise(function(t){setTimeout(function(){t()},e)})}(1e3).then(function(){return c(e,t,n-1)});throw new Error("Dead Connection, exceeded retry limit")})}function p(e,t){var n=this;u.call(this),n.sm=e,n.stanzas={BOSH:t.getDefinition("body","http://jabber.org/protocol/httpbind"),StreamError:t.getStreamError()},n.sendQueue=[],n.requests=[],n.maxRequests=void 0,n.sid="",n.authenticated=!1,n.on("raw:incoming",function(e){if(""!==(e=e.trim())){var i,r;try{i=t.parse(e,n.stanzas.BOSH)}catch(e){return r=new n.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",r,e),n.send(r),n.disconnect()}n.hasStream||(n.hasStream=!0,n.stream={id:i.sid||n.sid,lang:i.lang||"en",version:i.version||"1.0",to:i.to,from:i.from},n.sid=i.sid||n.sid,n.maxRequests=i.requests||n.maxRequests),i.payload.forEach(function(e){e.lang||(e.lang=n.stream.lang),n.emit("stream:data",e)}),"terminate"===i.type&&(n.rid=void 0,n.sid=void 0,n.emit("bosh:terminate",i),n.emit("stream:end"),n.emit("disconnected",n))}})}a.inherits(p,u),p.prototype.connect=function(e){if(this.config=r({rid:Math.ceil(9999999999*Math.random()),wait:30,maxRetries:5},e),this.hasStream=!1,this.sm.started=!1,this.url=e.boshURL,this.sid=this.config.sid,this.rid=this.config.rid,this.requests=[],this.sid)return this.hasStream=!0,this.stream={},this.emit("connected",this),this.emit("session:prebind",this.config.jid),void this.emit("session:started");this.rid++,this.request(new this.stanzas.BOSH({version:this.config.version||"1.0",to:this.config.server,lang:this.config.lang||"en",wait:this.config.wait,ver:"1.6",hold:1}))},p.prototype.disconnect=function(){this.hasStream?(this.rid++,this.request(new this.stanzas.BOSH({type:"terminate"}))):(this.stream=void 0,this.sid=void 0,this.rid=void 0,this.emit("disconnected",this))},p.prototype.restart=function(){this.rid++,this.request(new this.stanzas.BOSH({to:this.config.server,lang:this.config.lang||"en",restart:"true"}))},p.prototype.send=function(e){this.hasStream&&(this.sendQueue.push(e),t.nextTick(this.longPoll.bind(this)))},p.prototype.longPoll=function(){var e=!this.maxRequests||this.requests.length<this.maxRequests,t=!this.maxRequests||this.sendQueue.length>0&&this.requests.length<this.maxRequests;if(this.sid&&(e||t)){var n=this.sendQueue;this.sendQueue=[],this.rid++,this.request(new this.stanzas.BOSH({payload:n}))}},p.prototype.request=function(e){var n=this,r={id:n.rid,request:null};e.rid=n.rid,e.sid=n.sid;var a=new i(e.toString(),"utf8").toString();n.emit("raw:outgoing",a),n.requests.push(r);var s=c({uri:n.url,body:a,method:"POST",strictSSL:!0,headers:{"Content-Type":"text/xml"}},1.5*n.config.wait,this.config.maxRetries).catch(function(e){n.hasStream=!1;var t=new n.stanzas.StreamError({condition:"connection-timeout"});n.emit("stream:error",t,e),n.disconnect()}).then(function(a){n.requests=o(n.requests,function(e){return e.id!==r.id}),a&&n.emit("raw:incoming",new i(a,"utf8").toString()),n.hasStream&&"terminate"!==e.type&&!n.requests.length&&n.authenticated&&t.nextTick(function(){t.nextTick(n.longPoll.bind(n))})});return r.request=s,s},e.exports=p}).call(this,n(1085),n(1053).Buffer)},1786:function(e,t){e.exports=function(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[++r]=a)}return o}},1787:function(e,t,n){var i=n(1192),r=n(1788),o=n(1216),a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",p="[object Error]",f="[object Number]",l="[object Object]",d="[object RegExp]",m="[object String]";var h=Object.prototype,b=h.hasOwnProperty,g=h.toString;function v(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=function e(t,n,h,y,S,x){return t===n||(null==t||null==n||!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(t)&&!function(e){return!!e&&"object"==typeof e}(n)?t!=t&&n!=n:function(e,t,n,h,y,S,x){var _=i(e),N=i(t),E=s,A=s;_||((E=g.call(e))==a?E=l:E!=l&&(_=r(e))),N||((A=g.call(t))==a?A=l:A!=l&&(N=r(t)));var O=E==l,j=A==l,T=E==A;if(T&&!_&&!O)return function(e,t,n){switch(n){case u:case c:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case f:return e!=+e?t!=+t:e==+t;case d:case m:return e==t+""}return!1}(e,t,E);if(!y){var I=O&&b.call(e,"__wrapped__"),R=j&&b.call(t,"__wrapped__");if(I||R)return n(I?e.value():e,R?t.value():t,h,y,S,x)}if(!T)return!1;S||(S=[]),x||(x=[]);for(var w=S.length;w--;)if(S[w]==e)return x[w]==t;S.push(e),x.push(t);var C=(_?function(e,t,n,i,r,o,a){var s=-1,u=e.length,c=t.length;if(u!=c&&!(r&&c>u))return!1;for(;++s<u;){var p=e[s],f=t[s],l=i?i(r?f:p,r?p:f,s):void 0;if(void 0!==l){if(l)continue;return!1}if(r){if(!v(t,function(e){return p===e||n(p,e,i,r,o,a)}))return!1}else if(p!==f&&!n(p,f,i,r,o,a))return!1}return!0}:function(e,t,n,i,r,a,s){var u=o(e),c=u.length,p=o(t).length;if(c!=p&&!r)return!1;for(var f=c;f--;){var l=u[f];if(!(r?l in t:b.call(t,l)))return!1}for(var d=r;++f<c;){l=u[f];var m=e[l],h=t[l],g=i?i(r?h:m,r?m:h,l):void 0;if(!(void 0===g?n(m,h,i,r,a,s):g))return!1;d||(d="constructor"==l)}if(!d){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0})(e,t,n,h,y,S,x);return S.pop(),x.pop(),C}(t,n,e,h,y,S,x))}},1788:function(e,t){var n=9007199254740991,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var r=Object.prototype.toString;e.exports=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!!i[r.call(e)]}},1789:function(e,t,n){var i=n(1216);e.exports=function(e){e=function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?e:Object(e)}(e);for(var t=-1,n=i(e),r=n.length,o=Array(r);++t<r;){var a=n[t];o[t]=[a,e[a]]}return o}},1790:function(e,t,n){var i=n(1461);e.exports=function(e,t){var n=[];return i(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}},1791:function(e,t,n){"use strict";e.exports=function(e){e.use(n(1792)),e.use(n(1799)),e.use(n(1800)),e.use(n(1801)),e.use(n(1802)),e.use(n(1803)),e.use(n(1804)),e.use(n(1805)),e.use(n(1806)),e.use(n(1807)),e.use(n(1808)),e.use(n(1809)),e.use(n(1810)),e.use(n(1811)),e.use(n(1812)),e.use(n(1813)),e.use(n(1814)),e.use(n(1815)),e.use(n(1816)),e.use(n(1817)),e.use(n(1818)),e.use(n(1819)),e.use(n(1834)),e.use(n(1835)),e.use(n(1836)),e.use(n(1837)),e.use(n(1838)),e.use(n(1839)),e.use(n(1840)),e.use(n(1841)),e.use(n(1842)),e.use(n(1843)),e.use(n(1844)),e.use(n(1845)),e.use(n(1846)),e.use(n(1847)),e.use(n(1848)),e.use(n(1849)),e.use(n(1850)),e.use(n(1851)),e.use(n(1852)),e.use(n(1853)),e.use(n(1854)),e.use(n(1855)),e.use(n(1856))}},1792:function(e,t,n){"use strict";(function(t){var i=n(1191),r=n(1793),o=n(1087).JID,a=n(1336);function s(e,n){var o="",s=e.features.sort(),u=[],c={},p=[];i(e.identities,function(e){u.push([e.category||"",e.type||"",e.lang||"",e.name||""].join("/"))}),u.sort();var f=u.length,l=s.length;if(u=r(u,!0),l!==(s=r(s,!0)).length||f!==u.length)return!1;o+=u.join("<")+"<",o+=s.join("<")+"<";var d=!1;if(i(e.extensions,function(e){for(var t=e.fields,n=0,i=t.length;n<i;n++)if("FORM_TYPE"===t[n].name&&"hidden"===t[n].type){var r=t[n].value;return c[r]?void(d=!0):(c[r]=e,void p.push(r))}}),d)return!1;p.sort(),i(p,function(e){var t=c[e],n={},r=[];o+="<"+e,i(t.fields,function(e){var t=e.name;if("FORM_TYPE"!==t){var i=e.value||"";"object"!=typeof i&&(i=i.split("\n")),n[t]=i.sort(),r.push(t)}}),r.sort(),i(r,function(e){o+="<"+e,i(n[e],function(e){o+="<"+e})})});var m=a.createHash(n).update(new t(o,"utf8")).digest("base64"),h=4-m.length%4;4===h&&(h=0);for(var b=0;b<h;b++)m+="=";return m}function u(e,t,n){var i=s(e,t);return i&&i===n}function c(){this.features={},this.identities={},this.extensions={},this.items={},this.caps={}}c.prototype={constructor:{value:c},addFeature:function(e,t){t=t||"",this.features[t]||(this.features[t]=[]),this.features[t].push(e)},addIdentity:function(e,t){t=t||"",this.identities[t]||(this.identities[t]=[]),this.identities[t].push(e)},addItem:function(e,t){t=t||"",this.items[t]||(this.items[t]=[]),this.items[t].push(e)},addExtension:function(e,t){t=t||"",this.extensions[t]||(this.extensions[t]=[]),this.extensions[t].push(e)}},e.exports=function(e){e.disco=new c(e),e.disco.addFeature("http://jabber.org/protocol/disco#info"),e.disco.addFeature("http://jabber.org/protocol/disco#items"),e.disco.addIdentity({category:"client",type:"web"}),e.registerFeature("caps",100,function(t,n){this.emit("disco:caps",{from:new o(e.jid.domain||e.config.server),caps:t.caps}),this.features.negotiated.caps=!0,n()}),e.getDiscoInfo=function(e,t,n){return this.sendIq({to:e,type:"get",discoInfo:{node:t}},n)},e.getDiscoItems=function(e,t,n){return this.sendIq({to:e,type:"get",discoItems:{node:t}},n)},e.updateCaps=function(){var t=this.config.capsNode||"https://stanza.io",n=JSON.parse(JSON.stringify({identities:this.disco.identities[""],features:this.disco.features[""],extensions:this.disco.extensions[""]})),i=s(n,"sha-1");return this.disco.caps={node:t,hash:"sha-1",ver:i},t=t+"#"+i,this.disco.features[t]=n.features,this.disco.identities[t]=n.identities,this.disco.extensions[t]=n.extensions,e.getCurrentCaps()},e.getCurrentCaps=function(){var t=e.disco.caps;if(!t.ver)return{ver:null,discoInfo:null};var n=t.node+"#"+t.ver;return{ver:t.ver,discoInfo:{identities:e.disco.identities[n],features:e.disco.features[n],extensions:e.disco.extensions[n]}}},e.on("presence",function(t){t.caps&&e.emit("disco:caps",t)}),e.on("iq:get:discoInfo",function(t){var n=t.discoInfo.node||"",i=t.discoInfo.node||"";n===e.disco.caps.node+"#"+e.disco.caps.ver&&(i=n,n=""),e.sendIq(t.resultReply({discoInfo:{node:i,identities:e.disco.identities[n]||[],features:e.disco.features[n]||[],extensions:e.disco.extensions[n]||[]}}))}),e.on("iq:get:discoItems",function(t){var n=t.discoItems.node;e.sendIq(t.resultReply({discoItems:{node:n,items:e.disco.items[n]||[]}}))}),e.verifyVerString=u,e.generateVerString=s,e.updateCaps()}}).call(this,n(1053).Buffer)},1793:function(e,t,n){var i=n(1477),r=n(1794),o=n(1463);e.exports=function(e,t,n,a){return e&&e.length?(null!=t&&"boolean"!=typeof t&&(n=o(e,t,a=n)?void 0:t,t=!1),n=null==n?n:i(n,a,3),t?function(e,t){for(var n,i=-1,r=e.length,o=-1,a=[];++i<r;){var s=e[i],u=t?t(s,i,e):s;i&&n===u||(n=u,a[++o]=s)}return a}(e,n):r(e,n)):[]}},1794:function(e,t,n){var i=n(1795),r=n(1796),o=n(1797),a=200;e.exports=function(e,t){var n=-1,s=i,u=e.length,c=!0,p=c&&u>=a,f=p?o():null,l=[];f?(s=r,c=!1):(p=!1,f=t?[]:l);e:for(;++n<u;){var d=e[n],m=t?t(d,n,e):d;if(c&&d==d){for(var h=f.length;h--;)if(f[h]===m)continue e;t&&f.push(m),l.push(d)}else s(f,m,0)<0&&((t||p)&&f.push(m),l.push(d))}return l}},1795:function(e,t){e.exports=function(e,t,n){if(t!=t)return function(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!=o)return r}return-1}(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}},1796:function(e,t){e.exports=function(e,t){var n=e.data;return("string"==typeof t||function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(t)?n.set.has(t):n.hash[t])?0:-1}},1797:function(e,t,n){(function(t){var i=n(1462),r=i(t,"Set"),o=i(Object,"create");function a(e){var t=e?e.length:0;for(this.data={hash:o(null),set:new r};t--;)this.push(e[t])}a.prototype.push=function(e){var t=this.data;"string"==typeof e||function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?t.set.add(e):t.hash[e]=!0},e.exports=function(e){return o&&r?new a(e):null}}).call(this,n(55))},1798:function(e,t){e.exports=function(){return["sha1","sha224","sha256","sha384","sha512","md5","rmd160"]}},1799:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:attention:0"),e.getAttention=function(t,n){(n=n||{}).to=t,n.type="headline",n.attention=!0,e.sendMessage(n)},e.on("message",function(t){t.attention&&e.emit("attention",t)})}},1800:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:avatar:metadata+notify"),e.on("pubsub:event",function(t){t.event.updated&&"urn:xmpp:avatar:metadata"===t.event.updated.node&&e.emit("avatar",{jid:t.from,source:"pubsub",avatars:t.event.updated.published[0].avatars})}),e.on("presence",function(t){t.avatarId&&e.emit("avatar",{jid:t.from,source:"vcard",avatars:[{id:t.avatarId}]})}),e.publishAvatar=function(e,t,n){return this.publish("","urn:xmpp:avatar:data",{id:e,avatarData:t},n)},e.useAvatars=function(e,t){return this.publish("","urn:xmpp:avatar:metadata",{id:"current",avatars:e},t)},e.getAvatar=function(e,t,n){return this.getItem(e,"urn:xmpp:avatar:data",t,n)}}},1801:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:blocking"),e.block=function(t,n){return e.sendIq({type:"set",block:{jids:[t]}},n)},e.unblock=function(t,n){return e.sendIq({type:"set",unblock:{jids:[t]}},n)},e.getBlocked=function(t){return e.sendIq({type:"get",blockList:!0},t)},e.on("iq:set:block",function(t){e.emit("block",{jids:t.block.jids||[]}),e.sendIq(t.resultReply())}),e.on("iq:set:unblock",function(t){e.emit("unblock",{jids:t.unblock.jids||[]}),e.sendIq(t.resultReply())})}},1802:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:bob"),e.getBits=function(t,n,i){return e.sendIq({to:t,type:"get",bob:{cid:n}},i)}}},1803:function(e,t,n){"use strict";var i=n(1193),r=n(1476),o=n(1087).JID;e.exports=function(e){e.getBookmarks=function(e){return this.getPrivateData({bookmarks:!0},e)},e.setBookmarks=function(e,t){return this.setPrivateData({bookmarks:e},t)},e.addBookmark=function(t,n){return t.jid=new o(t.jid),this.getBookmarks().then(function(n){var o=n.privateStorage.bookmarks.conferences||[],a=r(o,function(e){return e.jid.bare===t.jid.bare});return a.length?i(a[0],t):o.push(t),e.setBookmarks({conferences:o})}).then(function(e){return n&&n(null,e),e},function(e){if(!n)throw e;n(e)})},e.removeBookmark=function(t,n){return t=new o(t),this.getBookmarks().then(function(n){var i=n.privateStorage.bookmarks.conferences||[];return i=r(i,function(e){return t.bare!==e.jid.bare}),e.setBookmarks({conferences:i})}).then(function(e){n&&n(null,e)},function(e){if(!n)throw e;n(e)})}}},1804:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:carbons:2"),e.enableCarbons=function(e){return this.sendIq({type:"set",enableCarbons:!0},e)},e.disableCarbons=function(e){return this.sendIq({type:"set",disableCarbons:!0},e)},e.on("message",function(t){return t.carbonSent?e.emit("carbon:sent",t):t.carbonReceived?e.emit("carbon:received",t):void 0}),e.on("carbon:*",function(t,n){var i,r,o=t.split(":")[1];n.from.bare===e.jid.bare&&("received"===o?(i=n.carbonReceived.forwarded.message,r=n.carbonReceived.forwarded.delay):(i=n.carbonSent.forwarded.message,r=n.carbonSent.forwarded.delay),i.delay||(i.delay={stamp:r?r.stamp:new Date(Date.now())}),i.carbon=!0,i.from.bare===e.jid.bare?e.emit("message:sent",i):e.emit("message",i))})}},1805:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/chatstates");var t=["chat","groupchat","normal"];e.on("message",function(n){t.indexOf(n.type||"normal")<0||n.chatState&&(e.emit("chat:state",{to:n.to,from:n.from,chatState:n.chatState}),e.emit("chatState",{to:n.to,from:n.from,chatState:n.chatState}))})}},1806:function(e,t,n){"use strict";var i="http://jabber.org/protocol/commands";e.exports=function(e){e.disco.addFeature(i),e.disco.addItem({name:"Ad-Hoc Commands",node:i}),e.getCommands=function(t,n){return e.getDiscoItems(t,i,n)}}},1807:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:message-correct:0"),e.on("message",function(t){t.replace&&(e.emit("replace",t),e.emit("replace:"+t.id,t))})}},1808:function(e,t,n){"use strict";e.exports=function(e,t){var n=t.getDefinition("active","urn:xmpp:csi"),i=t.getDefinition("inactive","urn:xmpp:csi");e.registerFeature("clientStateIndication",400,function(e,t){this.features.negotiated.clientStateIndication=!0,t()}),e.markActive=function(){this.features.negotiated.clientStateIndication&&this.send(new n)},e.markInactive=function(){this.features.negotiated.clientStateIndication&&this.send(new i)}}},1809:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("jabber:x:data"),e.disco.addFeature("urn:xmpp:media-element"),e.disco.addFeature("http://jabber.org/protocol/xdata-validate"),e.disco.addFeature("http://jabber.org/protocol/xdata-layout"),e.on("message",function(t){t.form&&e.emit("dataform",t)})}},1810:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:delay")}},1811:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("jid\\20escaping")}},1812:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:extdisco:1"),e.getServices=function(e,t,n){return this.sendIq({type:"get",to:e,services:{type:t}},n)},e.getServiceCredentials=function(e,t,n){return this.sendIq({type:"get",to:e,credentials:{service:{host:t}}},n)}}},1813:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:forward:0")}},1814:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("http://jabber.org/protocol/geoloc"),e.disco.addFeature("http://jabber.org/protocol/geoloc+notify"),e.on("pubsub:event",function(t){t.event.updated&&"http://jabber.org/protocol/geoloc"===t.event.updated.node&&e.emit("geoloc",{jid:t.from,geoloc:t.event.updated.published[0].geoloc})}),e.publishGeoLoc=function(e,t){return this.publish("","http://jabber.org/protocol/geoloc",{geoloc:e},t)}}},1815:function(e,t,n){"use strict";var i=n(1336);e.exports=function(e){e.disco.addFeature("urn:xmpp:hashes:1"),i.getHashes().forEach(function(t){e.disco.addFeature("urn:xmpp:hash-function-text-names:"+t)})}},1816:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:idle:1")}},1817:function(e,t,n){"use strict";e.exports=function(e){e.goInvisible=function(e){return this.sendIq({type:"set",invisible:!0},e)},e.goVisible=function(e){return this.sendIq({type:"set",visible:!0},e)}}},1818:function(e,t,n){"use strict";e.exports=function(e){e.prepJID=function(t,n){return e.sendIq({to:e.jid.domain,type:"get",jidPrep:t},n)}}},1819:function(e,t,n){"use strict";(function(t){var i=n(1820),r=r||t;e.exports=function(e){var t=e.jingle=new i;if(e.supportedICEServiceTypes={stun:!0,stuns:!0,turn:!0,turns:!0},e.disco.addFeature("urn:xmpp:jingle:1"),r.RTCPeerConnection){["urn:xmpp:jingle:apps:rtp:1","urn:xmpp:jingle:apps:rtp:audio","urn:xmpp:jingle:apps:rtp:video","urn:xmpp:jingle:apps:rtp:rtcb-fb:0","urn:xmpp:jingle:apps:rtp:rtp-hdrext:0","urn:xmpp:jingle:apps:rtp:ssma:0","urn:xmpp:jingle:apps:dtls:0","urn:xmpp:jingle:apps:grouping:0","urn:xmpp:jingle:apps:file-transfer:3","urn:xmpp:jingle:transports:ice-udp:1","urn:xmpp:jingle:transports:dtls-sctp:1","urn:ietf:rfc:3264","urn:ietf:rfc:5576","urn:ietf:rfc:5888"].forEach(function(t){e.disco.addFeature(t)})}["outgoing","incoming","accepted","terminated","ringing","mute","unmute","hold","resumed"].forEach(function(n){t.on(n,function(t,i){e.emit("jingle:"+n,t,i)})}),t.on("createdSession",function(t){e.emit("jingle:created",t)}),t.on("peerStreamAdded",function(t,n){e.emit("jingle:remotestream:added",t,n)}),t.on("peerStreamRemoved",function(t,n){e.emit("jingle:remotestream:removed",t,n)}),t.on("send",function(t){e.sendIq(t,function(t){t&&e.emit("jingle:error",t)})}),e.on("session:bound","jingle",function(e){t.jid=e,t.selfID=e.full}),e.on("iq:set:jingle","jingle",function(e){t.process(e)}),e.on("unavailable","jingle",function(e){var n=e.from.full;t.endPeerSessions(n,!0)}),e.discoverICEServers=function(t){return this.getServices(e.config.server).then(function(t){for(var n=t.services.services,i=[],r=0;r<n.length;r++){var o=n[r],a={};e.supportedICEServiceTypes[o.type]&&("stun"===o.type||"stuns"===o.type?(a.urls=o.type+":"+o.host,o.port&&(a.urls+=":"+o.port),i.push(a),e.jingle.addICEServer(a)):"turn"!==o.type&&"turns"!==o.type||(a.urls=o.type+":"+o.host,o.port&&(a.urls+=":"+o.port),o.transport&&"udp"!==o.transport&&(a.urls+="?transport="+o.transport),o.username&&(a.username=o.username),o.password&&(a.credential=o.password),i.push(a),e.jingle.addICEServer(a)))}return i}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})}}}).call(this,n(55))},1820:function(e,t,n){var i=n(1090),r=n(1821),o=n(1134),a=n(1337),s=n(1825),u=n(1831);function c(e){for(var t in o.call(this),e=e||{},this.jid=e.jid,this.selfID=e.selfID||this.jid&&this.jid.full||this.jid||"",this.sessions={},this.peers={},this.prepareSession=e.prepareSession||function(e){return e.applicationTypes.indexOf("rtp")>=0?new s(e):e.applicationTypes.indexOf("filetransfer")>=0?new u(e):void 0},this.performTieBreak=e.performTieBreak||function(e,t){var n=t.jingle.contents.map(function(e){if(e.application)return e.application.applicationType});return r(e.pendingApplicationTypes,n).length>0},this.config={debug:!1,peerConnectionConfig:{iceServers:e.iceServers||[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]},media:{audio:!0,video:!0}},e)this.config[t]=e[t];this.iceServers=this.config.peerConnectionConfig.iceServers}i.inherits(c,o),c.prototype.addICEServer=function(e){"string"==typeof e&&(e={urls:e}),this.iceServers.push(e)},c.prototype.addSession=function(e){var t=this,n=e.sid,i=e.peerID;return this.sessions[n]=e,this.peers[i]||(this.peers[i]=[]),this.peers[i].push(e),e.on("terminated",function(){var r=t.peers[i]||[];r.length&&r.splice(r.indexOf(e),1),delete t.sessions[n]}),e.on("*",function(n,i,r,o){if("send"===n){var a=i.jingle&&i.jingle.action;e.isInitiator&&"session-initiate"===a&&t.emit("outgoing",e)}!t.config.debug||"log:debug"!==n&&"log:error"!==n||console.log("Jingle:",i,r,o),0!==n.indexOf("change")&&t.emit(n,i,r,o)}),this.emit("createdSession",e),e},c.prototype.createMediaSession=function(e,t,n){var i=new s({sid:t,peer:e,initiator:!0,stream:n,parent:this,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints});return this.addSession(i),i},c.prototype.createFileTransferSession=function(e,t){var n=new u({sid:t,peer:e,initiator:!0,parent:this,iceServers:this.iceServers});return this.addSession(n),n},c.prototype.endPeerSessions=function(e,t,n){e=e.full||e;var i=this.peers[e]||[];delete this.peers[e],i.forEach(function(e){e.end(t||"gone",n)})},c.prototype.endAllSessions=function(e,t){var n=this;Object.keys(this.peers).forEach(function(i){n.endPeerSessions(i,e,t)})},c.prototype._createIncomingSession=function(e,t){var n;return this.prepareSession&&(n=this.prepareSession(e,t)),n||(n=new a(e)),this.addSession(n),n},c.prototype._sendError=function(e,t,n){n.type||(n.type="cancel"),this.emit("send",{to:e,id:t,type:"error",error:n})},c.prototype._log=function(e,t){this.emit("log:"+e,t)},c.prototype.process=function(e){var t=this,n=e.jingle?e.jingle.sid:null,i=this.sessions[n]||null,r=e.id,o=e.from.full||e.from;if("error"===e.type){var a=e.error&&"tie-break"===e.error.jingleCondition;return i&&i.pending&&a?i.end("alternative-session",!0):(i&&(i.pendingAction=!1),this.emit("error",e))}if("result"!==e.type){var s=e.jingle.action,u=e.jingle.contents||[],c=u.map(function(e){if(e.application)return e.application.applicationType}),p=u.map(function(e){if(e.transport)return e.transport.transportType});if("session-initiate"!==s){if(!i)return this._log("error","Unknown session",n),this._sendError(o,r,{condition:"item-not-found",jingleCondition:"unknown-session"});if(i.peerID!==o||i.ended)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(o,r,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===s&&!i.pending)return this._log("error","Tried to accept session twice",n),this._sendError(o,r,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==s&&s===i.pendingAction&&(this._log("error","Tie break during pending request"),i.isInitiator))return this._sendError(o,r,{condition:"conflict",jingleCondition:"tie-break"})}else if(i){if(i.peerID!==o)return this._log("error","Duplicate sid from new sender"),this._sendError(o,r,{condition:"service-unavailable"});if(!i.pending)return this._log("error","Someone is doing this wrong"),this._sendError(o,r,{condition:"unexpected-request",jingleCondition:"out-of-order"});if(this.selfID>i.peerID&&this.performTieBreak(i,e))return this._log("error","Tie break new session because of duplicate sids"),this._sendError(o,r,{condition:"conflict",jingleCondition:"tie-break"})}else if(this.peers[o]&&this.peers[o].length)for(var f=0,l=this.peers[o].length;f<l;f++){var d=this.peers[o][f];if(d&&d.pending&&d.sid>n&&this.performTieBreak(d,e))return this._log("info","Tie break session-initiate"),this._sendError(o,r,{condition:"conflict",jingleCondition:"tie-break"})}if("session-initiate"===s){if(!u.length)return t._sendError(o,r,{condition:"bad-request"});i=this._createIncomingSession({sid:n,peer:e.from,peerID:o,initiator:!1,parent:this,applicationTypes:c,transportTypes:p,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints},e)}i.process(s,e.jingle,function(n){n?(t._log("error","Could not process request",e,n),t._sendError(o,r,n)):(t.emit("send",{to:o,id:r,type:"result"}),"session-initiate"===s&&t.emit("incoming",i))})}else i&&(i.pendingAction=!1)},e.exports=c},1821:function(e,t){function n(e,t){for(var n=[],r=0;r<e.length;r++)i(t,e[r])>-1&&n.push(e[r]);return n}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}e.exports=n,n.big=function(e,t){for(var n=[],i={},r=0;r<t.length;r++)i[t[r]]=!0;for(r=0;r<e.length;r++)i[e[r]]&&n.push(e[r]);return n}},1822:function(e,t,n){var i=n(1823),r=n(1824),o=r;o.v1=i,o.v4=r,e.exports=o},1823:function(e,t,n){var i,r,o=n(1478),a=n(1479),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,p=t||[],f=(e=e||{}).node||i,l=void 0!==e.clockseq?e.clockseq:r;if(null==f||null==l){var d=o();null==f&&(f=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==l&&(l=r=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:u+1,b=m-s+(h-u)/1e4;if(b<0&&void 0===e.clockseq&&(l=l+1&16383),(b<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,u=h,r=l;var g=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;p[c++]=g>>>24&255,p[c++]=g>>>16&255,p[c++]=g>>>8&255,p[c++]=255&g;var v=m/4294967296*1e4&268435455;p[c++]=v>>>8&255,p[c++]=255&v,p[c++]=v>>>24&15|16,p[c++]=v>>>16&255,p[c++]=l>>>8|128,p[c++]=255&l;for(var y=0;y<6;++y)p[c+y]=f[y];return t||a(p)}},1824:function(e,t,n){var i=n(1478),r=n(1479);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||r(a)}},1825:function(e,t,n){var i=n(1090),r=n(1338),o=n(1337),a=n(1480);function s(e,t){"rtp"===e.application.applicationType&&(delete e.transport,delete e.application.payloads,delete e.application.headerExtensions,e.application.mux=!1,e.application.sources&&(e.application.sources=e.application.sources.filter(function(e){return!(e.parameters.length<2)&&t.id===e.parameters[1].value.split(" ")[0]})),e.application.sourceGroups&&(e.application.sourceGroups=e.application.sourceGroups.filter(function(t){for(var n=!1,i=0;i<e.application.sources.length;i++)if(e.application.sources[i].ssrc===t.sources[0]){n=!0;break}return n})))}function u(e){(e.application.sources||[]).forEach(function(e){e.parameters=e.parameters.filter(function(e){return!("mslabel"===e.key||"label"===e.key)})})}function c(e){o.call(this,e),this.pc=new a({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this,e)),this.pc.on("endOfCandidates",this.onIceEndOfCandidates.bind(this,e)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this)),this.pc.on("addStream",this.onAddStream.bind(this)),this.pc.on("removeStream",this.onRemoveStream.bind(this)),this.pc.on("addChannel",this.onAddChannel.bind(this)),this.pc.on("addTrack",this.onAddTrack.bind(this)),this.pc.on("removeTrack",this.onRemoveTrack.bind(this)),e.stream&&this.addStream(e.stream),this._ringing=!1}i.inherits(c,o),Object.defineProperties(c.prototype,{ringing:{get:function(){return this._ringing},set:function(e){e!==this._ringing&&(this._ringing=e,this.emit("change:ringing",e))}},streams:{get:function(){return"closed"!==this.pc.signalingState?this.pc.getRemoteStreams():[]}}}),c.prototype=r(c.prototype,{start:function(e,t){var n=this;this.state="pending",t=t||function(){},this.pc.isInitiator=!0,this.pc.offer(e,function(i,r){if(i)return n._log("error","Could not create WebRTC offer",i),n.end("failed-application",!0);e&&e.mandatory&&r.jingle.contents.forEach(function(t){var n=t.application.media;t.description&&"rtp"===t.application.applicationType&&(e.mandatory.OfferToReceiveAudio||"audio"!==n||(t.senders="initiator"),e.mandatory.OfferToReceiveVideo||"video"!==n||(t.senders="initiator"))}),r.jingle.contents.forEach(u),n.send("session-initiate",r.jingle),t()})},accept:function(e,t){var n=this;1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||function(){},e=e||{},n.constraints=e.constraints||{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(n.constraints,function(e,i){if(e)return n._log("error","Could not create WebRTC answer",e),n.end("failed-application");i.jingle.contents.forEach(u),n.send("session-accept",i.jingle),t()})},end:function(e,t){var n=this;this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),this.pc.close(),o.prototype.end.call(this,e,t)},ring:function(){this._log("info","Ringing on incoming session"),this.ringing=!0,this.send("session-info",{ringing:!0})},mute:function(e,t){this._log("info","Muting",t),this.send("session-info",{mute:{creator:e,name:t}})},unmute:function(e,t){this._log("info","Unmuting",t),this.send("session-info",{unmute:{creator:e,name:t}})},hold:function(){this._log("info","Placing on hold"),this.send("session-info",{hold:!0})},resume:function(){this._log("info","Resuming from hold"),this.send("session-info",{active:!0})},addStream:function(e,t,n){var i=this;n=n||function(){},this.pc.addStream(e),t&&("object"==typeof t&&(i.constraints=t),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(t){if(t)return i._log("error","Could not create offer for adding new stream"),n(t);i.pc.answer(i.constraints,function(t,r){if(t)return i._log("error","Could not create answer for adding new stream"),n(t);r.jingle.contents.forEach(function(t){s(t,e)}),r.jingle.contents=r.jingle.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete r.jingle.groups,i.send("source-add",r.jingle),n()})}))},addStream2:function(e,t){this.addStream(e,!0,t)},removeStream:function(e,t,n){var i=this;if(n=n||function(){},t){"object"==typeof t&&(i.constraints=t);var r=this.pc.localDescription;r.contents.forEach(function(t){s(t,e)}),r.contents=r.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete r.groups,this.send("source-remove",r),this.pc.removeStream(e),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process offer for removing stream"),n(e);i.pc.answer(i.constraints,function(e){if(e)return i._log("error","Could not process answer for removing stream"),n(e);n()})})}else this.pc.removeStream(e)},removeStream2:function(e,t){this.removeStream(e,!0,t)},switchStream:function(e,t,n){var i=this;n=n||function(){};var r=this.pc.localDescription;r.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),this.pc.removeStream(e),this.send("source-remove",r),this.pc.addStream(t),this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process offer for switching streams"),n(e);i.pc.answer(i.constraints,function(e,t){if(e)return i._log("error","Could not process answer for switching streams"),n(e);t.jingle.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),i.send("source-add",t.jingle),n()})})},onIceCandidate:function(e,t){this._log("info","Discovered new ICE candidate",t.jingle),this.send("transport-info",t.jingle),e.signalEndOfCandidates&&(this.lastCandidate=t)},onIceEndOfCandidates:function(e){if(this._log("info","ICE end of candidates"),e.signalEndOfCandidates){var t=this.lastCandidate.jingle;t.contents[0].transport={transportType:t.contents[0].transport.transportType,gatheringComplete:!0},this.lastCandidate=null,this.send("transport-info",t)}},onIceStateChange:function(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onAddStream:function(e){this._log("info","Stream added"),this.emit("peerStreamAdded",this,e.stream)},onRemoveStream:function(e){this._log("info","Stream removed"),this.emit("peerStreamRemoved",this,e.stream)},onAddTrack:function(e){this._log("info","Track added"),this.emit("peerTrackAdded",this,e.track,e.streams[0])},onRemoveTrack:function(e){this._log("info","Track removed"),this.emit("peerTrackRemoved",this,e.track,e.stream)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1,this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer"),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer"),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){var n=this;this._log("info","Terminating session"),this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),this.pc.close(),o.prototype.end.call(this,e.reason,!0),t()},onSessionInfo:function(e,t){return e.ringing?(this._log("info","Outgoing session is ringing"),this.ringing=!0,this.emit("ringing",this),t()):e.hold?(this._log("info","On hold"),this.emit("hold",this),t()):e.active?(this._log("info","Resuming from hold"),this.emit("resumed",this),t()):e.mute?(this._log("info","Muting",e.mute),this.emit("mute",this,e.mute),t()):e.unmute?(this._log("info","Unmuting",e.unmute),this.emit("unmute",this,e.unmute),t()):void t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})},onSourceAdd:function(e,t){var n=this;this._log("info","Adding new stream source");var i=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var r=t.application,o=r.sources||[],a=r.sourceGroups||[];e.contents&&e.contents.forEach(function(e){if(t.name===e.name){var r=e.application,s=r.sources||[];o=o.concat(s),i.contents[n].application.sources=JSON.parse(JSON.stringify(o));var u=r.sourceGroups||[];a=a.concat(u),i.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(a))}})}),this.pc.handleOffer({type:"offer",jingle:i},function(e){if(e)return n._log("error","Error adding new stream source"),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error adding new stream source"),t({condition:"general-error"});t()})})},onSourceRemove:function(e,t){var n=this;this._log("info","Removing stream source");var i=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var r=t.application,o=r.sources||[],a=r.sourceGroups||[];e.contents.forEach(function(e){if(t.name===e.name){var r,s,u,c,p=e.application,f=p.sources||[],l=p.sourceGroups||[];for(s=0;s<f.length;s++){for(r=-1,u=0;u<o.length;u++)if(f[s].ssrc===o[u].ssrc){r=u;break}r>-1&&(o.splice(r,1),i.contents[n].application.sources=JSON.parse(JSON.stringify(o)))}for(s=0;s<l.length;s++){for(r=-1,u=0;u<a.length;u++)if(l[s].semantics===a[u].semantics&&l[s].sources.length===a[u].sources.length){var d=!0;for(c=0;c<l[s].sources.length;c++)if(l[s].sources[c]!==a[u].sources[c]){d=!1;break}if(d){r=u;break}}r>-1&&(a.splice(r,1),i.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(a)))}}})}),this.pc.handleOffer({type:"offer",jingle:i},function(e){if(e)return n._log("error","Error removing stream source"),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error removing stream source"),t({condition:"general-error"});t()})})},onAddChannel:function(e){this.emit("addChannel",e)}}),e.exports=c},1826:function(e,t,n){var i=n(1827),r=n(1828);t.toIncomingSDPOffer=function(e){return i.toSessionSDP(e,{role:"responder",direction:"incoming"})},t.toOutgoingSDPOffer=function(e){return i.toSessionSDP(e,{role:"initiator",direction:"outgoing"})},t.toIncomingSDPAnswer=function(e){return i.toSessionSDP(e,{role:"initiator",direction:"incoming"})},t.toOutgoingSDPAnswer=function(e){return i.toSessionSDP(e,{role:"responder",direction:"outgoing"})},t.toIncomingMediaSDPOffer=function(e){return i.toMediaSDP(e,{role:"responder",direction:"incoming"})},t.toOutgoingMediaSDPOffer=function(e){return i.toMediaSDP(e,{role:"initiator",direction:"outgoing"})},t.toIncomingMediaSDPAnswer=function(e){return i.toMediaSDP(e,{role:"initiator",direction:"incoming"})},t.toOutgoingMediaSDPAnswer=function(e){return i.toMediaSDP(e,{role:"responder",direction:"outgoing"})},t.toCandidateSDP=i.toCandidateSDP,t.toMediaSDP=i.toMediaSDP,t.toSessionSDP=i.toSessionSDP,t.toIncomingJSONOffer=function(e,t){return r.toSessionJSON(e,{role:"responder",direction:"incoming",creators:t})},t.toOutgoingJSONOffer=function(e,t){return r.toSessionJSON(e,{role:"initiator",direction:"outgoing",creators:t})},t.toIncomingJSONAnswer=function(e,t){return r.toSessionJSON(e,{role:"initiator",direction:"incoming",creators:t})},t.toOutgoingJSONAnswer=function(e,t){return r.toSessionJSON(e,{role:"responder",direction:"outgoing",creators:t})},t.toIncomingMediaJSONOffer=function(e,t){return r.toMediaJSON(e,{role:"responder",direction:"incoming",creator:t})},t.toOutgoingMediaJSONOffer=function(e,t){return r.toMediaJSON(e,{role:"initiator",direction:"outgoing",creator:t})},t.toIncomingMediaJSONAnswer=function(e,t){return r.toMediaJSON(e,{role:"initiator",direction:"incoming",creator:t})},t.toOutgoingMediaJSONAnswer=function(e,t){return r.toMediaJSON(e,{role:"responder",direction:"outgoing",creator:t})},t.toCandidateJSON=r.toCandidateJSON,t.toMediaJSON=r.toMediaJSON,t.toSessionJSON=r.toSessionJSON},1827:function(e,t,n){var i=n(1481);t.toSessionSDP=function(e,n){n.role,n.direction;var i=["v=0","o=- "+(n.sid||e.sid||Date.now())+" "+(n.time||Date.now())+" IN IP4 0.0.0.0","s=-","t=0 0"],r=e.contents||[],o=!1;return r.forEach(function(e){e.application.sources&&e.application.sources.length&&(o=!0)}),o&&i.push("a=msid-semantic: WMS *"),(e.groups||[]).forEach(function(e){i.push("a=group:"+e.semantics+" "+e.contents.join(" "))}),r.forEach(function(e){i.push(t.toMediaSDP(e,n))}),i.join("\r\n")+"\r\n"},t.toMediaSDP=function(e,n){var r=[],o=n.role||"initiator",a=n.direction||"outgoing",s=e.application,u=e.transport,c=s.payloads||[],p=u&&u.fingerprints||[],f=[];if("datachannel"==s.applicationType?(f.push("application"),f.push("1"),f.push("DTLS/SCTP"),u.sctp&&u.sctp.forEach(function(e){f.push(e.number)})):(f.push(s.media),f.push("1"),p.length>0?f.push("UDP/TLS/RTP/SAVPF"):s.encryption&&s.encryption.length>0?f.push("RTP/SAVPF"):f.push("RTP/AVPF"),c.forEach(function(e){f.push(e.id)})),r.push("m="+f.join(" ")),r.push("c=IN IP4 0.0.0.0"),s.bandwidth&&s.bandwidth.type&&s.bandwidth.bandwidth&&r.push("b="+s.bandwidth.type+":"+s.bandwidth.bandwidth),"rtp"==s.applicationType&&r.push("a=rtcp:1 IN IP4 0.0.0.0"),u){u.ufrag&&r.push("a=ice-ufrag:"+u.ufrag),u.pwd&&r.push("a=ice-pwd:"+u.pwd);p.forEach(function(e){r.push("a=fingerprint:"+e.hash+" "+e.value),e.setup&&r.push("a=setup:"+e.setup)}),u.sctp&&u.sctp.forEach(function(e){r.push("a=sctpmap:"+e.number+" "+e.protocol+" "+e.streams)})}if("rtp"==s.applicationType&&r.push("a="+(i[o][a][e.senders]||"sendrecv")),r.push("a=mid:"+e.name),s.sources&&s.sources.length){var l={};s.sources.forEach(function(e){(e.parameters||[]).forEach(function(e){"msid"===e.key&&(l[e.value]=1)})}),1===(l=Object.keys(l)).length&&r.push("a=msid:"+l[0])}return s.mux&&r.push("a=rtcp-mux"),(s.encryption||[]).forEach(function(e){r.push("a=crypto:"+e.tag+" "+e.cipherSuite+" "+e.keyParams+(e.sessionParams?" "+e.sessionParams:""))}),s.googConferenceFlag&&r.push("a=x-google-flag:conference"),c.forEach(function(e){var t="a=rtpmap:"+e.id+" "+e.name+"/"+e.clockrate;if(e.channels&&"1"!=e.channels&&(t+="/"+e.channels),r.push(t),e.parameters&&e.parameters.length){var n=["a=fmtp:"+e.id],i=[];e.parameters.forEach(function(e){i.push((e.key?e.key+"=":"")+e.value)}),n.push(i.join(";")),r.push(n.join(" "))}e.feedback&&e.feedback.forEach(function(t){"trr-int"===t.type?r.push("a=rtcp-fb:"+e.id+" trr-int "+(t.value?t.value:"0")):r.push("a=rtcp-fb:"+e.id+" "+t.type+(t.subtype?" "+t.subtype:""))})}),s.feedback&&s.feedback.forEach(function(e){"trr-int"===e.type?r.push("a=rtcp-fb:* trr-int "+(e.value?e.value:"0")):r.push("a=rtcp-fb:* "+e.type+(e.subtype?" "+e.subtype:""))}),(s.headerExtensions||[]).forEach(function(e){r.push("a=extmap:"+e.id+(e.senders?"/"+i[o][a][e.senders]:"")+" "+e.uri)}),(s.sourceGroups||[]).forEach(function(e){r.push("a=ssrc-group:"+e.semantics+" "+e.sources.join(" "))}),(s.sources||[]).forEach(function(e){for(var t=0;t<e.parameters.length;t++){var n=e.parameters[t];r.push("a=ssrc:"+(e.ssrc||s.ssrc)+" "+n.key+(n.value?":"+n.value:""))}}),(u.candidates||[]).forEach(function(e){r.push(t.toCandidateSDP(e))}),r.join("\r\n")},t.toCandidateSDP=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"srflx"!==n&&"prflx"!==n&&"relay"!==n||e.relAddr&&e.relPort&&(t.push("raddr"),t.push(e.relAddr),t.push("rport"),t.push(e.relPort)),e.tcpType&&"TCP"==e.protocol.toUpperCase()&&(t.push("tcptype"),t.push(e.tcpType)),t.push("generation"),t.push(e.generation||"0"),"a=candidate:"+t.join(" ")}},1828:function(e,t,n){var i=n(1481),r=n(1829),o=Math.random();t._setIdCounter=function(e){o=e},t.toSessionJSON=function(e,n){var i,o=n.creators||[],a=n.role||"initiator",s=n.direction||"outgoing",u=e.split(/\r?\nm=/);for(i=1;i<u.length;i++)u[i]="m="+u[i],i!==u.length-1&&(u[i]+="\r\n");var c=u.shift()+"\r\n",p=r.lines(c),f={},l=[];for(i=0;i<u.length;i++)l.push(t.toMediaJSON(u[i],c,{role:a,direction:s,creator:o[i]||"initiator"}));f.contents=l;var d=r.findLines("a=group:",p);return d.length&&(f.groups=r.groups(d)),f},t.toMediaJSON=function(e,n,o){var a=o.creator||"initiator",s=o.role||"initiator",u=o.direction||"outgoing",c=r.lines(e),p=r.lines(n),f=r.mline(c[0]),l={creator:a,name:f.media,application:{applicationType:"rtp",media:f.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==f.media&&(l.application={applicationType:"datachannel"},l.transport.sctp=[]);var d=l.application,m=l.transport,h=r.findLine("a=mid:",c);if(h&&(l.name=h.substr(6)),r.findLine("a=sendrecv",c,p)?l.senders="both":r.findLine("a=sendonly",c,p)?l.senders=i[s][u].sendonly:r.findLine("a=recvonly",c,p)?l.senders=i[s][u].recvonly:r.findLine("a=inactive",c,p)&&(l.senders="none"),"rtp"==d.applicationType){var b=r.findLine("b=",c);b&&(d.bandwidth=r.bandwidth(b));var g=r.findLine("a=ssrc:",c);g&&(d.ssrc=g.substr(7).split(" ")[0]),r.findLines("a=rtpmap:",c).forEach(function(e){var t=r.rtpmap(e);t.parameters=[],t.feedback=[],r.findLines("a=fmtp:"+t.id,c).forEach(function(e){t.parameters=r.fmtp(e)}),r.findLines("a=rtcp-fb:"+t.id,c).forEach(function(e){t.feedback.push(r.rtcpfb(e))}),d.payloads.push(t)}),r.findLines("a=crypto:",c,p).forEach(function(e){d.encryption.push(r.crypto(e))}),r.findLine("a=rtcp-mux",c)&&(d.mux=!0),r.findLines("a=rtcp-fb:*",c).forEach(function(e){d.feedback.push(r.rtcpfb(e))}),r.findLines("a=extmap:",c).forEach(function(e){var t=r.extmap(e);t.senders=i[s][u][t.senders],d.headerExtensions.push(t)});var v=r.findLines("a=ssrc-group:",c);d.sourceGroups=r.sourceGroups(v||[]);var y=r.findLines("a=ssrc:",c),S=d.sources=r.sources(y||[]),x=r.findLine("a=msid:",c);if(x){var _=r.msid(x);["msid","mslabel","label"].forEach(function(e){for(var t=0;t<S.length;t++){for(var n=!1,i=0;i<S[t].parameters.length;i++)S[t].parameters[i].key===e&&(n=!0);n||S[t].parameters.push({key:e,value:_[e]})}})}r.findLine("a=x-google-flag:conference",c,p)&&(d.googConferenceFlag=!0)}var N=r.findLines("a=fingerprint:",c,p),E=r.findLine("a=setup:",c,p);N.forEach(function(e){var t=r.fingerprint(e);E&&(t.setup=E.substr(8)),m.fingerprints.push(t)});var A=r.findLine("a=ice-ufrag:",c,p),O=r.findLine("a=ice-pwd:",c,p);A&&O&&(m.ufrag=A.substr(12),m.pwd=O.substr(10),m.candidates=[],r.findLines("a=candidate:",c,p).forEach(function(e){m.candidates.push(t.toCandidateJSON(e))}));"datachannel"==d.applicationType&&r.findLines("a=sctpmap:",c).forEach(function(e){var t=r.sctpmap(e);m.sctp.push(t)});return l},t.toCandidateJSON=function(e){var t=r.candidate(e.split(/\r?\n/)[0]);return t.id=(o++).toString(36).substr(0,12),t}},1829:function(e,t){t.lines=function(e){return e.split(/\r?\n/).filter(function(e){return e.length>0})},t.findLine=function(e,t,n){for(var i=e.length,r=0;r<t.length;r++)if(t[r].substr(0,i)===e)return t[r];if(!n)return!1;for(var o=0;o<n.length;o++)if(n[o].substr(0,i)===e)return n[o];return!1},t.findLines=function(e,t,n){for(var i=[],r=e.length,o=0;o<t.length;o++)t[o].substr(0,r)===e&&i.push(t[o]);if(i.length||!n)return i;for(var a=0;a<n.length;a++)n[a].substr(0,r)===e&&i.push(n[a]);return i},t.mline=function(e){for(var t=e.substr(2).split(" "),n={media:t[0],port:t[1],proto:t[2],formats:[]},i=3;i<t.length;i++)t[i]&&n.formats.push(t[i]);return n},t.rtpmap=function(e){var t=e.substr(9).split(" "),n={id:t.shift()};return t=t[0].split("/"),n.name=t[0],n.clockrate=t[1],n.channels=3==t.length?t[2]:"1",n},t.sctpmap=function(e){var t=e.substr(10).split(" ");return{number:t.shift(),protocol:t.shift(),streams:t.shift()}},t.fmtp=function(e){for(var t,n,i,r=e.substr(e.indexOf(" ")+1).split(";"),o=[],a=0;a<r.length;a++)n=(t=r[a].split("="))[0].trim(),i=t[1],n&&i?o.push({key:n,value:i}):n&&o.push({key:"",value:n});return o},t.crypto=function(e){var t=e.substr(9).split(" ");return{tag:t[0],cipherSuite:t[1],keyParams:t[2],sessionParams:t.slice(3).join(" ")}},t.fingerprint=function(e){var t=e.substr(14).split(" ");return{hash:t[0],value:t[1]}},t.extmap=function(e){var t=e.substr(9).split(" "),n={},i=t.shift(),r=i.indexOf("/");return r>=0?(n.id=i.substr(0,r),n.senders=i.substr(r+1)):(n.id=i,n.senders="sendrecv"),n.uri=t.shift()||"",n},t.rtcpfb=function(e){var t=e.substr(10).split(" "),n={};return n.id=t.shift(),n.type=t.shift(),"trr-int"===n.type?n.value=t.shift():n.subtype=t.shift()||"",n.parameters=t,n},t.candidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:t[1],protocol:t[2].toLowerCase(),priority:t[3],ip:t[4],port:t[5],type:t[7],generation:"0"},i=8;i<t.length;i+=2)"raddr"===t[i]?n.relAddr=t[i+1]:"rport"===t[i]?n.relPort=t[i+1]:"generation"===t[i]?n.generation=t[i+1]:"tcptype"===t[i]&&(n.tcpType=t[i+1]);return n.network="1",n},t.sourceGroups=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].substr(13).split(" ");t.push({semantics:i.shift(),sources:i})}return t},t.sources=function(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i].substr(7).split(" "),o=r.shift();if(!n[o]){var a={ssrc:o,parameters:[]};t.push(a),n[o]=a}var s=(r=r.join(" ").split(":")).shift(),u=r.join(":")||null;n[o].parameters.push({key:s,value:u})}return t},t.groups=function(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i].substr(8).split(" "),n.push({semantics:t.shift(),contents:t});return n},t.bandwidth=function(e){var t=e.substr(2).split(":"),n={};return n.type=t.shift(),n.bandwidth=t.shift(),n},t.msid=function(e){var t=e.substr(7),n=t.split(" ");return{msid:t,mslabel:n[0],label:n[1]}}},1830:function(e,t,n){(function(e,n){var i=200,r="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Boolean]",u="[object Date]",c="[object Function]",p="[object GeneratorFunction]",f="[object Map]",l="[object Number]",d="[object Object]",m="[object RegExp]",h="[object Set]",b="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",N="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]",I=/\w*$/,R=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,C={};C[a]=C["[object Array]"]=C[v]=C[y]=C[s]=C[u]=C[S]=C[x]=C[_]=C[N]=C[E]=C[f]=C[l]=C[d]=C[m]=C[h]=C[b]=C[g]=C[A]=C[O]=C[j]=C[T]=!0,C["[object Error]"]=C[c]=C["[object WeakMap]"]=!1;var M="object"==typeof e&&e&&e.Object===Object&&e,P="object"==typeof self&&self&&self.Object===Object&&self,D=M||P||Function("return this")(),L="object"==typeof t&&t&&!t.nodeType&&t,k=L&&"object"==typeof n&&n&&!n.nodeType&&n,U=k&&k.exports===L;function B(e,t){return e.set(t[0],t[1]),e}function F(e,t){return e.add(t),e}function q(e,t,n,i){var r=-1,o=e?e.length:0;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function G(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function J(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function V(e,t){return function(n){return e(t(n))}}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var z=Array.prototype,X=Function.prototype,K=Object.prototype,W=D["__core-js_shared__"],Q=function(){var e=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$=X.toString,Y=K.hasOwnProperty,Z=K.toString,ee=RegExp("^"+$.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=U?D.Buffer:void 0,ne=D.Symbol,ie=D.Uint8Array,re=V(Object.getPrototypeOf,Object),oe=Object.create,ae=K.propertyIsEnumerable,se=z.splice,ue=Object.getOwnPropertySymbols,ce=te?te.isBuffer:void 0,pe=V(Object.keys,Object),fe=Le(D,"DataView"),le=Le(D,"Map"),de=Le(D,"Promise"),me=Le(D,"Set"),he=Le(D,"WeakMap"),be=Le(Object,"create"),ge=qe(fe),ve=qe(le),ye=qe(de),Se=qe(me),xe=qe(he),_e=ne?ne.prototype:void 0,Ne=_e?_e.valueOf:void 0;function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function je(e){this.__data__=new Ae(e)}function Te(e,t){var n=Je(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&Y.call(e,"callee")&&(!ae.call(e,"callee")||Z.call(e)==a)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!Y.call(e,o)||r&&("length"==o||Be(o,i))||n.push(o);return n}function Ie(e,t,n){var i=e[t];Y.call(e,t)&&Ge(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function Re(e,t){for(var n=e.length;n--;)if(Ge(e[n][0],t))return n;return-1}function we(e,t,n,i,r,o,R){var w;if(i&&(w=o?i(e,r,o,R):i(e)),void 0!==w)return w;if(!Xe(e))return e;var M=Je(e);if(M){if(w=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&Y.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,i=e.length;t||(t=Array(i));for(;++n<i;)t[n]=e[n];return t}(e,w)}else{var P=Ue(e),D=P==c||P==p;if(He(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(P==d||P==a||D&&!o){if(G(e))return o?e:{};if(w=function(e){return"function"!=typeof e.constructor||Fe(e)?{}:function(e){return Xe(e)?oe(e):{}}(re(e))}(D?{}:e),!t)return function(e,t){return Pe(e,ke(e),t)}(e,function(e,t){return e&&Pe(t,Ke(t),e)}(w,e))}else{if(!C[P])return o?e:{};w=function(e,t,n,i){var r=e.constructor;switch(t){case v:return Me(e);case s:case u:return new r(+e);case y:return function(e,t){var n=t?Me(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,i);case S:case x:case _:case N:case E:case A:case O:case j:case T:return function(e,t){var n=t?Me(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,i);case f:return function(e,t,n){return q(t?n(J(e),!0):J(e),B,new e.constructor)}(e,i,n);case l:case b:return new r(e);case m:return function(e){var t=new e.constructor(e.source,I.exec(e));return t.lastIndex=e.lastIndex,t}(e);case h:return function(e,t,n){return q(t?n(H(e),!0):H(e),F,new e.constructor)}(e,i,n);case g:return function(e){return Ne?Object(Ne.call(e)):{}}(e)}}(e,P,we,t)}}R||(R=new je);var L=R.get(e);if(L)return L;if(R.set(e,w),!M)var k=n?function(e){return function(e,t,n){var i=t(e);return Je(e)?i:function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}(i,n(e))}(e,Ke,ke)}(e):Ke(e);return function(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););}(k||e,function(r,o){k&&(r=e[o=r]),Ie(w,o,we(r,t,n,i,o,e,R))}),w}function Ce(e){return!(!Xe(e)||function(e){return!!Q&&Q in e}(e))&&(ze(e)||G(e)?ee:R).test(qe(e))}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Pe(e,t,n,i){n||(n={});for(var r=-1,o=t.length;++r<o;){var a=t[r],s=i?i(n[a],e[a],a,n,e):void 0;Ie(n,a,void 0===s?e[a]:s)}return n}function De(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(n)?n:void 0}Ee.prototype.clear=function(){this.__data__=be?be(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(be){var n=t[e];return n===r?void 0:n}return Y.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:Y.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?r:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0||(n==t.length-1?t.pop():se.call(t,n,1),0))},Ae.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},Ae.prototype.has=function(e){return Re(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var n=this.__data__,i=Re(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},Oe.prototype.clear=function(){this.__data__={hash:new Ee,map:new(le||Ae),string:new Ee}},Oe.prototype.delete=function(e){return De(this,e).delete(e)},Oe.prototype.get=function(e){return De(this,e).get(e)},Oe.prototype.has=function(e){return De(this,e).has(e)},Oe.prototype.set=function(e,t){return De(this,e).set(e,t),this},je.prototype.clear=function(){this.__data__=new Ae},je.prototype.delete=function(e){return this.__data__.delete(e)},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ae){var r=n.__data__;if(!le||r.length<i-1)return r.push([e,t]),this;n=this.__data__=new Oe(r)}return n.set(e,t),this};var ke=ue?V(ue,Object):function(){return[]},Ue=function(e){return Z.call(e)};function Be(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||K)}function qe(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ge(e,t){return e===t||e!=e&&t!=t}(fe&&Ue(new fe(new ArrayBuffer(1)))!=y||le&&Ue(new le)!=f||de&&"[object Promise]"!=Ue(de.resolve())||me&&Ue(new me)!=h||he&&"[object WeakMap]"!=Ue(new he))&&(Ue=function(e){var t=Z.call(e),n=t==d?e.constructor:void 0,i=n?qe(n):void 0;if(i)switch(i){case ge:return y;case ve:return f;case ye:return"[object Promise]";case Se:return h;case xe:return"[object WeakMap]"}return t});var Je=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!ze(e)}var He=ce||function(){return!1};function ze(e){var t=Xe(e)?Z.call(e):"";return t==c||t==p}function Xe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ke(e){return Ve(e)?Te(e):function(e){if(!Fe(e))return pe(e);var t=[];for(var n in Object(e))Y.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return we(e,!0,!0)}}).call(this,n(55),n(169)(e))},1831:function(e,t,n){var i=n(1090),r=n(1338),o=n(1337),a=n(1480),s=n(1832);function u(e){o.call(this,e),this.pc=new a({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this)),this.pc.on("addChannel",this.onChannelAdded.bind(this)),this.sender=null,this.receiver=null}i.inherits(u,o),u.prototype=r(u.prototype,{start:function(e){var t=this;this.state="pending",this.pc.isInitiator=!0,this.sender=new s.Sender,this.sender.on("progress",function(e,n){t._log("info","Send progress "+e+"/"+n)}),this.sender.on("sentFile",function(e){t._log("info","Sent file",e.name);var n=t.pc.localDescription.contents[0];delete n.transport,n.application={applicationType:"filetransfer",offer:{hash:{algo:e.algo,value:e.hash}}},t.send("description-info",{contents:[n]}),t.emit("sentFile",t,e)});var n=this.pc.createDataChannel("filetransfer");n.onopen=function(){t.sender.send(e,n)};this.pc.offer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},function(n,i){if(n)return t._log("error","Could not create WebRTC offer",n),t.end("failed-application",!0);i.jingle.contents[0].application={applicationType:"filetransfer",offer:{date:e.lastModifiedDate,name:e.name,size:e.size,hash:{algo:"sha-1",value:""}}},t.send("session-initiate",i.jingle)})},accept:function(){var e=this;this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(function(t,n){if(t)return e._log("error","Could not create WebRTC answer",t),e.end("failed-application");e.send("session-accept",n.jingle)})},end:function(e,t){this.pc.close(),o.prototype.end.call(this,e,t)},maybeReceivedFile:function(){this.receiver.metadata.hash.value&&(this.receiver.metadata.hash.value===this.receiver.metadata.actualhash?(this._log("info","File hash matches"),this.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),this.end("success")):(this._log("error","File hash does not match"),this.end("media-error")))},onIceCandidate:function(e){this._log("info","Discovered new ICE candidate",e.jingle),this.send("transport-info",e.jingle)},onIceStateChange:function(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onChannelAdded:function(e){this.receiver.receive(null,e)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1;var i=e.contents[0].application;this.receiver=new s.Receiver({hash:i.offer.hash.algo}),this.receiver.on("progress",function(e,t){n._log("info","Receive progress "+e+"/"+t)}),this.receiver.on("receivedFile",function(e){n.receivedFile=e,n.maybeReceivedFile()}),this.receiver.metadata=i.offer,e.contents[0].application={applicationType:"datachannel"},this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer"),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",e.contents[0].application={applicationType:"datachannel"},this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer"),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){this._log("info","Terminating session"),this.pc.close(),o.prototype.end.call(this,e.reason,!0),t()},onDescriptionInfo:function(e,t){var n=e.contents[0].application.offer.hash;this.receiver.metadata.hash=n,this.receiver.metadata.actualhash&&this.maybeReceivedFile(),t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})}}),e.exports=u},1832:function(e,t,n){var i=n(1134),r=n(1090),o=n(1336),a=n(1833);function s(e){i.call(this);var t=this;this.base=new a.Sender(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=o.createHash(n.hash),this.base.on("progress",function(e,n,i){t.emit("progress",e,n,i),i&&t.hash.update(new Uint8Array(i))}),this.base.on("sentFile",function(){t.emit("sentFile",{hash:t.hash.digest("hex"),algo:n.hash})})}function u(e){i.call(this);var t=this;this.base=new a.Receiver(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=o.createHash(n.hash),this.base.on("progress",function(e,n,i){t.emit("progress",e,n,i),i&&t.hash.update(new Uint8Array(i))}),this.base.on("receivedFile",function(e,n){n.actualhash=t.hash.digest("hex"),t.emit("receivedFile",e,n)})}r.inherits(s,i),s.prototype.send=function(){this.base.send.apply(this.base,arguments)},r.inherits(u,i),u.prototype.receive=function(){this.base.receive.apply(this.base,arguments)},Object.defineProperty(u.prototype,"metadata",{get:function(){return this.base.metadata},set:function(e){this.base.metadata=e}}),e.exports={},e.exports.support=a.support,e.exports.Sender=s,e.exports.Receiver=u},1833:function(e,t,n){var i=n(1134),r=n(1090);function o(e){i.call(this);var t,n=e||{};for(t in this.config={chunksize:16384,pacing:0},n)this.config[t]=n[t];this.file=null,this.channel=null}function a(){i.call(this),this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null}r.inherits(o,i),o.prototype.send=function(e,t){var n=this;this.file=e,this.channel=t;var i="number"!=typeof t.bufferedAmountLowThreshold,r=0,o=function(){var a=new window.FileReader;a.onload=function(a){n.channel.send(a.target.result),n.emit("progress",r,e.size,a.target.result),e.size>r+a.target.result.byteLength?i?window.setTimeout(o,n.config.pacing):t.bufferedAmount<=t.bufferedAmountLowThreshold&&window.setTimeout(o,0):(n.emit("progress",e.size,e.size,null),n.emit("sentFile")),r+=n.config.chunksize};var s=e.slice(r,r+n.config.chunksize);a.readAsArrayBuffer(s)};i||(t.bufferedAmountLowThreshold=8*this.config.chunksize,t.addEventListener("bufferedamountlow",o)),window.setTimeout(o,0)},r.inherits(a,i),a.prototype.receive=function(e,t){var n=this;e&&(this.metadata=e),this.channel=t,t.binaryType="arraybuffer",this.channel.onmessage=function(e){var t=e.data.byteLength;n.received+=t,n.receiveBuffer.push(e.data),n.emit("progress",n.received,n.metadata.size,e.data),n.received===n.metadata.size?(n.emit("receivedFile",new window.Blob(n.receiveBuffer),n.metadata),n.receiveBuffer=[]):n.received>n.metadata.size&&(console.error("received more than expected, discarding..."),n.receiveBuffer=[])}},e.exports={},e.exports.support="undefined"!=typeof window&&window&&window.File&&window.FileReader&&window.Blob,e.exports.Sender=o,e.exports.Receiver=a},1834:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:json:0")}},1835:function(e,t,n){"use strict";function i(e,t){return function(e,t){var n;return Promise.race([e,new Promise(function(e,i){n=setTimeout(function(){i()},t)})]).then(function(e){return clearTimeout(n),e})}(new Promise(function(t,n){e.sm.started?(e.once("stream:management:ack",t),e.sm.request()):e.ping().then(t).catch(function(e){e.error&&"timeout"!==e.error.condition?t():n()})}),1e3*t||15e3)}e.exports=function(e){e.enableKeepAlive=function(t){(t=t||{}).interval=t.interval||300,t.timeout=t.timeout||15,e._keepAliveInterval=setInterval(function(){e.sessionStarted&&i(e,t.timeout).catch(function(){e.emit("stream:error",{condition:"connection-timeout",text:"Server did not respond in "+t.timeout+" seconds"}),e.transport&&(e.transport.hasStream=!1,e.transport.disconnect())})},1e3*t.interval)},e.disableKeepAlive=function(){e._keepAliveInterval&&(clearInterval(e._keepAliveInterval),delete e._keepAliveInterval)},e.on("disconnected",function(){e.disableKeepAlive()})}},1836:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("","urn:xmpp:eventlog"),e.sendLog=function(t,n){e.sendMessage({to:t,type:"normal",log:n})}}},1837:function(e,t,n){"use strict";var i=n(1087).JID;e.exports=function(e){e.disco.addFeature("urn:xmpp:mam:2"),e.getHistorySearchForm=function(t,n){return e.sendIq({to:t,type:"get",mam:!0},n)},e.searchHistory=function(t,n){var r=this,o=this.nextId();(t=t||{}).queryid=o;var a=t.jid||t.to||"";delete t.jid,delete t.to,t.form||(t.form={}),t.form.type="submit";var s=t.form.fields=t.form.fields||[];["FORM_TYPE","with","start","end"].forEach(function(e){if(t[e]||"FORM_TYPE"===e){var n=t[e];("start"===e||"end"===e)&&"string"!=typeof n&&(n=n.toISOString()),"FORM_TYPE"===e&&(n="urn:xmpp:mam:2");for(var i=0,r=s.length;i<r;i++)s[i].name;s.push({name:e,value:n}),delete t[e]}});var u=new i(a||e.jid.bare),c={"":!0};c[u.full]=!0,c[u.bare]=!0,c[u.domain]=!0,c[e.jid.bare]=!0,c[e.jid.domain]=!0;var p=[];return this.on("mam:item:"+o,"session",function(e){c[e.from.full]&&p.push(e.mamItem)}),function(e,t,n){var i;return Promise.race([e,new Promise(function(e,r){i=setTimeout(function(){r({id:t,type:"error",error:{condition:"timeout"}})},n)})]).then(function(e){return clearTimeout(i),e})}(this.sendIq({type:"set",to:a,id:o,mam:t}),o,1e3*r.config.timeout||15e3).then(function(e){return e.mamResult.items=p,r.off("mam:item:"+o),n&&n(null,e),e},function(e){if(r.off("mam:item:"+o),!n)throw e;n(e)})},e.getHistoryPreferences=function(e){return this.sendIq({type:"get",mamPrefs:!0},e)},e.setHistoryPreferences=function(e,t){return this.sendIq({type:"set",mamPrefs:e},t)},e.on("message",function(t){t.mamItem&&(e.emit("mam:item",t),e.emit("mam:item:"+t.mamItem.queryid,t))})}},1838:function(e,t,n){"use strict";var i=n(1191),r=n(1087).JID;e.exports=function(e){function t(){i(e.joiningRooms,function(t,n){delete e.joiningRooms[n],e.joinRoom(n,t)}),i(e.joinedRooms,function(t,n){delete e.joinedRooms[n],e.joinRoom(n,t)})}e.disco.addFeature("http://jabber.org/protocol/muc"),e.disco.addFeature("jabber:x:conference"),e.disco.addFeature("urn:xmpp:hats:0"),e.joinedRooms={},e.joiningRooms={},e.on("session:started",t),e.on("stream:management:resumed",t),e.on("message",function(t){t.muc?(t.muc.invite&&e.emit("muc:invite",{from:t.muc.invite.from,room:t.from,reason:t.muc.invite.reason,password:t.muc.password,thread:t.muc.invite.thread,type:"mediated"}),t.muc.decline&&e.emit("muc:declined",{room:t.from,from:t.muc.decline.from,reason:t.muc.decline.reason})):t.mucInvite&&e.emit("muc:invite",{from:t.from,room:t.mucInvite.jid,reason:t.mucInvite.reason,password:t.mucInvite.password,thread:t.mucInvite.thread,type:"direct"}),"groupchat"===t.type&&t.subject&&e.emit("muc:subject",t)}),e.on("presence",function(t){if(e.joiningRooms[t.from.bare]&&"error"===t.type)delete e.joiningRooms[t.from.bare],e.emit("muc:failed",t),e.emit("muc:error",t);else if(t.muc){var n=t.muc.codes&&t.muc.codes.indexOf("110")>=0;"error"===t.type?e.emit("muc:error",t):"unavailable"===t.type?(e.emit("muc:unavailable",t),n&&(e.emit("muc:leave",t),delete e.joinedRooms[t.from.bare]),t.muc.destroyed&&e.emit("muc:destroyed",{room:t.from,newRoom:t.muc.destroyed.jid,reason:t.muc.destroyed.reason,password:t.muc.destroyed.password})):(e.emit("muc:available",t),n&&!e.joinedRooms[t.from.bare]&&(e.emit("muc:join",t),delete e.joiningRooms[t.from.bare],e.joinedRooms[t.from.bare]=t.from.resource))}}),e.joinRoom=function(e,t,n){(n=n||{}).to=e+"/"+t,n.caps=this.disco.caps,n.joinMuc=n.joinMuc||{},this.joiningRooms[e]=t,this.sendPresence(n)},e.leaveRoom=function(e,t,n){(n=n||{}).to=e+"/"+t,n.type="unavailable",this.sendPresence(n)},e.ban=function(t,n,i,r){e.setRoomAffiliation(t,n,"outcast",i,r)},e.kick=function(t,n,i,r){e.setRoomRole(t,n,"none",i,r)},e.invite=function(t,n){e.sendMessage({to:t,muc:{invites:n}})},e.directInvite=function(t,n){n.jid=t,e.sendMessage({to:n.to,mucInvite:n})},e.declineInvite=function(t,n,i){e.sendMessage({to:t,muc:{decline:{to:n,reason:i}}})},e.changeNick=function(t,n){e.sendPresence({to:new r(t).bare+"/"+n})},e.setSubject=function(t,n){e.sendMessage({to:t,type:"groupchat",subject:n})},e.discoverReservedNick=function(t,n){e.getDiscoInfo(t,"x-roomuser-item",function(e,t){if(e)return n(e);var i=t.discoInfo.identities[0]||{};n(null,i.name)})},e.requestRoomVoice=function(t){e.sendMessage({to:t,form:{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#request"},{name:"muc#role",type:"text-single",value:"participant"}]}})},e.setRoomAffiliation=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,mucAdmin:{jid:t,affiliation:n,reason:i}},r)},e.setRoomRole=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,mucAdmin:{nick:t,role:n,reason:i}},r)},e.getRoomMembers=function(e,t,n){return this.sendIq({type:"get",to:e,mucAdmin:t},n)},e.getRoomConfig=function(e,t){return this.sendIq({to:e,type:"get",mucOwner:!0},t)},e.configureRoom=function(e,t,n){return t.type||(t.type="submit"),this.sendIq({to:e,type:"set",mucOwner:{form:t}},n)},e.destroyRoom=function(e,t,n){return this.sendIq({to:e,type:"set",mucOwner:{destroy:t}},n)},e.getUniqueRoomName=function(e,t){return this.sendIq({type:"get",to:e,mucUnique:!0},t)}}},1839:function(e,t,n){"use strict";var i="http://jabber.org/protocol/mood";e.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"+notify"),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===i&&e.emit("mood",{jid:t.from,mood:t.event.updated.published[0].mood})}),e.publishMood=function(e,t,n){return this.publish("",i,{mood:{value:e,text:t}},n)}}},1840:function(e,t,n){"use strict";var i="http://jabber.org/protocol/nick";e.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"+notify"),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===i&&e.emit("nick",{jid:t.from,nick:t.event.updated.published[0].nick})}),e.publishNick=function(e,t){return this.publish("",i,{nick:e},t)}}},1841:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("jabber:x:oob")}},1842:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:ping"),e.on("iq:get:ping",function(t){e.sendIq(t.resultReply())}),e.ping=function(e,t){return this.sendIq({to:e,type:"get",ping:!0},t)}}},1843:function(e,t,n){"use strict";e.exports=function(e){e.getPrivateData=function(e,t){return this.sendIq({type:"get",privateStorage:e},t)},e.setPrivateData=function(e,t){return this.sendIq({type:"set",privateStorage:e},t)}}},1844:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:psa")}},1845:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:push:0"),e.enableNotifications=function(e,t,n,i){var r={type:"set",enablePush:{jid:e,node:t}};return n&&n.length&&(r.enablePush.form={fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/pubsub#publish-options"}].concat(n)}),this.sendIq(r,i)},e.disableNotifications=function(e,t,n){var i={type:"set",disablePush:{jid:e}};return t&&(i.disablePush.node=t),this.sendIq(i,n)}}},1846:function(e,t,n){"use strict";e.exports=function(e){e.on("message",function(t){if(t.event){if(e.emit("pubsub:event",t),e.emit("pubsubEvent",t),t.event.updated){var n=t.event.updated.published,i=t.event.updated.retracted;n&&n.length&&e.emit("pubsub:published",t),i&&i.length&&e.emit("pubsub:retracted",t)}t.event.purged&&e.emit("pubsub:purged",t),t.event.deleted&&e.emit("pubsub:deleted",t),t.event.subscriptionChanged&&e.emit("pubsub:subscription",t),t.event.configurationChanged&&e.emit("pubsub:config",t)}t.pubsub&&t.pubsub.affiliations&&e.emit("pubsub:affiliation",t)}),e.subscribeToNode=function(t,n,i){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid,this.sendIq({type:"set",to:t,pubsub:{subscribe:n}},i)},e.unsubscribeFromNode=function(t,n,i){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid.bare,this.sendIq({type:"set",to:t,pubsub:{unsubscribe:n}},i)},e.publish=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsub:{publish:{node:t,item:n}}},i)},e.getItem=function(e,t,n,i){return this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:t,item:n}}},i)},e.getItems=function(e,t,n,i){return(n=n||{}).node=t,this.sendIq({type:"get",to:e,pubsub:{retrieve:{node:t,max:n.max},rsm:n.rsm}},i)},e.retract=function(e,t,n,i,r){return this.sendIq({type:"set",to:e,pubsub:{retract:{node:t,notify:i,id:n}}},r)},e.purgeNode=function(e,t,n){return this.sendIq({type:"set",to:e,pubsubOwner:{purge:t}},n)},e.deleteNode=function(e,t,n){return this.sendIq({type:"set",to:e,pubsubOwner:{del:t}},n)},e.createNode=function(e,t,n,i){var r={type:"set",to:e,pubsub:{create:t}};return n&&(r.pubsub.config={form:n}),this.sendIq(r,i)},e.getSubscriptions=function(e,t,n){return t=t||{},this.sendIq({type:"get",to:e,pubsub:{subscriptions:t}},n)},e.getAffiliations=function(e,t,n){return t=t||{},this.sendIq({type:"get",to:e,pubsub:{affiliations:t}},n)},e.getNodeSubscribers=function(e,t,n,i){return(n=n||{}).node=t,this.sendIq({type:"get",to:e,pubsubOwner:{subscriptions:n}},i)},e.updateNodeSubscriptions=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsubOwner:{subscriptions:{node:t,list:n}}},i)},e.getNodeAffiliations=function(e,t,n,i){return(n=n||{}).node=t,this.sendIq({type:"get",to:e,pubsubOwner:{affiliations:n}},i)},e.updateNodeAffiliations=function(e,t,n,i){return this.sendIq({type:"set",to:e,pubsubOwner:{affiliations:{node:t,list:n}}},i)}}},1847:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:reach:0"),e.disco.addFeature("urn:xmpp:reach:0+notify"),e.on("pubsub:event",function(t){t.event.updated&&"urn:xmpp:reach:0"===t.event.updated.node&&e.emit("reachability",{jid:t.from,addresses:t.event.updated.published[0].reach})}),e.on("presence",function(t){t.reach&&t.reach.length&&e.emit("reachability",{jid:t.from,addresses:t.reach})}),e.publishReachability=function(e,t){return this.publish("","urn:xmpp:reach:0",{reach:e},t)}}},1848:function(e,t,n){"use strict";e.exports=function(e,t,n){var i=!1!==n.sendReceipts;e.disco.addFeature("urn:xmpp:receipts"),e.on("message",function(t){i&&{normal:!0,chat:!0,headline:!0}[t.type]&&t.requestReceipt&&!t.receipt&&e.sendMessage({to:t.from,type:t.type,receipt:t.id,id:t.id}),t.receipt&&(e.emit("receipt",t),e.emit("receipt:"+t.receipt))})}},1849:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:reference:0")}},1850:function(e,t,n){"use strict";e.exports=function(e){e.getAccountInfo=function(e,t){return this.sendIq({type:"get",to:e,register:!0},t)},e.updateAccount=function(e,t,n){return this.sendIq({type:"set",to:e,register:t},n)},e.deleteAccount=function(e,t){return this.sendIq({type:"set",to:e,register:{remove:!0}},t)}}},1851:function(e,t,n){"use strict";e.exports=function(e){e.on("iq:set:roster",function(t){var n={"":!0};if(n[e.jid.bare]=!0,n[e.jid.domain]=!0,!n[t.from.full])return e.sendIq(t.errorReply({error:{type:"cancel",condition:"service-unavailable"}}));e.emit("roster:update",t),e.sendIq({id:t.id,type:"result"})}),e.getRoster=function(t){var n=this;return e.sendIq({type:"get",roster:{ver:n.config.rosterVer}}).then(function(e){if(e.roster){var t=e.roster.ver;t&&(n.config.rosterVer=t,n.emit("roster:ver",t))}return e}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})},e.updateRosterItem=function(t,n){return e.sendIq({type:"set",roster:{items:[t]}},n)},e.removeRosterItem=function(t,n){return e.updateRosterItem({jid:t,subscription:"remove"},n)},e.subscribe=function(t){e.sendPresence({type:"subscribe",to:t})},e.unsubscribe=function(t){e.sendPresence({type:"unsubscribe",to:t})},e.acceptSubscription=function(t){e.sendPresence({type:"subscribed",to:t})},e.denySubscription=function(t){e.sendPresence({type:"unsubscribed",to:t})}}},1852:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:rtt:0"),e.on("message",function(t){t.rtt&&(e.emit("rtt",t),e.emit("rtt:"+t.rtt.event,t))})}},1853:function(e,t,n){"use strict";var i="http://jabber.org/protocol/shim";e.exports=function(e){e.disco.addFeature(i),e.disco.addFeature(i+"#SubID",i)}},1854:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("urn:xmpp:time"),e.getTime=function(e,t){return this.sendIq({to:e,type:"get",time:!0},t)},e.on("iq:get:time",function(t){var n=new Date;e.sendIq(t.resultReply({time:{utc:n,tzo:n.getTimezoneOffset()}}))})}},1855:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("vcard-temp"),e.getVCard=function(e,t){return this.sendIq({to:e,type:"get",vCardTemp:!0},t)},e.publishVCard=function(e,t){return this.sendIq({type:"set",vCardTemp:e},t)}}},1856:function(e,t,n){"use strict";e.exports=function(e){e.disco.addFeature("jabber:iq:version"),e.on("iq:get:version",function(t){e.sendIq(t.resultReply({version:e.config.softwareVersion||{name:"stanza.io"}}))}),e.getSoftwareVersion=function(e,t){return this.sendIq({to:e,type:"get",version:!0},t)}}},1858:function(e,t,n){e.exports={default:n(1859),__esModule:!0}},1859:function(e,t,n){n(1860),e.exports=n(11).Object.seal},1860:function(e,t,n){var i=n(34),r=n(175).onFreeze;n(381)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})}}]);
//# sourceMappingURL=desktop-vendors~xmppclient.olx.2d682736c5098563a5a0.js.map