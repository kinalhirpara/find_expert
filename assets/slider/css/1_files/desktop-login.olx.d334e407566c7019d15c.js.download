(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1029:function(e,t,a){"use strict";t.__esModule=!0,t.Login=void 0;var o=d(a(1)),r=d(a(0)),n=d(a(104)),s=d(a(2364)),i=d(a(2389)),l=a(1131);function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Login=function(e){return(!!e.config.get("login").legion.enabled||!1)&&e.step!==l.STEPS.verifysms?r.default.createElement(i.default,e):r.default.createElement(s.default,e)};u.propTypes={config:o.default.shape({get:o.default.func.isRequired}).isRequired,step:o.default.string},u.defaultProps={step:""},t.default=(0,n.default)(u)},1054:function(e,t,a){"use strict";t.__esModule=!0;var o=c(a(24)),r=c(a(105)),n=c(a(4)),s=c(a(13)),i=c(a(20)),l=c(a(21)),d=c(a(0)),u=c(a(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(a){(0,s.default)(this,t);var o=(0,i.default)(this,e.call(this,a));return o.handleChange=function(e,t,a,r){o.setState(function(o){var s,i,l,d=o.errorMessages,u=o.values,c=o.valids;return{errorMessages:(0,n.default)({},d,(s={},s[t]=r,s)),values:(0,n.default)({},u,(i={},i[t]=e,i)),valids:(0,n.default)({},c,(l={},l[t]=a,l))}})},o.handleSubmit=function(e){e&&e.preventDefault&&e.preventDefault();var t=o.state,a=t.valids,n=t.values,s=t.errorMessages;(0,r.default)(a).some(function(e){return!e})?o.setState({errors:s}):(o.setState({errors:[]}),o.props.onSubmit({values:n}))},o.reset=function(){o.setState({values:{}})},o.state={valids:{},errorMessages:{},errors:{},values:a.initialValues},o}return(0,l.default)(t,e),t.prototype.render=function(){var e=this.handleSubmit,t=this.handleChange,a=this.state,r=a.errors,n=a.values,s=this.props,i=s.className,l=s.render;return(0,o.default)("form",{className:i,onSubmit:e},void 0,l({handleSubmit:e,handleChange:t,errors:r,values:n}))},t}(d.default.Component);f.propTypes={render:u.default.func.isRequired,initialValues:u.default.object,onSubmit:u.default.func,className:u.default.string},f.defaultProps={initialValues:{},onSubmit:function(){}},t.default=f},1056:function(e,t,a){"use strict";t.__esModule=!0,t.getUserImage=void 0;var o=i(a(1110)),r=i(a(1111)),n=i(a(1112)),s=i(a(1113));function i(e){return e&&e.__esModule?e:{default:e}}var l=[o.default,r.default,n.default,s.default];t.getUserImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{avatar_id:1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"120x120";return e.images&&e.images.length&&e.images[0].url?e.images[0].url+";s="+t:e.image?e.image+";s="+t:l[e.avatar_id-1]}},1057:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.UserImage=void 0;var o=m(a(24)),r=m(a(13)),n=m(a(20)),s=m(a(21)),i=m(a(0)),l=m(a(1)),d=m(a(1176)),u=a(44),c=a(31),f=m(a(346)),p=m(a(1049)),g=m(a(104));function m(e){return e&&e.__esModule?e:{default:e}}var h=f.default.icons,v=t.UserImage=function(e){function t(){return(0,r.default)(this,t),(0,n.default)(this,e.apply(this,arguments))}return(0,s.default)(t,e),t.prototype.render=function(){var e=void 0;return e=this.props.icon?this.props.icon:this.props.configIcon,this.props.userImage?(0,o.default)("div",{className:d.default.userImage},void 0,(0,o.default)("span",{className:d.default.icon+" "+h.panameraIcons+" "+h[e]}),(0,o.default)("div",{className:d.default.line}),(0,o.default)(p.default,{image:this.props.userImage,diameter:"60px",className:d.default.avatar})):(0,o.default)("div",{className:d.default.userImage},void 0,(0,o.default)("span",{className:d.default.icon+" "+h.panameraIcons+" "+h[e]}))},t}(i.default.Component);v.propTypes={userImage:l.default.string,icon:l.default.string,configIcon:l.default.string.isRequired},v.defaultProps={userImage:"",icons:""};var _=t.mapStateToProps=function(e,t){return{configIcon:t.config.get("theme","icon")}};t.default=(0,c.compose)(g.default,(0,u.connect)(_))(v)},1066:function(e,t,a){"use strict";t.__esModule=!0;var o=u(a(4)),r=u(a(13)),n=u(a(20)),s=u(a(21)),i=u(a(32)),l=a(0),d=u(a(131));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.contextTypes,a=e.mapContextToProps;return function(e){var u=function(t){function d(e,s){(0,r.default)(this,d);var i=(0,n.default)(this,t.call(this,e,s));return i.mergedProps={},i.mergedProps=(0,o.default)({},e,a(s,e)),i}return(0,s.default)(d,t),d.prototype.shouldComponentUpdate=function(e,t,r){var n=(0,o.default)({},e,a(r,e)),s=function(e,t){for(var a=(0,i.default)(e),o=0;o<a.length;o++)if(e[a[o]]!==t[a[o]])return!0;return!1}(n,this.mergedProps);return s&&(this.mergedProps=n),s},d.prototype.render=function(){return(0,l.createElement)(e,this.mergedProps)},d}(l.Component);u.contextTypes=t;var c=e.displayName||e.name||"Component";return u.displayName="WithContext("+c+")",(0,d.default)(u,e,{fetchData:!0})}}},1084:function(e,t,a){"use strict";t.__esModule=!0;var o=n(a(1059)),r=n(a(1096));function n(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(o.default)},1089:function(e,t,a){"use strict";t.__esModule=!0,t.ResendCode=void 0;var o=c(a(24)),r=c(a(13)),n=c(a(20)),s=c(a(21)),i=c(a(0)),l=c(a(1)),d=c(a(1186)),u=a(64);function c(e){return e&&e.__esModule?e:{default:e}}var f=t.ResendCode=function(e){function t(){(0,r.default)(this,t);var a=(0,n.default)(this,e.call(this));return a.onClick=function(){a.props.disableCounter?a.props.onClick():a.state.resendCounter>0||(a.timer.intents+=1,a.props.onClick(a.timer.intents,a.props.method),a.setState({resendCounter:a.timer.resendCounter},function(){a.interval=setInterval(function(){return a.startTimer()},a.timer.interval)}))},a.state={resendCounter:0},a.translationsValues={resendCounter:function(){return{time:a.state.resendCounter}}},a.timer={intents:0,interval:1e3,resendCounter:60},a}return(0,s.default)(t,e),t.prototype.componentWillUnmount=function(){clearInterval(this.interval)},t.prototype.startTimer=function(){var e=this;this.setState({resendCounter:this.state.resendCounter-1},function(){e.state.resendCounter<=0&&clearInterval(e.interval)})},t.prototype.render=function(){var e=void 0;return this.state.resendCounter>0&&(e=(0,o.default)(u.FormattedMessage,{id:"login_resend_try_again_message",values:this.translationsValues.resendCounter()})),(0,o.default)("div",{className:d.default.resendCode},void 0,(0,o.default)("span",{className:d.default.resend+" "+(this.state.resendCounter>0?d.default.disabled:""),onClick:this.onClick,"data-aut-id":"resendCodeonClick"},void 0,this.props.text,e))},t}(i.default.Component);f.propTypes={onClick:l.default.func,text:l.default.element,method:l.default.string,disableCounter:l.default.bool},f.defaultProps={onClick:function(){},text:(0,o.default)(u.FormattedMessage,{id:"login_resend_code_button"}),method:"",disableCounter:!1},t.default=f},1095:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.PhoneInput=void 0;var o=m(a(4)),r=m(a(24)),n=m(a(38)),s=m(a(0)),i=m(a(1)),l=a(44),d=a(64),u=m(a(1059)),c=m(a(65)),f=m(a(1084)),p=m(a(1175)),g=a(352);function m(e){return e&&e.__esModule?e:{default:e}}var h={autoComplete:"username"},v=function(e){var t=e.countryName,a=e.labelCountry,i=e.className,l=e.config,d=(0,n.default)(e,["countryName","labelCountry","className","config"]);return(0,r.default)("div",{className:(0,c.default)(p.default.phoneInput,i),"data-aut-id":"phoneInput"},void 0,(0,r.default)(u.default,{id:t,name:t,value:l.location.country.calling_code,disabled:!0,className:p.default.countryCode,label:a}),s.default.createElement(f.default,(0,o.default)({id:d.name,extras:h,className:p.default.phone},d)))};t.PhoneInput=v,v.propTypes={value:i.default.string,onChange:i.default.func.isRequired,name:i.default.string,countryName:i.default.string,labelCountry:i.default.node,className:i.default.string,autoFocus:i.default.bool,error:i.default.node,config:i.default.object.isRequired},v.defaultProps={value:"",name:"phone",countryName:"country",requiredErrorMessage:(0,r.default)(d.FormattedMessage,{id:"mandatoryField"}),regexErrorMessage:(0,r.default)(d.FormattedMessage,{id:"fieldPhone"}),required:!0,regex:/^(?=.*[0-9])[- +()0-9]+$/,label:(0,r.default)(d.FormattedMessage,{id:"login_sms_enter_phone_number"}),labelCountry:(0,r.default)(d.FormattedMessage,{id:"login_sms_enter_phone_country"}),error:"",className:"",autoFocus:!1};var _=t.mapStateToProps=function(e){return{config:(0,g.configSelector)(e)}};t.default=(0,l.connect)(_)(v)},1096:function(e,t,a){"use strict";t.__esModule=!0;var o=f(a(24)),r=f(a(4)),n=f(a(38)),s=f(a(13)),i=f(a(20)),l=f(a(21)),d=f(a(0)),u=f(a(1)),c=a(64);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(t){function a(e){(0,s.default)(this,a);var o=(0,i.default)(this,t.call(this,e));return o.handleChange=function(e){var t=o.isValid(e),a=t.valid,r=t.message;o.props.validateOnChange&&o.setState({error:r,value:e}),o.props.onChange(e,o.props.name,a,r)},o.handleBlur=function(e,t,a){if(o.props.validateOnBlur){var r=o.isValid(t).message;o.setState({error:r,value:t})}o.props.onBlur(e,t,a)},o.state={value:e.value},o}return(0,l.default)(a,t),a.prototype.componentDidMount=function(){if(this.props.validateOnMount){var e=this.props,t=e.value,a=e.name,o=this.isValid(t),r=o.message,n=o.valid;this.props.onChange(t,a,n,r)}},a.prototype.componentWillReceiveProps=function(e){this.props.value!==e.value&&this.setState({value:e.value})},a.prototype.isValid=function(e){var t=this.props,a=t.required,o=t.requiredErrorMessage,r=t.regex,n=t.regexErrorMessage,s=t.validate,i=t.validateErrorMessage;if(e){if(r&&!r.test(e))return{valid:!1,message:n};if(s&&!s(e))return{valid:!1,message:i}}else if(a)return{valid:!1,message:o};return{valid:!0,message:""}},a.prototype.render=function(){var t=this.props,a=(t.value,t.onChange,t.onBlur,t.requiredErrorMessage,t.regexErrorMessage,t.required,t.regex,t.validateOnBlur,t.validateOnChange,t.error),o=(0,n.default)(t,["value","onChange","onBlur","requiredErrorMessage","regexErrorMessage","required","regex","validateOnBlur","validateOnChange","error"]);return d.default.createElement(e,(0,r.default)({},o,{onChange:this.handleChange,onBlur:this.handleBlur,value:this.state.value,errorText:a||this.state.error}))},a}(d.default.Component);return t.propTypes={name:u.default.string.isRequired,value:u.default.string,onChange:u.default.func,onBlur:u.default.func,required:u.default.bool,requiredErrorMessage:u.default.node,regex:u.default.oneOfType([u.default.string,u.default.instanceOf(RegExp)]),regexErrorMessage:u.default.node,validate:u.default.func,validateErrorMessage:u.default.node,validateOnBlur:u.default.bool,validateOnChange:u.default.bool,validateOnMount:u.default.bool,error:u.default.node},t.defaultProps={value:"",onChange:function(){},onBlur:function(){},validateOnBlur:!1,validateOnChange:!1,validateOnMount:!0,requiredErrorMessage:(0,o.default)(c.FormattedMessage,{id:"mandatoryField"}),error:""},t}},1107:function(e,t,a){"use strict";t.__esModule=!0,t.ValidatedCodeInput=void 0;var o=s(a(4)),r=s(a(1177)),n=s(a(1096));function s(e){return e&&e.__esModule?e:{default:e}}var i=t.ValidatedCodeInput=(0,n.default)(r.default);i.defaultProps=(0,o.default)({},i.defaultProps,{regexErrorMessage:"",required:!0,regex:/^[0-9]{4,4}$/}),t.default=i},1110:function(e,t){e.exports="/assets/avatar_1.olx.43515025.png"},1111:function(e,t){e.exports="/assets/avatar_2.olx.144b90a6.png"},1112:function(e,t){e.exports="/assets/avatar_3.olx.287465fd.png"},1113:function(e,t){e.exports="/assets/avatar_4.olx.9946512d.png"},1130:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.ResendCodeContainer=void 0;var o=c(a(24)),r=c(a(1)),n=c(a(0)),s=a(44),i=a(31),l=c(a(1089)),d=a(64),u=c(a(104));function c(e){return e&&e.__esModule?e:{default:e}}var f=t.ResendCodeContainer=function(e){var t=e.resendCodeMethods.map(function(t){var a="phone"===t?(0,o.default)(d.FormattedMessage,{id:"login_resend_code_sms"}):(0,o.default)(d.FormattedMessage,{id:"login_resend_code_call"});return(0,o.default)(l.default,{method:t,onClick:e.onClick,text:a},t)});return(0,o.default)(n.default.Fragment,{},void 0,t)};f.propTypes={onClick:r.default.func.isRequired,resendCodeMethods:r.default.array.isRequired};var p=t.mapStateToProps=function(e,t){return{resendCodeMethods:t.config.get("login","resendCodeMethods")}};t.default=(0,i.compose)(u.default,(0,s.connect)(p))(f)},1131:function(e,t,a){"use strict";t.__esModule=!0;t.STEPS={main:"#main",sendmessage:"#sendmessage",resetpassword:"#resetpassword",loginsmscode:"#loginsmscode",loginemailcode:"#loginemailcode",loginsmsenterpassword:"#loginsmsenterpassword",loginemailenterpassword:"#loginemailenterpassword",notificationpermission:"#notificationpermission",termsAndConditions:"#termsAndConditions",loginemail:"#loginemail",loginsms:"#loginsms",loginemailcreatepassword:"#loginemailcreatepassword",loginsmscreatepassword:"#loginsmscreatepassword",verifysms:"#verifysms",recoversmspasswordcode:"#recoversmspasswordcode",accountinuse:"#accountinuse",verifysmscode:"#verifysmscode"},t.ACTIONS={PIN:"PIN",PASSWORD:"PASSWORD"},t.LOGIN_GRANT_TYPE={phone:"phone",email:"email",password:"password",pin:"pin",retry:"retry",recover:"recover"},t.LOGIN_METHOD={phone:"phone",email:"email",sms:"sms",call:"call"},t.VERIFICATION_METHOD={login:"login",linkaccount:"linkaccount",recoversmspassword:"recoversmspassword"}},1175:function(e,t,a){e.exports={phoneInput:"_31-yO",countryCode:"_1LjGD",phone:"_1wSEZ"}},1176:function(e,t,a){e.exports={userImage:"OOGRC",icon:"_2HSAl",line:"_1kL8T"}},1177:function(e,t,a){"use strict";t.__esModule=!0;var o=p(a(1178)),r=p(a(24)),n=p(a(13)),s=p(a(20)),i=p(a(21)),l=p(a(0)),d=p(a(1)),u=p(a(1182)),c=p(a(65)),f=p(a(1185));function p(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(a){(0,n.default)(this,t);var o=(0,s.default)(this,e.call(this,a));m.call(o);var r=o.normalizeValues(a.value,a.codeLength);return o.state={value:r.join(""),values:r},o}return(0,i.default)(t,e),t.prototype.normalizeValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.codeLength,a=String(e||"").substring(0,t).split("");return a.concat(new Array(t-a.length).fill(""))},t.prototype.render=function(){var e=this,t=this.props,a=t.codeLength,o=t.errorText,n=t.className,s=Array(a).fill().map(function(t,a){return(0,r.default)("div",{className:f.default.code},a,l.default.createElement("input",{onPaste:e.handlePaste,autoFocus:0===a,name:a,maxLength:"1",type:"number",onBlur:e.handleBlur,onChange:e.handleChange,onKeyDown:e.handleKeyDown,onKeyUp:e.onKeyUp,value:e.getInputValue(a),ref:function(t){return e[e.getInputKey(a)]=t},className:e.state.values[a]?f.default.fill:""}),(0,r.default)("span",{className:f.default.dash},void 0,"-"))});return(0,r.default)("div",{className:(0,c.default)(n,f.default.codeInput)},void 0,(0,r.default)("div",{className:f.default.inputs},void 0,s),(0,r.default)("span",{className:f.default.error},void 0,o))},t}(l.default.Component);g.propTypes={onChange:d.default.func,onBlur:d.default.func,name:d.default.string,errorText:d.default.node,codeLength:d.default.number,value:d.default.oneOfType([d.default.string,d.default.number]),className:d.default.string},g.defaultProps={onChange:function(){},name:"code",onBlur:function(){},errorText:"",codeLength:4,value:"",className:""};var m=function(){var e=this;this.handlePaste=function(t){var a=new u.default(t.clipboardData).getText();if((0,o.default)(parseInt(a,10))){var r=e.normalizeValues(a);e.setState({value:r.join(""),values:r},function(){return e.sendOnChange()})}},this.handleChange=function(t){var a=[].concat(e.state.values),o=parseInt(t.target.name,10),r=t.target.value;r.length>1||(a[o]=r,r&&o+1<e.props.codeLength&&e.focusInput(o+1),e.setState({values:a,value:a.join("")},function(){return e.sendOnChange()}))},this.handleBlur=function(t){for(var a=e.props.codeLength,o=0;o<a;o++)if(document.activeElement===e[e.getInputKey(o)])return;e.props.onBlur(t,e.state.value,e.props.name)},this.handleKeyDown=function(t){var a=e.state.values,o=parseInt(t.target.name,10);8===t.keyCode&&o>0&&!a[o]&&e.focusInput(o-1)},this.onKeyUp=function(t){if(!t.target.validity.valid){var a=parseInt(t.target.name,10);e[e.getInputKey(a)].value=""}},this.sendOnChange=function(){return e.props.onChange(e.state.value,e.props.name)},this.getInputKey=function(e){return"input-"+e},this.getInputValue=function(t){return e.state.values[t]},this.focusInput=function(t){return e[e.getInputKey(t)]&&e[e.getInputKey(t)].focus()}};t.default=g},1185:function(e,t,a){e.exports={codeInput:"_36_1g",inputs:"_1nemW",code:"iuSxO",dash:"_1l1md",fill:"_1TThd",error:"_2lJ2N"}},1186:function(e,t,a){e.exports={resendCode:"_2JN7X",resend:"_1usK3",disabled:"_37iBb"}},1187:function(e,t,a){"use strict";t.__esModule=!0,t.PasswordInput=void 0;var o=g(a(4)),r=g(a(24)),n=g(a(38)),s=g(a(13)),i=g(a(20)),l=g(a(21)),d=g(a(0)),u=g(a(1)),c=a(64),f=g(a(1404)),p=g(a(1405));function g(e){return e&&e.__esModule?e:{default:e}}var m=t.PasswordInput=function(e){function t(a){(0,s.default)(this,t);var o=(0,i.default)(this,e.call(this,a));return o.state={value:"",confirmValue:""},o.isValidConfirm=function(e){return e===o.state.value},o.handlePasswordChange=function(e){for(var t,a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];o.setState({value:e},function(){var e=o.state.confirmValue,t=o.isValidConfirm(e);o.props.onConfirmChange(e,o.getConfirmName(),t,t?"":o.props.confirmErrorMessage)}),(t=o.props).onChange.apply(t,[e].concat(r))},o.handleConfirmChange=function(e,t,a,r){o.setState({confirmValue:e}),o.props.onConfirmChange(e,o.getConfirmName(),a,r)},o.extras={autoComplete:a.confirmPassword?"new-password":"current-password"},o}return(0,l.default)(t,e),t.prototype.getConfirmName=function(){return this.props.name+"-confirm"},t.prototype.render=function(){var e=this.props,t=e.confirmPassword,a=e.confirmError,s=e.confirmErrorMessage,i=e.confirmLabel,l=(e.onConfirmChange,e.onChange,e.autoFocus),u=e.confirmValue,c=(0,n.default)(e,["confirmPassword","confirmError","confirmErrorMessage","confirmLabel","onConfirmChange","onChange","autoFocus","confirmValue"]),g=this.getConfirmName();return(0,r.default)("div",{className:p.default.passwordInput,"data-aut-id":"passwordInput"},void 0,d.default.createElement(f.default,(0,o.default)({className:p.default.input,id:this.props.name,autoFocus:l,extras:this.extras,onChange:this.handlePasswordChange,"data-aut-id":"password"},c)),t&&(0,r.default)(f.default,{className:p.default.input,name:g,id:g,error:a,label:i,onChange:this.handleConfirmChange,validate:this.isValidConfirm,validateErrorMessage:s,extras:this.extras,validateOnBlur:this.props.validateOnBlur,validateOnChange:this.props.validateOnChange,value:u,"data-aut-id":"confirmPassword"}))},t}(d.default.Component);m.propTypes={name:u.default.string,onConfirmChange:u.default.func,onChange:u.default.func,validateOnBlur:u.default.bool,validateOnChange:u.default.bool,confirmError:u.default.node,confirmErrorMessage:u.default.node,required:u.default.bool,label:u.default.oneOfType([u.default.element,u.default.string]),confirmLabel:u.default.oneOfType([u.default.element,u.default.string]),confirmPassword:u.default.bool,error:u.default.node,autoFocus:u.default.bool,confirmValue:u.default.string},m.defaultProps={name:"password",onConfirmChange:function(){},onChange:function(){},required:!0,label:(0,r.default)(c.FormattedMessage,{id:"password"}),confirmLabel:(0,r.default)(c.FormattedMessage,{id:"login_email_enter_password_confirm"}),confirmErrorMessage:(0,r.default)(c.FormattedMessage,{id:"login_email_enter_password_dont_match_message"}),confirmPassword:!1,validateOnBlur:!1,validateOnChange:!1,error:"",autoFocus:!1,confirmValue:""},t.default=m},1208:function(e,t,a){"use strict";t.__esModule=!0,t.RegisterPasswordInput=void 0;var o=u(a(4)),r=u(a(24)),n=u(a(0)),s=u(a(1)),i=u(a(1187)),l=a(64),d=u(a(104));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.default)(l.FormattedMessage,{id:"login_create_password_instructions"}),f=t.RegisterPasswordInput=function(e){return n.default.createElement(i.default,(0,o.default)({confirmPassword:!0,required:!0,regex:new RegExp(e.config.get("validations").password),regexErrorMessage:c,hintText:c},e))};f.propTypes={config:s.default.shape({get:s.default.func.isRequired}).isRequired},t.default=(0,d.default)(f)},1315:function(e,t,a){"use strict";t.__esModule=!0,t.EmailInput=void 0;var o=d(a(24)),r=d(a(4)),n=d(a(0)),s=d(a(1)),i=a(64),l=d(a(1084));function d(e){return e&&e.__esModule?e:{default:e}}var u={autoComplete:"username"},c=t.EmailInput=function(e){return n.default.createElement(l.default,(0,r.default)({autoFocus:e.autoFocus,extras:u},e))};c.defaultProps={value:"",autoFocus:!0,name:"email",regexErrorMessage:(0,o.default)(i.FormattedMessage,{id:"invalidEmail"}),required:!0,regex:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,validateOnBlur:!1,validateOnChange:!1,label:(0,o.default)(i.FormattedMessage,{id:"login_email_enter_email_email"})},c.propTypes={autoFocus:s.default.bool},t.default=c},1389:function(e,t,a){"use strict";t.__esModule=!0;t.getUserFromProp=function(e){var t=(e||{}).router,a=(t=void 0===t?{}:t).params,o=void 0===a?{}:a;return o&&o.userId?o.userId:""},t.getLoginMethod=function(e){return e.search("@")>0?"email":"phone"}},1390:function(e,t,a){"use strict";t.__esModule=!0,t.mapDispatchToProps=t.mapStateToProps=void 0;var o=M(a(24)),r=M(a(13)),n=M(a(20)),s=M(a(21)),i=M(a(0)),l=M(a(1)),d=M(a(37)),u=M(a(1391)),c=a(44),f=M(a(1392)),p=w(a(66)),g=a(354),m=w(a(171)),h=a(67),v=M(a(372)),_=a(31),S=M(a(104)),k=a(349),y=a(247),C=a(348);function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function M(e){return e&&e.__esModule?e:{default:e}}var P=function(e){function t(a){(0,r.default)(this,t);var o=(0,n.default)(this,e.call(this,a));return o.onFacebookClick=function(){o.props.onClick(),o.props.track(C.LoginTrackingKeys.LOGIN_SIGN_IN_START,{login_method:"facebook"})},o.responseFacebook=function(e){var t=m.getCountryConfig(o.props.generalConfig);!o.props.displayAsToggleSwitch&&e.accessToken&&!p.isEmpty(t)&&t.privacy_links&&t.privacy_links.terms_url&&t.privacy_links.privacy_url&&t.privacy_links.cookies_url?o.setState({showGdpr:!0,accessToken:e.accessToken}):e.accessToken?o.onFacebookLogin(e.accessToken):o.responseFacebookFailure(e.status?e.status:e,"facebook_response")},o.processFacebookLogin=function(e){var t=function(e){o.props.track(C.LoginTrackingKeys.LOGIN_SIGN_IN_COMPLETE,{login_method:"facebook",login_type:e})},a=o.props,r=a.isLegionEnabled,n=a.authenticateLogin;r?n({grantType:"facebook",token:e},function(e){if(!e.data||!e.ok){var a=(0,g.getError)(e);o.responseFacebookFailure(a,"facebook_loginWithFacebook")}var r=e.data,n=r.user.id,s=r.access_token,i=r.refresh_token;d.default.setChatTokenInLocalStorage(n,function(){var a=(0,y.parserToken)(s).is_new_user,r=(0,y.parserToken)(i).reactivated;o.props.checkNotification(!0,r),t(e.data.user&&a?"register":"login")})}):d.default.loginWithFacebook(e,function(e){if(!e.data||e.error){var a=(0,g.getError)(e);o.responseFacebookFailure(a,"facebook_loginWithFacebook")}else o.props.checkNotification(!0,e.data.info.reactivated),t(e.data&&e.data.info.new_account?"register":"login")})},o.responseFacebookFailure=function(e,t){o.props.track(C.LoginTrackingKeys.LOGIN_ERRORS,{login_method:"facebook",error_message:e,error_origin:t}),o.props.responseFailure(e),o.props.displayLoginLoader(!1)},o.onAccept=function(){o.state.accessToken&&o.onFacebookLogin(o.state.accessToken)},o.onDeny=function(){o.setState({showGdpr:!1,accessToken:""})},o.state={showGdpr:!1,accessToken:""},o}return(0,s.default)(t,e),t.prototype.onFacebookLogin=function(e){var t=this;this.props.displayLoginLoader(!0),this.props.displayAsToggleSwitch?this.props.linkAccount("facebook",e,function(e){if(e.data&&!e.data.error)t.props.responseSuccess&&(t.props.responseSuccess(e),t.props.displayLoginLoader(!1));else{var a=(0,g.getError)(e);t.props.displayLoginLoader(!1),t.responseFacebookFailure(a,"facebook_verifyYourAccount")}}):this.processFacebookLogin(e)},t.prototype.render=function(){return(0,o.default)("div",{className:u.default.registerfb+" "+(this.props.displayAsToggleSwitch&&u.default.fbverifywrapper)},void 0,this.state.showGdpr&&(0,o.default)("div",{className:u.default.terms},void 0,(0,o.default)(v.default,{onClickAccept:this.onAccept,onClickDeny:this.onDeny})),(0,o.default)(f.default,{buttonText:this.props.buttonText,cssClass:this.props.displayAsToggleSwitch?u.default.actionLink:u.default.actionButton,disableMobileRedirect:!0,appId:this.props.facebookAppId,fields:"name,email,picture",callback:this.responseFacebook,onClick:this.onFacebookClick,displayAsToggleSwitch:this.props.displayAsToggleSwitch}))},t}(i.default.Component);P.propTypes={displayAsToggleSwitch:l.default.bool,displayLoginLoader:l.default.func,buttonText:l.default.object,responseSuccess:l.default.func,responseFailure:l.default.func,track:l.default.func,checkNotification:l.default.func,onClick:l.default.func,generalConfig:l.default.object,facebookAppId:l.default.string.isRequired,isLegionEnabled:l.default.bool,authenticateLogin:l.default.func.isRequired,linkAccount:l.default.func.isRequired},P.defaultProps={displayAsToggleSwitch:!1,displayLoginLoader:function(){},buttonText:{},responseSuccess:function(){},responseFailure:function(){},track:function(){},checkNotification:function(){},onClick:function(){},generalConfig:{},isLegionEnabled:!1};var T=t.mapStateToProps=function(e,t){var a=t.config;return{generalConfig:e.config.collections[h.urls.getConfig],facebookAppId:a.get("login","facebookAppId"),isLegionEnabled:a.get("login","legion").enabled}},b=t.mapDispatchToProps=function(e){return{authenticateLogin:function(t,a){return e((0,k.authenticateLogin)(t)).then(function(e){return a(e)})},linkAccount:function(t,a,o){return e((0,k.linkAccount)(t,a)).then(function(e){return o(e)})}}};t.default=(0,_.compose)(S.default,(0,c.connect)(T,b))(P)},1391:function(e,t,a){e.exports={registerfb:"_2i9tI",actionLink:"_2QbTN",terms:"_230oX",fbverifywrapper:"_2hejm"}},1392:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(a(1393));t.default=o.default},1393:function(e,t,a){"use strict";t.__esModule=!0;var o=f(a(24)),r=f(a(14)),n=f(a(13)),s=f(a(20)),i=f(a(21)),l=f(a(0)),d=f(a(1)),u=f(a(346)),c=f(a(1129));function f(e){return e&&e.__esModule?e:{default:e}}var p=u.default.icons,g=function(e){function t(){(0,n.default)(this,t);var a=(0,s.default)(this,e.call(this));return a.login=function(){if(a.state.isSdkLoaded&&!a.state.isProcessing&&!a.props.isDisabled){a.setState({isProcessing:!0});var e=a.props,t=e.scope,o=e.onClick;"function"==typeof o&&o(),window.FB.login(a.checkLoginState.bind(a),{scope:t})}},a.onToggle=function(e){e&&a.login()},a.state={isSdkLoaded:!1,isProcessing:!1},a}return(0,i.default)(t,e),t.prototype.componentDidMount=function(){if(document.getElementById("facebook-jssdk"))this.sdkLoaded();else{window.FB&&window.FB.XFBML.parse(),this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}},t.prototype.setFbAsyncInit=function(){var e=this,t=this.props,a=t.appId,o=t.xfbml,r=t.cookie,n=t.version;window.fbAsyncInit=function(){window.FB.init({version:"v"+n,appId:a,xfbml:o,cookie:r}),window.FB.XFBML.parse(),e.sdkLoaded(),window.location.search.includes("facebookdirect")&&window.FB.getLoginStatus(e.checkLoginAfterRefresh.bind(e))}},t.prototype.sdkLoaded=function(){this.setState({isSdkLoaded:!0})},t.prototype.loadSdkAsynchronously=function(){var e=this.props.language;!function(t,a,o){var r=t.getElementsByTagName(a)[0],n=r,s=r;t.getElementById(o)||((s=t.createElement(a)).id=o,s.src="//connect.facebook.net/"+e+"/all.js",n.parentNode.insertBefore(s,n))}(document,"script","facebook-jssdk")},t.prototype.responseApi=function(e){var t=this;window.FB.api("/me",{fields:this.props.fields},function(a){(0,r.default)(a,e),t.props.callback(a)})},t.prototype.checkLoginState=function(e){this.setState({isProcessing:!1}),e.authResponse?this.responseApi(e.authResponse):this.props.callback&&this.props.callback({status:e.status})},t.prototype.checkLoginAfterRefresh=function(e){var t=this;"unknown"===e.status?window.FB.login(function(e){return t.checkLoginState(e)},!0):this.checkLoginState(e)},t.prototype.containerStyle=function(){var e={transition:"opacity 0.5s"};return(this.state.isProcessing||!this.state.isSdkLoaded||this.props.isDisabled)&&(e.opacity=.6),(0,r.default)(e,this.props.containerStyle)},t.prototype.continueWithButton=function(){var e=this.props,t=e.cssClass,a=e.size,r=e.buttonText,n=e.buttonStyle;return this.props.displayAsToggleSwitch?(0,o.default)(c.default,{onToggle:this.onToggle}):(0,o.default)("span",{style:this.containerStyle()},void 0,(0,o.default)("button",{className:t+" "+a,style:n,"data-aut-id":"facebookLogin",onClick:this.login},void 0,(0,o.default)("i",{className:p.panameraIcons+" "+p["icon-Facebook"]}),(0,o.default)("span",{},void 0,r)))},t.prototype.render=function(){return(0,o.default)("div",{},void 0,this.continueWithButton())},t}(l.default.Component);g.propTypes={isDisabled:d.default.bool,callback:d.default.func.isRequired,appId:d.default.string.isRequired,xfbml:d.default.bool,cookie:d.default.bool,scope:d.default.string,buttonText:d.default.object,size:d.default.string,fields:d.default.string,cssClass:d.default.string,version:d.default.string,language:d.default.string,onClick:d.default.func,containerStyle:d.default.object,buttonStyle:d.default.object,displayAsToggleSwitch:d.default.bool},g.defaultProps={buttonText:"Login with Facebook",scope:"public_profile,email",xfbml:!1,cookie:!1,size:"metro",fields:"name",cssClass:"",version:"3.1",language:"en_US",displayAsToggleSwitch:!1},t.default=g},1394:function(e,t,a){"use strict";t.__esModule=!0,t.mapDispatchToProps=t.mapStateToProps=void 0;var o=y(a(24)),r=y(a(13)),n=y(a(20)),s=y(a(21)),i=y(a(0)),l=y(a(1)),d=y(a(37)),u=a(44),c=a(31),f=a(67),p=y(a(1395)),g=a(354),m=a(247),h=y(a(104)),v=y(a(1396)),_=y(a(372)),S=a(349),k=a(348);function y(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(){(0,r.default)(this,t);var a=(0,n.default)(this,e.call(this));return a.responseSuccess=function(e){var t=a.props.config.features.find(function(e){return"terms_gdpr"===e.name});e.tokenObj&&e.tokenObj.id_token&&(t.enabled?a.setState({showGdpr:!0,accessToken:e.tokenObj}):a.onGoogleLogin(e.tokenObj))},a.onRequest=function(){a.props.track(k.LoginTrackingKeys.LOGIN_SIGN_IN_START,{login_method:"google",login_submethod:"googleLogin"}),a.props.onClick()},a.onFailure=function(){a.props.displayLoginLoader(!1)},a.onAccept=function(){a.state.accessToken&&(a.props.displayLoginLoader(!0),a.onGoogleLogin(a.state.accessToken))},a.onDeny=function(){a.setState({showGdpr:!1,accessToken:""})},a.processGoogleLogin=function(e){var t=e.id_token;if(a.props.displayLoginLoader(!0),a.props.isLegionEnabled){var o={grantType:"gplus",token:t};a.props.authenticateLogin(o,function(e){if(e.data&&e.ok){var t=e.data,o=t.user.id,r=t.access_token,n=t.refresh_token;d.default.setChatTokenInLocalStorage(o,function(){a.props.checkNotification();var t=(0,m.parserToken)(r).is_new_user,o=(0,m.parserToken)(n).reactivated;a.props.track(k.LoginTrackingKeys.LOGIN_SIGN_IN_COMPLETE,{login_method:"google",login_submethod:"googleLogin",login_type:e.data.user&&t?"register":"login",select_from:"google_screen"}),a.props.checkNotification(!0,o)})}else{var s=(0,g.getError)(e);a.props.track(k.LoginTrackingKeys.LOGIN_ERRORS,{login_method:"google",error_message:s,login_submethod:"googleLogin",error_origin:"google_loginWithGoogle"}),a.props.displayLoginLoader(!1)}})}else d.default.loginWithGoogle(t,function(e){if(e.data&&!e.error)a.props.responseSuccess&&a.props.responseSuccess(e),a.props.track(k.LoginTrackingKeys.LOGIN_SIGN_IN_COMPLETE,{login_method:"google",login_submethod:"googleLogin",login_type:e.data.info&&e.data.info.new_account?"register":"login"}),a.props.checkNotification(!0,e.data.info.reactivated);else{var t=(0,g.getError)(e);a.props.track(k.LoginTrackingKeys.LOGIN_ERRORS,{login_method:"google",error_message:t,login_submethod:"googleLogin",error_origin:"google_loginWithGoogle"}),a.props.responseFailure(t),a.props.displayLoginLoader(!1)}})},a.state={showGdpr:!1,accessToken:""},a}return(0,s.default)(t,e),t.prototype.onGoogleLogin=function(e){var t=this;this.props.verifyYourAccount?this.props.linkAccount("gplus",e.id_token,function(e){if(e.data&&!e.data.error)t.props.checkNotification(),t.props.responseSuccess&&t.props.responseSuccess(e);else{var a=(0,g.getError)(e);t.props.responseFailure(a)}t.props.displayLoginLoader(!1)}):this.processGoogleLogin(e)},t.prototype.render=function(){return(0,o.default)(i.default.Fragment,{},void 0,this.state.showGdpr&&(0,o.default)("div",{className:p.default.terms},void 0,(0,o.default)(_.default,{onClickAccept:this.onAccept,onClickDeny:this.onDeny})),(0,o.default)(v.default,{clientId:this.props.googleClientId,onSuccess:this.responseSuccess,onRequest:this.onRequest,onFailure:this.onFailure,responseType:"id_token",tag:"div",className:this.props.className,type:"text"},void 0,this.props.children))},t}(i.default.Component);C.propTypes={responseSuccess:l.default.func,responseFailure:l.default.func,verifyYourAccount:l.default.bool,displayLoginLoader:l.default.func,className:l.default.string,track:l.default.func,children:l.default.oneOfType([l.default.string,l.default.element]),checkNotification:l.default.func,onClick:l.default.func,googleClientId:l.default.string.isRequired,config:l.default.object.isRequired,isLegionEnabled:l.default.bool,authenticateLogin:l.default.func.isRequired,linkAccount:l.default.func.isRequired},C.defaultProps={responseSuccess:function(){},responseFailure:function(){},verifyYourAccount:!1,displayLoginLoader:function(){},children:"Google",track:function(){},checkNotification:function(){},onClick:function(){},isLegionEnabled:!1};var w=t.mapStateToProps=function(e,t){var a=t.config;return{config:e.config.collections[f.urls.getConfig],googleClientId:a.get("login","googleClientId"),isLegionEnabled:a.get("login","legion").enabled}},M=t.mapDispatchToProps=function(e){return{authenticateLogin:function(t,a){return e((0,S.authenticateLogin)(t)).then(function(e){return a(e)})},linkAccount:function(t,a,o){return e((0,S.linkAccount)(t,a)).then(function(e){return o(e)})}}};t.default=(0,c.compose)(h.default,(0,u.connect)(w,M))(C)},1395:function(e,t,a){e.exports={terms:"_3tLNH"}},1404:function(e,t,a){"use strict";t.__esModule=!0,t.EyedPasswordInput=void 0;var o=d(a(4)),r=d(a(13)),n=d(a(20)),s=d(a(21)),i=d(a(0)),l=d(a(1084));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.EyedPasswordInput=function(e){function t(){var a,o,s;(0,r.default)(this,t);for(var i=arguments.length,l=Array(i),d=0;d<i;d++)l[d]=arguments[d];return a=o=(0,n.default)(this,e.call.apply(e,[this].concat(l))),o.state={showPassword:!1},o.handleIconClick=function(){o.setState({showPassword:!o.state.showPassword})},s=a,(0,n.default)(o,s)}return(0,s.default)(t,e),t.prototype.render=function(){var e=this.state.showPassword;return i.default.createElement(l.default,(0,o.default)({type:e?"text":"password",icon:e?"icon-EyeOff":"icon-View",iconClick:this.handleIconClick},this.props))},t}(i.default.Component);t.default=u},1405:function(e,t,a){e.exports={passwordInput:"uXcdZ"}},1418:function(e,t,a){"use strict";t.__esModule=!0,t.LogInSmsCode=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=a(64),u=h(a(165)),c=h(a(1054)),f=h(a(1107)),p=h(a(168)),g=h(a(1057)),m=h(a(1130));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));s.handleSubmit=function(e){var t=e.values;s.props.validateChallenge("phone",s.props.user.descriptor,t.code,"login")},s.createChallenge=function(e,t){s.props.createChallenge(t,s.props.user.descriptor,"",!1),s.props.track("login_resend_code",{login_method:"phone",select_from:"phone"===t?"sms":t,intents:e})};var i=a.user.descriptor?a.user.descriptor:a.user.phone;return s.translationsValues={login:{value:(0,o.default)("strong",{},void 0,i)},register:{phone:(0,o.default)("strong",{},void 0,i)}},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track("login_show_pin")},t.prototype.render=function(){var e=this;return(0,o.default)(c.default,{onSubmit:this.handleSubmit,className:p.default.formContainer,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{},void 0,(0,o.default)(g.default,{}),(0,o.default)("h3",{className:p.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_enter_confirmation_code_title"})),(0,o.default)("p",{className:p.default.formText},void 0,(0,o.default)(d.FormattedMessage,{id:"login_sms_enter_code_register_message",values:e.translationsValues.register})),(0,o.default)("div",{className:p.default.fieldsContainer},void 0,(0,o.default)(f.default,{name:"code",onChange:a,error:e.props.error||r.code})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:p.default.button},void 0,e.props.buttonTitle),(0,o.default)(m.default,{onClick:e.createChallenge}))}})},t}(i.default.Component);v.propTypes={track:l.default.func,user:l.default.object,error:l.default.string,createChallenge:l.default.func,validateChallenge:l.default.func,buttonTitle:l.default.oneOfType([l.default.element,l.default.string])},v.defaultProps={user:{},error:"",track:function(){},createChallenge:function(){},validateChallenge:function(){},buttonTitle:(0,o.default)(d.FormattedMessage,{id:"logIn"})},t.LogInSmsCode=v,t.default=v},1551:function(e,t,a){"use strict";var o,r;t.__esModule=!0,t.authenticationFactory=t.PROPS=void 0;var n=P(a(0)),s=P(a(2365)),i=P(a(2374)),l=P(a(2375)),d=P(a(2376)),u=P(a(1418)),c=P(a(2378)),f=P(a(2379)),p=P(a(2380)),g=P(a(2381)),m=P(a(2382)),h=P(a(2383)),v=P(a(2384)),_=P(a(424)),S=P(a(372)),k=P(a(2385)),y=P(a(2386)),C=P(a(2387)),w=P(a(2388)),M=a(1131);function P(e){return e&&e.__esModule?e:{default:e}}var T=t.PROPS={updateStep:"updateStep",user:"user",track:"track",updateUser:"updateUser",error:"error",checkGdpr:"checkGdpr",itemUser:"itemUser",checkNotification:"checkNotification",displayLoginLoader:"displayLoginLoader",redirect:"redirect",findUser:"findUser",loginWithUsername:"loginWithUsername",forgotPassword:"forgotPassword",createPassword:"createPassword",validateChallenge:"validateChallenge",createChallenge:"createChallenge",recoverPassword:"recoverPassword",onClickGotIt:"onClickGotIt",onClickAccept:"onClickAccept",onClickDeny:"onClickDeny",authenticate:"authenticate",userAuthenticateData:"userAuthenticateData",step:"step"},b=((o={})[M.STEPS.main]="main",o[M.STEPS.loginemail]="loginemail",o[M.STEPS.loginemailenterpassword]="loginemailenterpassword",o[M.STEPS.loginemailcreatepassword]="loginemailcreatepassword",o[M.STEPS.loginsmsenterpassword]="loginsmsenterpassword",o[M.STEPS.loginsmscreatepassword]="loginsmscreatepassword",o[M.STEPS.loginemailcode]="loginemailcode",o[M.STEPS.loginsms]="loginsms",o[M.STEPS.loginsmscode]="loginsmscode",o[M.STEPS.recoversmspasswordcode]="recoversmspasswordcode",o[M.STEPS.resetpassword]="recoverPassword",o[M.STEPS.notificationpermission]="notificationpermission",o[M.STEPS.sendmessage]="sendmessage",o[M.STEPS.termsAndConditions]="termsAndConditions",o),L=((r={})[M.STEPS.main]="main",r[M.STEPS.loginemail]="enterUser",r[M.STEPS.loginemailenterpassword]="enterPassword",r[M.STEPS.loginemailcreatepassword]="createPassword",r[M.STEPS.loginsmsenterpassword]="enterPassword",r[M.STEPS.loginsmscreatepassword]="createPassword",r[M.STEPS.loginemailcode]="enterCode",r[M.STEPS.loginsms]="enterUser",r[M.STEPS.loginsmscode]="enterCode",r[M.STEPS.notificationpermission]="notificationPermission",r[M.STEPS.sendmessage]="sendmessage",r[M.STEPS.termsAndConditions]="termsAndConditions",r[M.STEPS.resetpassword]="recoverPassword",r);t.authenticationFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],a=arguments[2],o=function(e){var t={main:{props:[T.user,T.track,T.checkGdpr,T.itemUser,T.checkNotification,T.displayLoginLoader,T.redirect],component:s.default},loginemail:{props:[T.updateStep,T.user,T.updateUser,T.findUser],component:l.default},loginemailenterpassword:{props:[T.updateStep,T.user,T.error,T.loginWithUsername,T.forgotPassword],component:h.default},loginemailcreatepassword:{props:[T.updateStep,T.user,T.error,T.loginWithUsername],component:v.default},loginsmsenterpassword:{props:[T.updateStep,T.user,T.track,T.error,T.loginWithUsername,T.createChallenge],component:p.default},loginsmscreatepassword:{props:[T.updateStep,T.user,T.error,T.createPassword],component:g.default},loginemailcode:{props:[T.user,T.track,T.error,T.validateChallenge,T.createChallenge],component:c.default},loginsms:{props:[T.updateStep,T.user,T.updateUser,T.error,T.findUser],component:i.default},loginsmscode:{props:[T.user,T.error,T.track,T.validateChallenge,T.createChallenge],component:u.default},recoversmspasswordcode:{props:[T.user,T.error,T.track,T.validateChallenge,T.createChallenge],component:m.default},recoverPassword:{props:[T.user,T.error,T.track,T.recoverPassword],component:f.default},notificationpermission:{props:[T.onClickGotIt],component:_.default},sendmessage:{props:[T.updateStep,T.user,T.updateUser,T.track,T.itemUser],component:d.default},termsAndConditions:{props:[T.onClickAccept,T.onClickDeny],component:S.default},enterUser:{props:[T.updateStep,T.step,T.error,T.user,T.authenticate],component:y.default},enterPassword:{props:[T.updateStep,T.user,T.step,T.error,T.track,T.authenticate,T.userAuthenticateData],component:C.default},createPassword:{props:[T.createPassword,T.updateStep,T.userAuthenticateData,T.error,T.track],component:k.default},enterCode:{props:[T.track,T.error,T.authenticate,T.userAuthenticateData,T.step],component:w.default}};return t.hasOwnProperty(e)?t[e]:t.main}(e?L[t]:b[t]),r={};return o.props.forEach(function(e){r[e]=a[e]}),n.default.createElement(o.component,r)}},2364:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.CoreLogin=void 0;var o=j(a(24)),r=j(a(14)),n=j(a(13)),s=j(a(20)),i=j(a(21)),l=j(a(0)),d=j(a(1)),u=a(44),c=a(31),f=j(a(37)),p=a(54),g=j(a(176)),m=W(a(10)),h=W(a(66)),v=W(a(140)),_=W(a(354)),S=W(a(171)),k=a(247),y=j(a(353)),C=j(a(355)),w=a(349),M=a(82),P=a(104),T=j(a(128)),b=j(a(1066)),L=a(1551),N=a(1131),E=a(348),O=a(350),I=a(67),F=a(64),R=j(a(241)),x=j(a(238)),A=j(a(240)),U=j(a(346)),D=j(a(168)),q=j(a(1110)),V=j(a(1111)),G=j(a(1112)),B=j(a(1113));function W(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}var K=[q.default,V.default,G.default,B.default],H=U.default.icons,Y=t.CoreLogin=function(e){function t(a){(0,n.default)(this,t);var o=(0,s.default)(this,e.call(this,a));z.call(o);var r=N.STEPS.main,i="1";return a.step?r=a.step:a.loginModalState&&a.loginModalState.user&&!a.loginModalState.message&&(r=N.STEPS.sendmessage,i=a.loginModalState.user.avatar_id===i?"2":i),o.state={step:r,error:"",isOpened:!0,showLoader:!0,showFullLoader:!1,showOverlay:!0,nextStep:""},o.loginSmsPasswordEnabled=a.loginConfig.loginSmsPasswordEnabled,o.defaultUserImage=K[i-1],o.user={phone:a.phone,descriptor:a.phone||decodeURIComponent(a.email),image:o.defaultUserImage,email:decodeURIComponent(a.email),countryCode:a.loginConfig.countryCode,message:a.loginModalState&&a.loginModalState.message?a.loginModalState.message:""},o.redirectTo=a.loginModalState?a.loginModalState.redirectTo:o.props.redirect,a.loginModalState&&a.loginModalState.trackProps&&a.loginModalState.trackProps.origin?o.origin=a.loginModalState.trackProps.origin:o.origin="home",o.translationsValues={brand:{brand:a.brand}},o.selectFrom="own_flow",o.loginType="login",o}return(0,i.default)(t,e),t.prototype.componentWillMount=function(){this.props.location&&this.props.location.pathname&&this.updateHash(this.props.location.pathname,this.state.step,this.props.location.query)},t.prototype.componentDidMount=function(){var e=this;k.smartlockHelper.isCredentialManagementSupportedInBrowser()&&this.state.step===N.STEPS.main?(this.displayOverlay(!0),this.track("smartlock_mediation_request",{login_type:"login",select_from:"smartlock_select"}),k.smartlockHelper.getCredentials("required").then(function(t){t&&"password"===t.type?(e.user.email=t.id,e.user.descriptor=t.id,e.selectFrom="smartlock_select",e.track("login_smartlock_sign_in_start",{login_method:f.default.getLoginMethod(t.id),login_type:"login"}),e.track("smartlock_mediation_response",{login_type:"login",select_from:"smartlock_mediation_request",response_status:"credentials"}),e.displayOverlay(!0),e.loginWithUsername(t.id,t.password)):(e.track("smartlock_mediation_response",{login_type:"login",select_from:"smartlock_select",response_status:"no_credentials"}),e.displayFullLoader(!1),e.displayOverlay(!1),e.displayLoginLoader(!1))}).catch(function(t){e.track("smartlock_error",{error_message:t,login_type:"login",select_from:"smartlock_select"}),e.displayFullLoader(!1),e.displayOverlay(!1),e.displayLoginLoader(!1)})):(this.displayFullLoader(!1),this.displayOverlay(!1),this.displayLoginLoader(!1))},t.prototype.componentWillReceiveProps=function(e){e.location.hash!==this.props.location.hash&&e.location.hash!==this.state.step&&(e.location.hash?this.updateStep(e.location.hash):this.close())},t.prototype.shouldComponentUpdate=function(e,t){return this.state.step!==t.step||(this.props.location.hash!==e.location.hash||(this.state.error!==t.error||(this.state.isOpened!==t.isOpened||(this.state.showOverlay!==t.showOverlay||(this.state.showLoader!==t.showLoader||this.state.showFullLoader!==t.showFullLoader)))))},t.prototype.updateHash=function(e,t,a){var o=void 0,n=(0,r.default)({},a);o=""+(o=a&&!h.isEmpty(a)?e+"?"+m.paramsToQueryString(n):e)+t,this.props.router.push(o)},t.prototype.removeHash=function(e,t){var a=void 0,o=(0,r.default)({},t);a=t&&!h.isEmpty(t)?e+"?"+m.paramsToQueryString(o):e,this.props.router.push(a)},t.prototype.render=function(){var e=void 0;return this.state.showFullLoader?(0,o.default)(A.default,{}):this.state.showOverlay?(0,o.default)("div",{className:D.default.overlay}):(this.state.showLoader?e=(0,o.default)("div",{className:D.default.loader},void 0,(0,o.default)(x.default,{})):this.state.step&&(e=this.getStep()),(0,o.default)("div",{},void 0,(0,o.default)(R.default,{isOpened:this.state.isOpened,overlayClassName:D.default.login,contentClassName:D.default.modal,onClose:this.close},void 0,(0,o.default)("span",{className:D.default.close+" "+H.panameraIcons+" "+H["icon-Cross"],"data-aut-id":"btnClose",onClick:this.close}),e)))},t}(l.default.Component);Y.propTypes={step:d.default.string,phone:d.default.string,token:d.default.string,email:d.default.string,findUser:d.default.func,location:d.default.object,redirect:d.default.string,forgotPassword:d.default.func,createChallenge:d.default.func,recoverPassword:d.default.func,validateChallenge:d.default.func,updateExistingUser:d.default.func,setLoginModalState:d.default.func,setToastMessageState:d.default.func.isRequired,loginModalState:d.default.object,loadAsModal:d.default.bool,onClose:d.default.func,router:d.default.object,originTrack:d.default.string,trackFilters:d.default.object,trackFiltersMetadata:d.default.object,trackOrigin:d.default.string,itemsCollection:d.default.object,loginConfig:d.default.object.isRequired,loginWithEmailVerification:d.default.bool.isRequired,config:d.default.object,brand:d.default.string.isRequired,track:d.default.func.isRequired,sendChatMessage:d.default.func},Y.defaultProps={step:"",token:"",email:"",phone:"",redirect:"/",location:{},onVerification:function(){},originTrack:"",loadAsModal:!0,onClose:function(){},trackFilters:{},trackFiltersMetadata:{},trackOrigin:"",config:{}};var z=function(){var e=this;this.close=function(){e.state.step!==N.STEPS.notificationpermission||e.closeModal?e.props.loadAsModal?(e.redirectTo||e.removeHash(e.props.location.pathname,e.props.location.query),"#loginemailcreatepassword"!==e.state.step&&"#loginsmscreatepassword"!==e.state.step||!e.props.loginModalState||"function"!=typeof e.props.loginModalState.callback||e.props.loginModalState.callback(),e.props.setLoginModalState({state:!1,redirectTo:"",trackProps:{},entryPoint:0})):e.props.onClose():e.displayOverlay(!0)},this.onMessageSend=function(){e.closeModal&&e.close(),e.props.loginModalState.callback();var t=e.props.itemsCollection[e.props.loginModalState.itemId],a=t?{item_id:t.id,seller_id:t.user_id,item_status:e.getStatus(t.status&&t.status.flags),creation_date:t.created_at,category_id:t.category_id}:{},o=(0,r.default)({origin:e.props.trackOrigin},{filters:e.props.trackFilters},e.props.trackFiltersMetadata,a);Array.isArray(e.props.loginModalState.event)&&e.props.loginModalState.event.length?e.props.loginModalState.event.forEach(function(t){return e.track(t,o)}):e.track(e.props.loginModalState.event,o)},this.getStatus=function(e){var t="normal";return e.hot?t="hot":e.new&&(t="new"),t},this.sendMessage=function(t){e.closeModal=t,e.props.sendChatMessage(e.user.message,e.props.loginModalState.user.id,e.props.loginModalState.itemId,"",{},e.onMessageSend)},this.onLoginOk=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.user.message&&e.user.message.length&&t?e.sendMessage(!0):e.props.loadAsModal?(e.redirectTo&&e.props.router.push(e.redirectTo),e.props.loginModalState&&"function"==typeof e.props.loginModalState.callback&&e.props.loginModalState.callback(),e.props.setLoginModalState({state:!1,redirectTo:"",trackProps:{},entryPoint:0})):e.props.onClose()},this.checkNotification=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var a=(0,o.default)(l.default.Fragment,{},void 0,(0,o.default)(F.FormattedMessage,{id:"account_reactivated_title"}),(0,o.default)(F.FormattedMessage,{id:"account_reactivated_body",values:e.translationsValues.brand}));e.props.setToastMessageState({isOpen:!0,message:a,expiration:5e3})}"Notification"in window?"granted"===Notification.permission?v.setNotificationToken().then(function(){return e.onLoginOk(t)}):"default"===Notification.permission?(e.displayLoginLoader(!1),e.displayFullLoader(!1),e.updateStep("#notificationpermission"),e.track("permissions_impression",{permission_for:"notification"}),v.askForPermissionToReceiveNotifications(e.track).then(function(){return e.onLoginOk(t)})):e.onLoginOk():e.onLoginOk(t)},this.updateStep=function(t){e.setState({step:t,error:""}),e.updateHash(e.props.location.pathname,t,e.props.location.query)},this.checkGdpr=function(t){var a=S.getCountryConfig(e.props.config);!h.isEmpty(a)&&a.privacy_links&&a.privacy_links.terms_url&&a.privacy_links.privacy_url&&a.privacy_links.cookies_url?(e.setState({nextStep:t}),e.updateStep(N.STEPS.termsAndConditions)):e.updateStep(t)},this.updateUser=function(t,a){e.user[a]=t},this.displayLoginLoader=function(t){e.setState({showLoader:t})},this.displayOverlay=function(t){e.setState({showOverlay:t})},this.displayFullLoader=function(t){e.setState({showFullLoader:t})},this.findUser=function(t,a){e.setState({showLoader:!0}),e.track("login_send_data",{login_method:t}),e.props.findUser(a,function(o){if(o.ok){e.loginType="login";var r=o.data.data.requirePassword||!1;o.data.data.images&&o.data.data.images[0]?e.user.image=o.data.data.images[0].medium.url:e.user.image=e.defaultUserImage,"email"===t?(e.displayLoginLoader(!1),e.updateStep("#loginemailenterpassword")):"phone"===t&&(r?e.createChallenge(t,a,"#loginsmscode"):(e.displayLoginLoader(!1),e.loginSmsPasswordEnabled?e.updateStep("#loginsmsenterpassword"):e.createChallenge(t,a,"#loginsmscode")))}else e.loginType="register",e.user.image="","email"===t?(e.displayLoginLoader(!1),e.updateStep(N.STEPS.loginemailcreatepassword)):"phone"===t&&e.createChallenge(t,a,N.STEPS.loginsmscode)})},this.createChallenge=function(t,a,o){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.updateUser(t,"validateMethod"),e.setState({showLoader:r}),e.props.createChallenge(t,a,function(a){if(a.data.error){var r=_.getError(a);"phone"===t&&e.updateStep(N.STEPS.loginsms),e.setState({error:r},function(){e.track(E.LoginTrackingKeys.LOGIN_ERRORS,{login_method:t,login_type:e.loginType,error_message:e.state.error,error_origin:"createChallenge"})})}else o?(o===N.STEPS.recoversmspasswordcode&&(e.selectFrom="reset_password",e.track(E.LoginTrackingKeys.LOGIN_RECOVERY_PASS,{login_method:"phone",login_type:"login"})),e.updateUser(a.data.data.descriptor,"descriptor"),e.updateStep(o),e.setState({error:""})):e.setState({error:""});e.displayFullLoader(!1),e.displayLoginLoader(!1)})},this.validateChallenge=function(t,a,o,r){e.setState({showLoader:!0}),e.props.validateChallenge(e.user.validateMethod||t,a,o,function(a){if(a.data.error){var o=_.getError(a);e.setState({showLoader:!1,error:o},function(){e.track("login_errors",{login_method:t,login_type:e.loginType,error_message:e.state.error,error_origin:"validateChallenge"})})}else{var n;e.setState({error:""});var s=((n={})[N.VERIFICATION_METHOD.login]=function(){return e.loginWithChallenger(a.data.data.token,t,N.STEPS.loginsmscreatepassword)},n[N.VERIFICATION_METHOD.recoversmspassword]=function(){e.updateUser(a.data.data.token,"token"),e.loginWithChallenger(a.data.data.token,t,N.STEPS.resetpassword)},n);s.hasOwnProperty(r)&&s[r]()}})},this.loginWithChallenger=function(t,a,o){f.default.loginWithChallenger(t,function(t){if(t.data&&!t.error)e.track("login_sign_in_complete",{login_method:a,login_type:e.loginType,login_submethod:"OTP"}),"phone"===a?e.loginSmsPasswordEnabled?(e.updateStep(o),e.displayLoginLoader(!1),e.user.message&&e.user.message.length&&e.sendMessage(!1)):e.close():e.checkNotification(!0,t.data.info.reactivated);else if(t.error){var r=_.getError(t);e.setState({showLoader:!1,error:r},function(){e.track("login_errors",{login_method:a,login_type:e.loginType,error_message:e.state.error,error_origin:"loginWithChallenger"})})}})},this.loginWithUsername=function(t,a){var o=f.default.getLoginMethod(t),r=e.props.loginWithEmailVerification&&"email"===o;e.displayLoginLoader(!0),k.smartlockHelper.storePasswordCredentials(t,a),f.default.loginWithUsername(t,a,r,function(a){if(a.status===g.default.OK)e.track("login_sign_in_complete",{login_method:o,login_type:e.loginType,login_submethod:"password"}),e.checkNotification(!0,a.data.info.reactivated);else if(a.status===g.default.FORBIDDEN)e.track("login_email_create_password",{login_method:o}),e.displayOverlay(!1),e.createChallenge("email",t,N.STEPS.loginemailcode);else if(a.error){var r=_.getError(a);"#main"===e.state.step&&(e.selectFrom="own_flow",e.displayFullLoader(!1),e.displayOverlay(!1),"email"===o?e.updateStep(N.STEPS.loginemailenterpassword):e.updateStep(N.STEPS.loginsmsenterpassword)),e.setState({showLoader:!1,error:r},function(){e.track("login_errors",{login_method:o,login_type:e.loginType,error_message:e.state.error,error_origin:"loginWithUsername"})})}else e.track("login_errors",{login_method:o,login_type:e.loginType,error_message:"black_hole",error_origin:"loginWithUsername"})})},this.recoverPassword=function(t){var a=void 0,o={data:{password:t,passwordConfirmation:t}};e.setState({showLoader:!0}),e.props.token?(a=e.props.token,o.data.source="database"):e.user.token&&(a=e.user.token,o.data.source="challenger"),e.props.recoverPassword(a,o,function(a){if(a.data.error){var r=_.getError(a);e.setState({showLoader:!1,error:r},function(){e.track("login_errors",{error_message:e.state.error,error_origin:"recoverPassword"})})}else e.setState({error:""}),"database"===o.data.source?(e.selectFrom="reset_password",e.loginWithUsername(e.user.descriptor,t)):(e.track("login_phone_create_password",{login_method:"phone"}),e.checkNotification())})},this.forgotPassword=function(t){var a={data:{email:t}};e.props.forgotPassword(a,function(t){var a=_.getError(t);t.data.error?e.setState({showLoader:!1,error:a},function(){e.track("login_errors",{error_message:e.state.error,error_origin:"forgotPassword"})}):(e.setState({error:""}),e.props.setToastMessageState({isOpen:!0,message:(0,o.default)(F.FormattedMessage,{id:"login_email_enter_password_forgot_snackbar_text"}),expiration:5e3}),e.track("login_recovery_pass",{login_method:"email",select_from:"reset_password"}))})},this.createPassword=function(t){e.displayLoginLoader(!0);var a=f.default.getUser(),o={data:{password:t,passwordConfirmation:t}};e.props.updateExistingUser(a.id,o,function(t){if(t.data.error){var a=_.getError(t);e.setState({showLoader:!1,error:a},function(){e.track("login_errors",{error_message:e.state.error,error_origin:"createPassword"})})}else e.track("login_phone_create_password",{login_method:"phone"}),e.checkNotification(!1)})},this.track=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,r.default)({},a);o.origin=e.origin,a.select_from||(o.select_from=e.selectFrom),"posting"===e.origin&&e.props.originTrack&&(o.reason=e.props.originTrack),e.props.loginModalState&&e.props.loginModalState.variant&&(o.experiment_variant=e.props.loginModalState.variant),e.props.track(t,o)},this.getItemUser=function(){return e.props.loginModalState?e.props.loginModalState.user:{}},this.onClickAccept=function(){var t=N.STEPS.main;e.state.nextStep&&(t=e.state.nextStep),e.updateStep(t)},this.onClickDeny=function(){e.updateStep(N.STEPS.main)},this.getStep=function(){var t,a=e.state,o=a.step,r=a.error,n=((t={})[L.PROPS.updateStep]=e.updateStep,t[L.PROPS.user]=e.user,t[L.PROPS.track]=e.track,t[L.PROPS.error]=r,t[L.PROPS.checkGdpr]=e.checkGdpr,t[L.PROPS.itemUser]=e.getItemUser(),t[L.PROPS.checkNotification]=e.checkNotification,t[L.PROPS.displayLoginLoader]=e.displayLoginLoader,t[L.PROPS.redirect]=e.props.redirect,t[L.PROPS.updateUser]=e.updateUser,t[L.PROPS.findUser]=e.findUser,t[L.PROPS.loginWithUsername]=e.loginWithUsername,t[L.PROPS.forgotPassword]=e.forgotPassword,t[L.PROPS.createPassword]=e.createPassword,t[L.PROPS.validateChallenge]=e.validateChallenge,t[L.PROPS.createChallenge]=e.createChallenge,t[L.PROPS.onClickGotIt]=e.close,t[L.PROPS.onClickAccept]=e.onClickAccept,t[L.PROPS.onClickDeny]=e.onClickDeny,t[L.PROPS.recoverPassword]=e.recoverPassword,t);return(0,L.authenticationFactory)(!1,o,n)}},Q=t.mapStateToProps=function(e,t){var a=t.phone,o=t.marketConfig;return{loginModalState:e.loginModalState,isFetchingUser:e.users.isFetching[O.urls.findUser(a)],user:e.users.collections[O.urls.findUser(a)],originTrack:e.track.origin,trackFilters:e.track.filters,trackFiltersMetadata:e.track.filtersMetadata,trackOrigin:e.track.origin,itemsCollection:e.items.elements,loginConfig:o.get("login"),brand:o.get("theme","brand"),loginWithEmailVerification:o.get("loginWithEmailVerification"),accountMergingWorkaround:o.get("post","accountMergingWorkaround","enabled"),config:e.config.collections[I.urls.getConfig]}};t.default=(0,c.compose)((0,P.withConfig)("marketConfig"),M.withRouter,T.default,(0,b.default)({contextTypes:{sendChatMessage:d.default.func},mapContextToProps:function(e){return{sendChatMessage:e.sendChatMessage}}}),(0,u.connect)(Q,function(e){return{setLoginModalState:function(t){return e((0,y.default)(t))},setToastMessageState:function(t){return e((0,C.default)(t))},findUser:function(t,a){return e((0,p.get)(O.urls.findUser(t),"USERS")).then(function(e){return a(e)})},createChallenge:function(t,a,o){return e((0,w.createChallenge)(t,a)).then(function(e){return o(e)})},validateChallenge:function(t,a,o,r){return e((0,w.validateChallenge)(t,a,o)).then(function(e){return r(e)})},forgotPassword:function(t,a){return e((0,p.post)(O.urls.forgotPassword,"ELEMENT_USERS",t,{})).then(function(e){return a(e)})},recoverPassword:function(t,a,o){return e((0,p.put)(O.urls.recoverPassword(t),"ELEMENT_USERS",a,{})).then(function(e){return o(e)})},updateExistingUser:function(t,a,o){return e((0,p.patch)(O.urls.getExistingUser(t),"ELEMENT_USERS",a)).then(function(e){return o(e)})}}}))(Y)},2365:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.Main=void 0;var o=T(a(24)),r=T(a(13)),n=T(a(20)),s=T(a(21)),i=T(a(0)),l=T(a(1)),d=T(a(168)),u=a(44),c=a(31),f=T(a(346)),p=T(a(165)),g=T(a(129)),m=T(a(238)),h=a(64),v=T(a(1390)),_=T(a(2366)),S=T(a(2371)),k=T(a(1394)),y=T(a(104)),C=T(a(2373)),w=a(1131),M=a(348),P=a(352);function T(e){return e&&e.__esModule?e:{default:e}}var b=f.default.icons,L=t.Main=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.setError=function(e){s.setState({error:e})},s.showLoader=function(e){s.setState({showLoader:e})},s.handleClickBack=function(){s.updateStep(w.STEPS.sendmessage)},s.bindings={updateStep:function(e,t){return s.updateStep.bind(s,e,t)}},s.state={error:"",showLoader:!1},s.translationsValues={brand:{brand:a.brand}},s.translations={fbLoginLabel:(0,o.default)(h.FormattedMessage,{id:"login_method_selection_fb_button"}),termsCondition:(0,o.default)(h.FormattedMessage,{id:"login_method_selection_tandc_link",values:s.translationsValues.brand}),proposalText:(0,o.default)(h.FormattedMessage,{id:"login_method_selection_value_proposal_text",values:s.translationsValues.brand})},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track(M.LoginTrackingKeys.LOGIN_SHOW,{})},t.prototype.updateStep=function(e,t){this.props.track(M.LoginTrackingKeys.LOGIN_SIGN_IN_START,{login_method:t}),this.props.checkGdpr(e)},t.prototype.getLogin=function(e){switch(e.name){case"facebook_login":return(0,o.default)("div",{className:d.default.button},e.name,(0,o.default)(v.default,{track:this.props.track,buttonText:this.translations.fbLoginLabel,displayLoginLoader:this.showLoader,redirectionURL:this.props.redirect,checkNotification:this.props.checkNotification,responseFailure:this.setError}));case"challenges_phone_login":return(0,o.default)(p.default,{type:"btnOutline",className:d.default.button,onClick:this.bindings.updateStep(e.hash,"phone"),"data-aut-id":"phoneLogin"},e.name,(0,o.default)(h.FormattedMessage,{id:"login_method_selection_sms_button"}));case"email_login":return(0,o.default)(p.default,{type:"btnOutline",className:d.default.button,onClick:this.bindings.updateStep(e.hash,"email"),"data-aut-id":"emailLogin"},e.name,(0,o.default)(h.FormattedMessage,{id:"login_method_selection_email_button"}));case"google_login":return(0,o.default)(k.default,{className:d.default.button,track:this.props.track,displayLoginLoader:this.showLoader,checkNotification:this.props.checkNotification,responseFailure:this.setError},e.name,(0,o.default)("div",{className:d.default.googleLogin,"data-aut-id":"googleLogin"},void 0,(0,o.default)("img",{className:d.default.icon,src:C.default}),(0,o.default)(h.FormattedMessage,{id:"login_method_selection_google_button"})));default:return null}},t.prototype.render=function(){var e=this,t=void 0,a=void 0,r=this.props,n=r.loginMethods,s=r.config,i=r.user,l=r.itemUser,u=r.loginModalState,c=r.gdprEnabled,f=s.location.country.zendesk_url,p=this.state.error;if(this.state.showLoader)return(0,o.default)("div",{className:d.default.loader,"data-aut-id":"loader"},void 0,(0,o.default)(m.default,{}));var v=n.map(function(t){var a=s.features.find(function(e){return e.name===t.name});return a?(a.hash=t.hash,a.enabled&&t.enabled?e.getLogin(a):null):null});return i&&i.message?(a=(0,o.default)(S.default,{user:i,itemUser:l}),t=(0,o.default)("span",{onClick:this.handleClickBack,className:b.panameraIcons+" "+b["icon-Back"]+" "+d.default.back})):a=(0,o.default)(_.default,{initialSlide:u&&u.entryPoint?u.entryPoint:0}),(0,o.default)("div",{className:d.default.content,"data-aut-id":"loginModal"},void 0,t,a,p&&(0,o.default)("span",{className:d.default.error,"data-aut-id":"error"},void 0,p),v,(0,o.default)("div",{className:d.default.facebookPrivacyDesc},void 0,(0,o.default)(h.FormattedMessage,{id:"loginPrivacyDesc1"})),!c&&(0,o.default)("p",{className:d.default.terms},void 0,(0,o.default)(h.FormattedMessage,{id:"login_method_selection_tandc_text"}),(0,o.default)(g.default,{to:f,className:d.default.link},void 0,this.translations.termsCondition)))},t}(i.default.Component);L.propTypes={checkGdpr:l.default.func,config:l.default.object.isRequired,user:l.default.object,redirect:l.default.string,track:l.default.func,loginModalState:l.default.object,checkNotification:l.default.func,itemUser:l.default.object,brand:l.default.string.isRequired,loginMethods:l.default.array.isRequired,gdprEnabled:l.default.bool.isRequired},L.defaultProps={checkGdpr:function(){},redirect:"/",track:function(){},checkNotification:function(){},itemUser:{},user:{}};var N=t.mapStateToProps=function(e,t){var a=t.config;return{loginModalState:e.loginModalState,config:(0,P.configSelector)(e),brand:a.get("theme","brand"),loginMethods:a.get("loginMethods"),gdprEnabled:a.get("gdpr","enabled")}};t.default=(0,c.compose)(y.default,(0,u.connect)(N))(L)},2366:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.BenefitSlider=void 0;var o=k(a(4)),r=k(a(24)),n=k(a(13)),s=k(a(20)),i=k(a(21)),l=k(a(0)),d=k(a(1)),u=a(44),c=a(31),f=k(a(2367)),p=k(a(1104)),g=a(64),m=k(a(346)),h=k(a(104)),v=k(a(2368)),_=k(a(2369)),S=k(a(2370));function k(e){return e&&e.__esModule?e:{default:e}}var y=m.default.icons,C=t.BenefitSlider=function(e){function t(a){(0,n.default)(this,t);var o=(0,s.default)(this,e.call(this));return o.next=function(){o.slider.slickNext()},o.previous=function(){o.slider.slickPrev()},o.translationsValues={brand:{brand:a.brand}},o}return(0,i.default)(t,e),t.prototype.render=function(){var e=this,t=(0,r.default)("div",{},void 0,(0,r.default)("span",{className:f.default.arrows+" "+f.default.prev+" "+y.panameraIcons+" "+y["icon-ArrowLeft"],onClick:this.previous,"data-aut-id":"prevSlide"}),(0,r.default)("span",{className:f.default.arrows+" "+f.default.next+" "+y.panameraIcons+" "+y["icon-ArrowRight"],onClick:this.next,"data-aut-id":"nextSlide"})),a={dots:!0,speed:500,arrows:!1,infinite:!0,lazyLoad:!0,slidesToShow:1,slidesToScroll:1,dotsClass:f.default.dots,className:f.default.slider,initialSlide:this.props.initialSlide};return(0,r.default)("div",{className:f.default.benefitSlider},void 0,l.default.createElement(p.default,(0,o.default)({ref:function(t){return e.slider=t}},a),(0,r.default)("div",{className:f.default.slide},void 0,(0,r.default)("div",{className:f.default.image},void 0,(0,r.default)("img",{src:v.default})),(0,r.default)("h3",{className:f.default.title},void 0,(0,r.default)(g.FormattedMessage,{id:"loginSafetyTitle",values:this.translationsValues.brand}))),(0,r.default)("div",{className:f.default.slide},void 0,(0,r.default)("div",{className:f.default.image},void 0,(0,r.default)("img",{src:_.default})),(0,r.default)("h3",{className:f.default.title},void 0,(0,r.default)(g.FormattedMessage,{id:"loginDealsTitle"}))),(0,r.default)("div",{className:f.default.slide},void 0,(0,r.default)("div",{className:f.default.image},void 0,(0,r.default)("img",{src:S.default})),(0,r.default)("h3",{className:f.default.title},void 0,(0,r.default)(g.FormattedMessage,{id:"loginFavoritesTitle"})))),t)},t}(l.default.Component);C.propTypes={initialSlide:d.default.number,brand:d.default.string.isRequired},C.defaultProps={initialSlide:0};var w=t.mapStateToProps=function(e,t){return{brand:t.config.get("theme","brand")}};t.default=(0,c.compose)(h.default,(0,u.connect)(w))(C)},2367:function(e,t,a){e.exports={benefitSlider:"_1XYM3",arrows:"_2AWwB",prev:"_1eYWE",next:"_3Ln6T",slider:"HVnmI",slide:"_oRRN",title:"vSy8L",desc:"_2ISwA",image:"n49Ds",dots:"ixsqv"}},2368:function(e,t){e.exports="/assets/loginEntryPointPost.olx.b5ea6caa.png"},2369:function(e,t){e.exports="/assets/loginEntryPointFavorite.olx.751bea95.png"},2370:function(e,t){e.exports="/assets/loginEntryPointChat.olx.4bf74990.png"},2371:function(e,t,a){"use strict";t.__esModule=!0,t.ChatImage=void 0;var o=u(a(24)),r=u(a(1)),n=(u(a(0)),u(a(2372))),s=u(a(1049)),i=u(a(346)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1056)),d=a(64);function u(e){return e&&e.__esModule?e:{default:e}}var c=i.default.icons,f=function(e){var t={user:e.itemUser.name};return(0,o.default)("div",{className:n.default.chatImage},void 0,(0,o.default)("div",{className:n.default.messageContainer+" "+n.default.sentMsg},void 0,(0,o.default)("div",{className:n.default.bubble},void 0,(0,o.default)("p",{className:n.default.message},void 0,e.user.message),(0,o.default)("span",{className:n.default.time},void 0,(0,o.default)(d.FormattedTime,{value:new Date,hour12:!1})),(0,o.default)("span",{className:n.default.icon+" "+c.panameraIcons+" "+c["icon-OK"]})),(0,o.default)(s.default,{image:e.user.image,diameter:"50px",className:n.default.avatar})),(0,o.default)("div",{className:n.default.messageContainer+" "+n.default.recievedMsg},void 0,(0,o.default)("div",{className:n.default.bubble},void 0,(0,o.default)("p",{className:n.default.message},void 0,"?"),(0,o.default)("span",{className:n.default.time},void 0,(0,o.default)(d.FormattedTime,{value:new Date,hour12:!1})),(0,o.default)("span",{className:n.default.icon+" "+c.panameraIcons+" "+c["icon-OK"]})),(0,o.default)(s.default,{image:l.getUserImage(e.itemUser),diameter:"50px",className:n.default.avatar})),(0,o.default)("h3",{className:n.default.title},void 0,(0,o.default)(d.FormattedMessage,{id:"wantsToKnow",values:t})))};f.propTypes={user:r.default.object,itemUser:r.default.object},t.ChatImage=f,t.default=f},2372:function(e,t,a){e.exports={chatImage:"_157OH",messageContainer:"_3P-Fp",bubble:"tuvZ5",sentMsg:"_3GnBM",recievedMsg:"_2rm5Q",message:"_20TQU",time:"_2DPyd",icon:"_3SDJn",title:"_3vOUM"}},2373:function(e,t){e.exports="/assets/g-logo.olx.53975b11.png"},2374:function(e,t,a){"use strict";t.__esModule=!0,t.LogInSms=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=h(a(165)),u=h(a(346)),c=a(64),f=h(a(1054)),p=h(a(1095)),g=h(a(168)),m=h(a(1057));function h(e){return e&&e.__esModule?e:{default:e}}var v=u.default.icons,_=function(e){function t(a){(0,r.default)(this,t);var o=(0,n.default)(this,e.call(this,a));return o.handleSubmit=function(){o.props.findUser("phone",o.props.user.descriptor)},o.handleChangePhone=function(e){return function(t,a,r){for(var n=arguments.length,s=Array(n>3?n-3:0),i=3;i<n;i++)s[i-3]=arguments[i];e.apply(void 0,[t,a,r].concat(s)),r&&(o.props.updateUser(t,a),o.props.updateUser(""+o.props.user.countryCode+t,"descriptor"))}},o.handleClickBack=function(){o.props.updateStep("#main")},o.initialValues={phone:a.user.phone?a.user.phone:""},o}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{initialValues:this.initialValues,onSubmit:this.handleSubmit,render:function(t){var a=t.values,r=t.errors,n=t.handleChange;return(0,o.default)("div",{className:g.default.formContainer},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:v.panameraIcons+" "+v["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(c.FormattedMessage,{id:"login_sms_enter_phone_title"})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)(p.default,{name:"phone",onChange:e.handleChangePhone(n),error:e.props.error||r.phone,value:a.phone,autoFocus:!0})),(0,o.default)(d.default,{type:"btnMain",htmlType:"submit",className:g.default.button},void 0,(0,o.default)(c.FormattedMessage,{id:"login_next_button"})),(0,o.default)("p",{className:g.default.terms},void 0,(0,o.default)(c.FormattedMessage,{id:"login_sms_enter_phone_privacy"})))}})},t}(i.default.Component);_.propTypes={updateStep:l.default.func,updateUser:l.default.func,findUser:l.default.func,user:l.default.object,error:l.default.string},_.defaultProps={updateStep:function(){},updateUser:function(){},findUser:function(){},user:{},error:""},t.LogInSms=_,t.default=_},2375:function(e,t,a){"use strict";t.__esModule=!0,t.LogInEmail=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=a(64),u=h(a(165)),c=h(a(346)),f=h(a(1054)),p=h(a(1315)),g=h(a(168)),m=h(a(1057));function h(e){return e&&e.__esModule?e:{default:e}}var v=c.default.icons,_=function(e){function t(a){(0,r.default)(this,t);var o=(0,n.default)(this,e.call(this,a));return o.handleSubmit=function(e){var t=e.values;o.props.updateUser(t.email,"email"),o.props.findUser("email",t.email)},o.handleClickBack=function(){o.props.updateStep("#main")},o.initialValues={email:a.user.email?a.user.email:""},o}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{initialValues:this.initialValues,onSubmit:this.handleSubmit,render:function(t){var a=t.handleChange,r=t.errors,n=t.values;return(0,o.default)("div",{className:g.default.formContainer},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:v.panameraIcons+" "+v["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_enter_email_title"})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)(p.default,{name:"email",onChange:a,value:n.email,error:r.email})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_next_button"})),(0,o.default)("p",{className:g.default.terms},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_enter_phone_privacy"})))}})},t}(i.default.Component);_.propTypes={updateStep:l.default.func,updateUser:l.default.func,user:l.default.object,findUser:l.default.func},_.defaultProps={updateStep:function(){},updateUser:function(){},findUser:function(){},user:{}},t.LogInEmail=_,t.default=_},2376:function(e,t,a){"use strict";t.__esModule=!0,t.SendMessage=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=h(a(1049)),u=h(a(165)),c=a(64),f=h(a(1054)),p=h(a(2377)),g=h(a(168)),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1056));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(a){(0,r.default)(this,t);var o=(0,n.default)(this,e.call(this));return o.handleSubmit=function(){o.props.track("item_intent_chat"),o.props.updateStep("#main")},o.handleChange=function(e){return function(t,a,r){for(var n=arguments.length,s=Array(n>3?n-3:0),i=3;i<n;i++)s[i-3]=arguments[i];e.apply(void 0,[t,a,r].concat(s)),r&&o.props.updateUser(t,a)}},o.translationsValues={user:{user:a.itemUser.name}},o.initialValues={message:a.user.message?a.user.message:""},o}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,initialValues:this.initialValues,render:function(t){var a=t.handleChange,r=t.errors,n=t.values;return(0,o.default)("div",{className:g.default.formContainer},void 0,(0,o.default)("div",{className:g.default.sendMessageImage},void 0,(0,o.default)(d.default,{image:e.props.user.image,diameter:"60px",className:g.default.avatar}),(0,o.default)("div",{className:g.default.arrow}),(0,o.default)(d.default,{image:m.getUserImage(e.props.itemUser),diameter:"60px",className:g.default.avatar})),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(c.FormattedMessage,{id:"writeMessageTo",values:e.translationsValues.user})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)(p.default,{name:"message",onChange:e.handleChange(a),autoFocus:!0,value:n.message,error:r.message})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,o.default)(c.FormattedMessage,{id:"sendMessage"})))}})},t}(i.default.Component);v.propTypes={updateStep:l.default.func,updateUser:l.default.func,user:l.default.object,itemUser:l.default.object,track:l.default.func},v.defaultProps={updateStep:function(){},updateUser:function(){},user:{},itemUser:{},track:function(){}},t.SendMessage=v,t.default=v},2377:function(e,t,a){"use strict";t.__esModule=!0,t.MessageInput=void 0;var o=l(a(24)),r=l(a(4)),n=l(a(0)),s=a(64),i=l(a(1084));function l(e){return e&&e.__esModule?e:{default:e}}var d=t.MessageInput=function(e){return n.default.createElement(i.default,(0,r.default)({autoFocus:!0},e))};d.defaultProps={value:"",onChange:function(){},name:"message",regexErrorMessage:(0,o.default)(s.FormattedMessage,{id:"invalidEmail"}),required:!0,regex:"",validateOnBlur:!1,validateOnChange:!1,label:(0,o.default)(s.FormattedMessage,{id:"writeMessageHere"})},t.default=d},2378:function(e,t,a){"use strict";t.__esModule=!0,t.LogInEmailCode=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=h(a(165)),u=a(64),c=h(a(1054)),f=h(a(1107)),p=h(a(168)),g=h(a(1057)),m=h(a(1089));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.createChallenge=function(e){s.props.createChallenge("email",s.props.user.email,"",!1),s.props.track("login_resend_code",{login_method:"email",select_from:"email",intents:e})},s.handleSubmit=function(e){var t=e.values;s.props.validateChallenge("email",s.props.user.email,t.code,"login")},s.translationsValues={email:{value:(0,o.default)("strong",{},void 0,a.user.email)}},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track("login_show_pin")},t.prototype.render=function(){var e=this;return(0,o.default)(c.default,{onSubmit:this.handleSubmit,className:p.default.formContainer,render:function(t){var a=t.errors,r=t.handleChange;return(0,o.default)("div",{},void 0,(0,o.default)(g.default,{}),(0,o.default)("h3",{className:p.default.formTitle},void 0,(0,o.default)(u.FormattedMessage,{id:"login_enter_confirmation_code_title"})),(0,o.default)("p",{className:p.default.formText},void 0,(0,o.default)(u.FormattedMessage,{id:"login_enter_confirmation_code_text",values:e.translationsValues.email})),(0,o.default)("div",{className:p.default.fieldsContainer},void 0,(0,o.default)(f.default,{name:"code",onChange:r,error:e.props.error||a.code})),(0,o.default)(d.default,{htmlType:"submit",type:"btnMain",className:p.default.button},void 0,(0,o.default)(u.FormattedMessage,{id:"logIn"})),(0,o.default)(m.default,{onClick:e.createChallenge}))}})},t}(i.default.Component);v.propTypes={track:l.default.func,user:l.default.object,error:l.default.string,createChallenge:l.default.func,validateChallenge:l.default.func},v.defaultProps={user:{},error:"",track:function(){},createChallenge:function(){},validateChallenge:function(){}},t.LogInEmailCode=v,t.default=v},2379:function(e,t,a){"use strict";t.__esModule=!0,t.RecoverPassword=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=h(a(165)),u=a(64),c=h(a(1054)),f=h(a(1208)),p=h(a(168)),g=h(a(1057)),m=a(348);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleSubmit=function(e){var t=e.values;s.props.recoverPassword(t.password)},s.translationsValues={email:{email:(0,o.default)("strong",{},void 0,a.user.descriptor)}},s.styles={email:{display:"none"}},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track(m.LoginTrackingKeys.CREATE_PASSWORD_SHOW,{select_from:"recovery"})},t.prototype.render=function(){var e=this;return(0,o.default)(c.default,{onSubmit:this.handleSubmit,className:p.default.formContainer,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{},void 0,(0,o.default)(g.default,{}),(0,o.default)("h3",{className:p.default.formTitle},void 0,(0,o.default)(u.FormattedMessage,{id:"login_email_reset_password_title"})),(0,o.default)("p",{className:p.default.formText},void 0,(0,o.default)(u.FormattedMessage,{id:"login_email_reset_passwrod_message",values:e.translationsValues.email})),(0,o.default)("div",{className:p.default.fieldsContainer},void 0,(0,o.default)("input",{id:"email",type:"text",defaultValue:e.props.user.descriptor,autoComplete:"username",style:e.styles.email}),(0,o.default)(f.default,{name:"password",onChange:a,error:r.password||e.props.error,onConfirmChange:a,confirmError:r["password-confirm"]})),(0,o.default)(d.default,{htmlType:"submit",type:"btnMain",className:p.default.button},void 0,(0,o.default)(u.FormattedMessage,{id:"login_next_button"})))}})},t}(i.default.Component);v.propTypes={recoverPassword:l.default.func.isRequired,user:l.default.object,error:l.default.string,track:l.default.func.isRequired},v.defaultProps={user:{},error:""},t.RecoverPassword=v,t.default=v},2380:function(e,t,a){"use strict";t.__esModule=!0,t.LogInSmsEnterPassword=void 0;var o=v(a(24)),r=v(a(13)),n=v(a(20)),s=v(a(21)),i=v(a(0)),l=v(a(1)),d=v(a(165)),u=v(a(346)),c=a(64),f=v(a(1054)),p=v(a(1187)),g=v(a(168)),m=v(a(1057)),h=v(a(1089));function v(e){return e&&e.__esModule?e:{default:e}}var _=u.default.icons,S=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleClickBack=function(){s.props.updateStep("#loginsms")},s.forgotPassword=function(){s.props.track("login_phone_forgot_password",{login_method:"phone",login_type:"login"}),s.props.createChallenge("phone",s.props.user.descriptor,"#recoversmspasswordcode")},s.handleSubmit=function(e){var t=e.values;s.props.loginWithUsername(s.props.user.descriptor,t.password)},s.translationsValues={phone:{email:(0,o.default)("strong",{},void 0,a.user.descriptor)}},s.styles={hidden:{display:"none"}},s.translations={forgotPassword:(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_forgot_message"})},s}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,className:g.default.formContainer,render:function(t){var a=t.errors,r=t.handleChange;return(0,o.default)("div",{},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:_.panameraIcons+" "+_["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{userImage:e.props.user.image}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_title"})),(0,o.default)("p",{className:g.default.formText},void 0,(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_message",values:e.translationsValues.phone})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)("input",{id:"phone",type:"text",defaultValue:e.props.user.descriptor,autoComplete:"username",style:e.styles.hidden}),(0,o.default)(p.default,{name:"password",required:!0,onChange:r,error:a.password||e.props.error,autoFocus:!0})),(0,o.default)(d.default,{type:"btnMain",htmlType:"submit",className:g.default.button},void 0,(0,o.default)(c.FormattedMessage,{id:"login_login_button"})),(0,o.default)(h.default,{onClick:e.forgotPassword,text:e.translations.forgotPassword,disableCounter:!0}))}})},t}(i.default.Component);S.propTypes={loginWithUsername:l.default.func,createChallenge:l.default.func,updateStep:l.default.func,track:l.default.func,user:l.default.object,error:l.default.node},S.defaultProps={loginWithUsername:function(){},forgotPassword:function(){},updateStep:function(){},track:function(){},user:{},error:""},t.LogInSmsEnterPassword=S,t.default=S},2381:function(e,t,a){"use strict";t.__esModule=!0,t.LogInSmsCreatePassword=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=a(64),u=h(a(165)),c=h(a(346)),f=h(a(1054)),p=h(a(1208)),g=h(a(168)),m=h(a(1057));function h(e){return e&&e.__esModule?e:{default:e}}var v=c.default.icons,_=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleClickBack=function(){s.props.updateStep("#loginsmscode")},s.handleSubmit=function(e){var t=e.values;s.props.createPassword(t.password)},s.translationsValues={phone:{email:(0,o.default)("strong",{},void 0,a.user.descriptor)}},s.styles={hidden:{display:"none"}},s}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,className:g.default.formContainer,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:v.panameraIcons+" "+v["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_sms_create_password_title"})),(0,o.default)("p",{className:g.default.formText},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_create_password_message",values:e.translationsValues.phone})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)("input",{id:"phone",type:"text",defaultValue:e.props.user.descriptor,autoComplete:"username",style:e.styles.hidden}),(0,o.default)(p.default,{name:"password",onChange:a,error:e.props.error||r.password,onConfirmChange:a,confirmError:r["password-confirm"]})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_sms_create_password_button"})))}})},t}(i.default.Component);_.propTypes={createPassword:l.default.func,updateStep:l.default.func,user:l.default.object,error:l.default.string},_.defaultProps={createPassword:function(){},updateStep:function(){},user:{},error:""},t.LogInSmsCreatePassword=_,t.default=_},2382:function(e,t,a){"use strict";t.__esModule=!0,t.RecoverSmsPasswordCode=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=a(64),u=h(a(165)),c=h(a(1054)),f=h(a(1107)),p=h(a(168)),g=h(a(1057)),m=h(a(1130));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));s.handleSubmit=function(e){var t=e.values;s.props.validateChallenge("phone",s.props.user.descriptor,t.code,"recoversmspassword")},s.createChallenge=function(e,t){s.props.createChallenge(t,s.props.user.descriptor,"",!1),s.props.track("login_resend_code",{login_method:"phone",select_from:"phone"===t?"sms":t,intents:e})};var i=a.user.descriptor?a.user.descriptor:a.user.phone;return s.translationsValues={login:{value:(0,o.default)("strong",{},void 0,i)},register:{phone:(0,o.default)("strong",{},void 0,i)}},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track("verify_show_pin")},t.prototype.render=function(){var e=this;return(0,o.default)(c.default,{onSubmit:this.handleSubmit,className:p.default.formContainer,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{},void 0,(0,o.default)("div",{},void 0,(0,o.default)(g.default,{userImage:e.props.user.image}),(0,o.default)("h3",{className:p.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_reset_password_title"})),(0,o.default)("p",{className:p.default.formText},void 0,(0,o.default)(d.FormattedMessage,{id:"login_enter_confirmation_code_text",values:e.translationsValues.login}))),(0,o.default)("div",{className:p.default.fieldsContainer},void 0,(0,o.default)(f.default,{name:"code",onChange:a,error:e.props.error||r.code})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:p.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_next_button"})),(0,o.default)(m.default,{onClick:e.createChallenge}))}})},t}(i.default.Component);v.propTypes={track:l.default.func,user:l.default.object,error:l.default.string,createChallenge:l.default.func,validateChallenge:l.default.func},v.defaultProps={user:{},error:"",track:function(){},createChallenge:function(){},validateChallenge:function(){}},t.RecoverSmsPasswordCode=v,t.default=v},2383:function(e,t,a){"use strict";t.__esModule=!0,t.LogInEmailEnterPassword=void 0;var o=v(a(24)),r=v(a(13)),n=v(a(20)),s=v(a(21)),i=v(a(0)),l=v(a(1)),d=v(a(346)),u=v(a(165)),c=a(64),f=v(a(1054)),p=v(a(1187)),g=v(a(168)),m=v(a(1057)),h=v(a(1089));function v(e){return e&&e.__esModule?e:{default:e}}var _=d.default.icons,S=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleClickBack=function(){s.props.updateStep("#loginemail")},s.forgotPassword=function(){s.props.forgotPassword(s.props.user.email)},s.handleSubmit=function(e){var t=e.values;s.props.loginWithUsername(s.props.user.email,t.password)},s.translationsValues={email:{email:(0,o.default)("strong",{},void 0,a.user.email)}},s.translations={forgotPassword:(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_forgot_message"})},s.styles={email:{display:"none"}},s}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,render:function(t){var a=t.errors,r=t.handleChange;return(0,o.default)("div",{className:g.default.formContainer},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:_.panameraIcons+" "+_["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{userImage:e.props.user.image}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_title"})),(0,o.default)("p",{className:g.default.formText},void 0,(0,o.default)(c.FormattedMessage,{id:"login_email_enter_password_message",values:e.translationsValues.email})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)("input",{id:"email",type:"text",defaultValue:e.props.user.email,autoComplete:"username",style:e.styles.email}),(0,o.default)(p.default,{name:"password",required:!0,onChange:r,error:a.password||e.props.error,autoFocus:!0})),(0,o.default)(u.default,{type:"btnMain",htmlType:"submit",className:g.default.button},void 0,(0,o.default)(c.FormattedMessage,{id:"login_login_button"})),(0,o.default)(h.default,{onClick:e.forgotPassword,text:e.translations.forgotPassword}))}})},t}(i.default.Component);S.propTypes={loginWithUsername:l.default.func,forgotPassword:l.default.func,updateStep:l.default.func,user:l.default.object,error:l.default.node},S.defaultProps={loginWithUsername:function(){},forgotPassword:function(){},updateStep:function(){},user:{},error:""},t.LogInEmailEnterPassword=S,t.default=S},2384:function(e,t,a){"use strict";t.__esModule=!0,t.LogInEmailCreatePassword=void 0;var o=h(a(24)),r=h(a(13)),n=h(a(20)),s=h(a(21)),i=h(a(0)),l=h(a(1)),d=a(64),u=h(a(165)),c=h(a(346)),f=h(a(1054)),p=h(a(1208)),g=h(a(168)),m=h(a(1057));function h(e){return e&&e.__esModule?e:{default:e}}var v=c.default.icons,_=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleClickBack=function(){s.props.updateStep("#loginemail")},s.handleSubmit=function(e){var t=e.values;s.props.loginWithUsername(s.props.user.email,t.password)},s.translationsValues={email:{email:(0,o.default)("strong",{},void 0,a.user.email)}},s.styles={email:{display:"none"}},s}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{className:g.default.formContainer},void 0,(0,o.default)("span",{onClick:e.handleClickBack,className:v.panameraIcons+" "+v["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_create_password_title"})),(0,o.default)("p",{className:g.default.formText},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_create_password_message",values:e.translationsValues.email})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)("input",{id:"email",type:"text",defaultValue:e.props.user.email,autoComplete:"username",style:e.styles.email}),(0,o.default)(p.default,{name:"password",onChange:a,error:e.props.error||r.password,onConfirmChange:a,confirmError:r["password-confirm"]})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_create_account_button"})))}})},t}(i.default.Component);_.propTypes={loginWithUsername:l.default.func,updateStep:l.default.func,user:l.default.object,error:l.default.string},_.defaultProps={loginWithUsername:function(){},updateStep:function(){},user:{},error:""},t.LogInEmailCreatePassword=_,t.default=_},2385:function(e,t,a){"use strict";t.__esModule=!0,t.CreatePassword=void 0;var o=_(a(24)),r=_(a(13)),n=_(a(20)),s=_(a(21)),i=_(a(0)),l=_(a(1)),d=a(64),u=_(a(165)),c=_(a(346)),f=_(a(1054)),p=_(a(1208)),g=_(a(168)),m=_(a(1057)),h=a(348),v=a(1131);function _(e){return e&&e.__esModule?e:{default:e}}var S=c.default.icons,k=t.CreatePassword=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));s.handleClickBack=function(){s.props.updateStep(v.STEPS.loginsmscode)},s.handleSubmit=function(e){var t=e.values;s.props.createPassword(t.password)};var i=a.userAuthenticateData.authToken,l=i.email,d=i.phone;return s.descriptor=l||d,s.method=l?"email":d&&"phone",s.translationsValues={phone:{email:(0,o.default)("strong",{},void 0,s.descriptor)}},s.styles={hidden:{display:"none"}},s}return(0,s.default)(t,e),t.prototype.componentDidMount=function(){this.props.track(h.LoginTrackingKeys.CREATE_PASSWORD_SHOW,{login_method:this.method})},t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{onSubmit:this.handleSubmit,className:g.default.formContainer,render:function(t){var a=t.handleChange,r=t.errors;return(0,o.default)("div",{},void 0,(0,o.default)("span",{"data-aut-id":"createpassword-click-back",onClick:e.handleClickBack,className:S.panameraIcons+" "+S["icon-Back"]+" "+g.default.back}),(0,o.default)(m.default,{}),(0,o.default)("h3",{className:g.default.formTitle},void 0,(0,o.default)(d.FormattedMessage,{id:"login_sms_create_password_title",defaultMessage:"Create a password to login faster next time"})),(0,o.default)("p",{className:g.default.formText},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_create_password_message",values:e.translationsValues.phone,defaultMessage:"You are creating a password for {email}"})),(0,o.default)("div",{className:g.default.fieldsContainer},void 0,(0,o.default)("input",{id:"phone",type:"text",defaultValue:e.descriptor,autoComplete:"username",style:e.styles.hidden}),(0,o.default)(p.default,{name:"password",onChange:a,error:e.props.error||r.password,onConfirmChange:a,confirmError:r["password-confirm"]})),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_sms_create_password_button",defaultMessage:"Create password"})))}})},t}(i.default.Component);k.propTypes={userAuthenticateData:l.default.shape({authToken:l.default.shape({email:l.default.string,phone:l.default.string}).isRequired}).isRequired,createPassword:l.default.func.isRequired,updateStep:l.default.func.isRequired,track:l.default.func.isRequired,error:l.default.string},k.defaultProps={error:""},t.default=k},2386:function(e,t,a){"use strict";t.__esModule=!0,t.EnterUser=void 0;var o=_(a(24)),r=_(a(13)),n=_(a(20)),s=_(a(21)),i=_(a(0)),l=_(a(1)),d=a(64),u=_(a(165)),c=_(a(346)),f=_(a(1054)),p=_(a(168)),g=_(a(1057)),m=_(a(1095)),h=_(a(1315)),v=a(1131);function _(e){return e&&e.__esModule?e:{default:e}}var S=c.default.icons,k=t.EnterUser=function(e){function t(a){(0,r.default)(this,t);var s=(0,n.default)(this,e.call(this,a));return s.handleSubmit=function(e){var t=e.values,a={};s.props.step===v.STEPS.loginemail?(a.grantType="email",a.email=t.email):(a.grantType="phone",a.phone=""+s.props.user.countryCode+t.phone),s.props.authenticate(a)},s.handleClickBack=function(){s.props.updateStep(v.STEPS.main)},s.getInput=function(e,t,a){return s.props.step===v.STEPS.loginemail?(0,o.default)(h.default,{name:"email",onChange:e,value:a.email,error:t.email}):(0,o.default)(m.default,{name:"phone",onChange:e,error:s.props.error||t.phone,value:a.phone,autoFocus:!0})},s.getTitle=function(){return s.props.step===v.STEPS.loginemail?(0,o.default)(d.FormattedMessage,{id:"login_email_enter_email_title"}):(0,o.default)(d.FormattedMessage,{id:"login_sms_enter_phone_title"})},s.initialValues={email:a.user.email||""},s}return(0,s.default)(t,e),t.prototype.render=function(){var e=this;return(0,o.default)(f.default,{initialValues:this.initialValues,onSubmit:this.handleSubmit,render:function(t){var a=t.handleChange,r=t.errors,n=t.values;return(0,o.default)("div",{className:p.default.formContainer},void 0,(0,o.default)("span",{"data-aut-id":"enteruser-click-back",onClick:e.handleClickBack,className:S.panameraIcons+" "+S["icon-Back"]+" "+p.default.back}),(0,o.default)(g.default,{}),(0,o.default)("h3",{className:p.default.formTitle},void 0,e.getTitle()),(0,o.default)("div",{className:p.default.fieldsContainer},void 0,e.getInput(a,r,n)),(0,o.default)(u.default,{htmlType:"submit",type:"btnMain",className:p.default.button},void 0,(0,o.default)(d.FormattedMessage,{id:"login_next_button"})),(0,o.default)("p",{className:p.default.terms},void 0,(0,o.default)(d.FormattedMessage,{id:"login_email_enter_phone_privacy"})))}})},t}(i.default.Component);k.propTypes={user:l.default.object,error:l.default.string,updateStep:l.default.func.isRequired,authenticate:l.default.func.isRequired,step:l.default.string.isRequired},k.defaultProps={user:{},error:""},t.default=k},2387:function(e,t,a){"use strict";t.__esModule=!0,t.EnterPassword=void 0;var o=k(a(4)),r=k(a(24)),n=k(a(13)),s=k(a(20)),i=k(a(21)),l=k(a(0)),d=k(a(1)),u=k(a(346)),c=k(a(165)),f=a(64),p=k(a(1054)),g=k(a(1187)),m=k(a(168)),h=k(a(1057)),v=k(a(1089)),_=a(1131),S=a(348);function k(e){return e&&e.__esModule?e:{default:e}}var y=u.default.icons,C=t.EnterPassword=function(e){function t(a){(0,n.default)(this,t);var o=(0,s.default)(this,e.call(this,a));w.call(o),o.translations={forgotPassword:(0,r.default)(f.FormattedMessage,{id:"login_email_enter_password_forgot_message"})};var i=a.userAuthenticateData.authToken,l=i.email,d=i.phone;return l?(o.hiddenInput=(0,r.default)("input",{id:"email","data-aut-id":"hidden-input-email",type:"text",defaultValue:l,autoComplete:"username",style:{display:"none"}}),o.translationsValues={email:{email:(0,r.default)("strong",{},void 0,l)}}):d&&(o.hiddenInput=(0,r.default)("input",{id:"phone","data-aut-id":"hidden-input-phone",type:"text",defaultValue:d,autoComplete:"username",style:{display:"none"}}),o.translationsValues={email:{email:(0,r.default)("strong",{},void 0,d)}}),o}return(0,i.default)(t,e),t.prototype.render=function(){var e=this;return(0,r.default)(p.default,{onSubmit:this.handleSubmit,render:function(t){var a=t.errors,o=t.handleChange;return(0,r.default)("div",{className:m.default.formContainer},void 0,(0,r.default)("span",{"data-aut-id":"enterpassword-click-back",onClick:e.handleClickBack,className:y.panameraIcons+" "+y["icon-Back"]+" "+m.default.back}),(0,r.default)(h.default,{userImage:e.props.user.image}),(0,r.default)("h3",{className:m.default.formTitle},void 0,(0,r.default)(f.FormattedMessage,{id:"login_email_enter_password_title"})),(0,r.default)("p",{className:m.default.formText},void 0,(0,r.default)(f.FormattedMessage,{id:"login_email_enter_password_message",values:e.translationsValues.email})),(0,r.default)("div",{className:m.default.fieldsContainer},void 0,e.hiddenInput,(0,r.default)(g.default,{name:"password",required:!0,onChange:o,error:a.password||e.props.error})),(0,r.default)(c.default,{type:"btnMain",htmlType:"submit",className:m.default.button},void 0,(0,r.default)(f.FormattedMessage,{id:"login_login_button"})),(0,r.default)(v.default,{method:"password",onClick:e.forgotPassword,text:e.translations.forgotPassword}))}})},t}(l.default.Component);C.propTypes={user:d.default.object,error:d.default.string,updateStep:d.default.func.isRequired,authenticate:d.default.func.isRequired,userAuthenticateData:d.default.shape({authToken:d.default.shape({email:d.default.string,phone:d.default.string}).isRequired}).isRequired,step:d.default.string.isRequired,track:d.default.func.isRequired},C.defaultProps={user:{},error:""};var w=function(){var e=this;this.handleClickBack=function(){var t=e.props,a=t.step,o=t.updateStep;_.STEPS.main;o(a===_.STEPS.loginemailenterpassword?_.STEPS.loginemail:_.STEPS.loginsms)},this.getDescriptor=function(){var t=e.props.userAuthenticateData.authToken,a=t.email,o=t.phone;return a?{method:"email",descriptor:a}:o?{method:"phone",descriptor:o}:""},this.trackRecoverPass=function(t){e.props.track(S.LoginTrackingKeys.LOGIN_RECOVERY_PASS,{login_method:t})},this.forgotPassword=function(){var t=e.props,a=t.authenticate,r=t.user.countryCode,n=e.getDescriptor(),s=(0,o.default)({grantType:_.LOGIN_GRANT_TYPE.recover,countryCode:r},n);e.trackRecoverPass(n.method),a(s)},this.handleSubmit=function(t){var a=t.values,o=e.props.authenticate,r=e.getDescriptor(),n={grantType:"password",password:a.password};"email"===r.method?n.email=r.descriptor:"phone"===r.method&&(n.phone=r.descriptor),o(n,!0)}};t.default=C},2388:function(e,t,a){"use strict";t.__esModule=!0,t.EnterCode=void 0;var o=k(a(4)),r=k(a(24)),n=k(a(13)),s=k(a(20)),i=k(a(21)),l=k(a(0)),d=k(a(1)),u=k(a(165)),c=a(64),f=k(a(1054)),p=k(a(1107)),g=k(a(168)),m=k(a(1057)),h=k(a(1089)),v=k(a(1130)),_=a(1131),S=a(348);function k(e){return e&&e.__esModule?e:{default:e}}var y=t.EnterCode=function(e){function t(a){(0,n.default)(this,t);var o=(0,s.default)(this,e.call(this,a));C.call(o);var i=o.getDescriptor(),l=i.email,d=i.phone,u=l||d;return o.translationsValues={email:{value:(0,r.default)("strong",{},void 0,u)}},o}return(0,i.default)(t,e),t.prototype.render=function(){var e=this;return(0,r.default)(f.default,{onSubmit:this.handleSubmit,className:g.default.formContainer,render:function(t){var a=t.errors,o=t.handleChange;return(0,r.default)("div",{},void 0,(0,r.default)(m.default,{}),(0,r.default)("h3",{className:g.default.formTitle},void 0,(0,r.default)(c.FormattedMessage,{id:"login_enter_confirmation_code_title"})),(0,r.default)("p",{className:g.default.formText},void 0,(0,r.default)(c.FormattedMessage,{id:"login_enter_confirmation_code_text",values:e.translationsValues.email})),(0,r.default)("div",{className:g.default.fieldsContainer},void 0,(0,r.default)(p.default,{name:"code",onChange:o,error:e.props.error||a.code})),(0,r.default)(u.default,{htmlType:"submit",type:"btnMain",className:g.default.button},void 0,(0,r.default)(c.FormattedMessage,{id:"logIn"})),e.getResendCode())}})},t}(l.default.Component);y.propTypes={error:d.default.string,userAuthenticateData:d.default.shape({authToken:d.default.shape({email:d.default.string,phone:d.default.string}).isRequired}).isRequired,step:d.default.string.isRequired,authenticate:d.default.func.isRequired,track:d.default.func.isRequired},y.defaultProps={error:""};var C=function(){var e=this;this.trackResendCode=function(t){var a="sms"===t||"call"===t?"phone":t;e.props.track(S.LoginTrackingKeys.LOGIN_RESEND_CODE,{login_method:a,select_from:t})},this.resendCode=function(t,a){var r=e.props.authenticate;"phone"===a&&(a="sms");var n=(0,o.default)({grantType:_.LOGIN_GRANT_TYPE.retry,method:a},e.getDescriptor());e.trackResendCode(a),r(n,!1,!1)},this.handleSubmit=function(t){var a=t.values;(0,e.props.authenticate)((0,o.default)({grantType:_.LOGIN_GRANT_TYPE.pin,code:a.code},e.getDescriptor()),!0)},this.getDescriptor=function(){var t=e.props.userAuthenticateData.authToken,a=t.email,o=t.phone;return a?{email:a}:o?{phone:o}:""},this.getResendCode=function(){return e.props.step===_.STEPS.loginemailcode?(0,r.default)(h.default,{method:"email",onClick:e.resendCode}):(0,r.default)(v.default,{onClick:e.resendCode})}};t.default=y},2389:function(e,t,a){"use strict";t.__esModule=!0,t.mapStateToProps=t.LegionLogin=void 0;var o=K(a(14)),r=K(a(13)),n=K(a(20)),s=K(a(21)),i=K(a(24)),l=K(a(0)),d=K(a(1)),u=K(a(168)),c=K(a(37)),f=a(44),p=a(31),g=K(a(1110)),m=K(a(1111)),h=K(a(1112)),v=K(a(1113)),_=a(54),S=a(64),k=K(a(241)),y=K(a(238)),C=K(a(240)),w=K(a(346)),M=a(82),P=K(a(128)),T=K(a(1066)),b=K(a(104)),L=a(350),N=a(67),E=a(1551),O=a(349),I=a(1131),F=a(348),R=a(347),x=K(a(353)),A=K(a(355)),U=j(a(10)),D=j(a(66)),q=j(a(140)),V=j(a(354)),G=j(a(171)),B=j(a(1389)),W=a(247);function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function K(e){return e&&e.__esModule?e:{default:e}}var H=[g.default,m.default,h.default,v.default],Y=w.default.icons,z=[I.LOGIN_GRANT_TYPE.email,I.LOGIN_GRANT_TYPE.phone,I.LOGIN_GRANT_TYPE.recover],Q={user_banned:(0,i.default)(S.FormattedMessage,{id:"login_user_banned"}),unauthorized:(0,i.default)(S.FormattedMessage,{id:"login_unauthorized"}),invalid_token:(0,i.default)(S.FormattedMessage,{id:"login_invalid_token"}),invalid_password:(0,i.default)(S.FormattedMessage,{id:"login_invalid_password"}),invalid_phone:(0,i.default)(S.FormattedMessage,{id:"login_invalid_phone"}),expired_token:(0,i.default)(S.FormattedMessage,{id:"login_expired_token"}),invalid_user:(0,i.default)(S.FormattedMessage,{id:"login_invalid_user"}),too_many_requests:(0,i.default)(S.FormattedMessage,{id:"login_too_many_requests"}),unknown_error:(0,i.default)(S.FormattedMessage,{id:"login_unknown_error"})},X=t.LegionLogin=function(e){function t(a){(0,r.default)(this,t);var o=(0,n.default)(this,e.call(this,a));J.call(o);var s=I.STEPS.main,i="1";return a.step?s=a.step:a.loginModalState&&a.loginModalState.user&&!a.loginModalState.message&&(s=I.STEPS.sendmessage,i=a.loginModalState.user.avatar_id===i?"2":i),o.state={step:s,error:"",isOpened:!0,showLoader:!0,showFullLoader:!1,showOverlay:!0,nextStep:"",recover:!1},o.defaultUserImage=H[i-1],o.user={image:o.defaultUserImage,countryCode:a.config&&a.config.location&&a.config.location.country&&a.config.location.country.calling_code?a.config.location.country.calling_code:"",message:a.loginModalState&&a.loginModalState.message?a.loginModalState.message:""},o.redirectTo=a.loginModalState?a.loginModalState.redirectTo:o.props.redirect,a.loginModalState&&a.loginModalState.trackProps&&a.loginModalState.trackProps.origin?o.origin=a.loginModalState.trackProps.origin:o.origin="home",o.translationsValues={brand:{brand:a.brand}},o.selectFrom="own_flow",o}return(0,s.default)(t,e),t.prototype.componentWillMount=function(){this.props.cleanUserAuthDataFormState(),this.props.location&&this.props.location.pathname&&this.updateHash(this.props.location.pathname,this.state.step,this.props.location.query)},t.prototype.componentDidMount=function(){var e=this;W.smartlockHelper.isCredentialManagementSupportedInBrowser()&&this.state.step===I.STEPS.main?(this.displayOverlay(!0),this.track(F.LoginTrackingKeys.SMARTLOCK_MEDIATION_REQUEST,{login_type:"login",select_from:"smartlock_select"}),W.smartlockHelper.getCredentials("required").then(function(t){t&&"password"===t.type?(e.user.email=t.id,e.user.descriptor=t.id,e.selectFrom="smartlock_select",e.track(F.LoginTrackingKeys.LOGIN_SMARTLOCK_SIGN_IN_START,{login_method:B.getLoginMethod(t.id),login_type:"login"}),e.track(F.LoginTrackingKeys.SMARTLOCK_MEDIATION_RESPONSE,{login_type:"login",select_from:"smartlock_mediation_request",response_status:"credentials"}),e.displayOverlay(!0),e.authenticate("password",t.id,"",t.password)):(e.track(F.LoginTrackingKeys.SMARTLOCK_MEDIATION_RESPONSE,{login_type:"login",select_from:"smartlock_select",response_status:"no_credentials"}),e.displayFullLoader(!1),e.displayOverlay(!1),e.displayLoginLoader(!1))}).catch(function(t){e.track(F.LoginTrackingKeys.SMARTLOCK_ERROR,{error_message:t,login_type:"login",select_from:"smartlock_select"}),e.displayFullLoader(!1),e.displayOverlay(!1),e.displayLoginLoader(!1)})):(this.displayFullLoader(!1),this.displayOverlay(!1),this.displayLoginLoader(!1))},t.prototype.componentWillReceiveProps=function(e){e.location.hash!==this.props.location.hash&&e.location.hash!==this.state.step&&this.setState({step:e.location.hash})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.step!==t.step||(this.props.location.hash!==e.location.hash||(this.state.error!==t.error||(this.state.isOpened!==t.isOpened||(this.state.showOverlay!==t.showOverlay||(this.state.showLoader!==t.showLoader||this.state.showFullLoader!==t.showFullLoader)))))},t.prototype.updateHash=function(e,t,a){var r=void 0,n=(0,o.default)({},a);r=""+(r=a&&!D.isEmpty(a)?e+"?"+U.paramsToQueryString(n):e)+t,this.props.router.push(r)},t.prototype.removeHash=function(e){this.props.router.push(e)},t.prototype.render=function(){var e=void 0;return this.state.showFullLoader?(0,i.default)(C.default,{}):this.state.showOverlay?(0,i.default)("div",{className:u.default.overlay}):(this.state.showLoader?e=(0,i.default)("div",{className:u.default.loader},void 0,(0,i.default)(y.default,{})):this.state.step&&(e=this.getStep()),(0,i.default)("div",{"data-aut-id":"login"},void 0,(0,i.default)(k.default,{isOpened:this.state.isOpened,overlayClassName:u.default.login,contentClassName:u.default.modal,onClose:this.close},void 0,(0,i.default)("span",{className:u.default.close+" "+Y.panameraIcons+" "+Y["icon-Cross"],"data-aut-id":"btnClose",onClick:this.close}),e)))},t}(l.default.Component);X.propTypes={step:d.default.string,location:d.default.object,redirect:d.default.string,updateExistingUser:d.default.func,setLoginModalState:d.default.func,setToastMessageState:d.default.func.isRequired,loginModalState:d.default.object,loadAsModal:d.default.bool,onClose:d.default.func,router:d.default.object,originTrack:d.default.string,config:d.default.object,track:d.default.func.isRequired,sendChatMessage:d.default.func,brand:d.default.string.isRequired,language:d.default.string.isRequired,authenticate:d.default.func.isRequired,authenticateLogin:d.default.func.isRequired,userAuthenticateData:d.default.object,recoverPassword:d.default.func.isRequired,cleanUserAuthDataFormState:d.default.func.isRequired},X.defaultProps={step:I.STEPS.main,redirect:"/",location:{},originTrack:"",loadAsModal:!0,onClose:function(){},config:{},userAuthenticateData:{}};var J=function(){var e=this;this.authenticate=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.setState({recover:e.state.recover||t.grantType===I.LOGIN_GRANT_TYPE.recover}),e.displayLoginLoader(o),t.language=e.props.language,a?e.props.authenticateLogin(t,function(a){a&&a.ok&&a.data?(e.trackSignInComplete(a.data.status,t),e.updateFlow()):e.mapError(a),e.displayLoginLoader(!1)}):e.props.authenticate(t,function(a){a&&a.ok&&a.data?(e.trackSendData(a.data.next_action,a.data.status,t),e.updateFlow()):e.mapError(a),e.displayLoginLoader(!1)})},this.trackSignInComplete=function(t,a){"GRANTED"===t&&e.track(F.LoginTrackingKeys.LOGIN_SIGN_IN_COMPLETE,{login_method:(a.phone?"phone":a.email)||"email",select_from:a.grantType.toLowerCase()+"_screen"})},this.trackSendData=function(t,a,o){t&&"PENDING"===a&&z.includes(o.grantType)&&e.track(F.LoginTrackingKeys.LOGIN_SEND_DATA,{login_method:o.grantType===I.LOGIN_GRANT_TYPE.recover?o.method:o.grantType,select_from:t.toLowerCase()})},this.updateFlow=function(){var t=e.props.userAuthenticateData,a=t.auth,o=t.authToken,r={GRANTED:{pin:e.state.recover?I.STEPS.resetpassword:I.STEPS.loginemailcreatepassword},PIN:{phone:I.STEPS.loginsmscode,email:I.STEPS.loginemailcode,recover:o.email?I.STEPS.loginemailcode:I.STEPS.loginsmscode},PASSWORD:{phone:I.STEPS.loginsmsenterpassword,email:I.STEPS.loginemailenterpassword}},n=void 0;if("GRANTED"===a.status?n=r[a.status][o.grant_type]:"PENDING"===a.status&&(n=r[a.next_action][o.grant_type]),n)e.updateStep(n);else if("GRANTED"===a.status){var s=e.props.userAuthenticateData.auth.reactivated,i=void 0!==s&&s;e.checkNotification(!0,i)}},this.mapError=function(t){var a=Q.unknown_error;t.data&&t.data.error_type&&Q[t.data.error_type]&&(a=Q[t.data.error_type]),e.setState({error:a})},this.close=function(){e.state.step!==I.STEPS.notificationpermission||e.closeModal?e.props.loadAsModal?(e.redirectTo||e.removeHash(e.props.location.pathname),e.state.step!==I.STEPS.loginemailcreatepassword&&e.state.step!==I.STEPS.loginsmscreatepassword||!e.props.loginModalState||"function"!=typeof e.props.loginModalState.callback||e.props.loginModalState.callback(),e.props.setLoginModalState({state:!1,redirectTo:"",trackProps:{},entryPoint:0})):e.props.onClose():e.displayOverlay(!0)},this.onMessageSend=function(){e.closeModal&&e.close(),e.props.loginModalState.callback()},this.sendMessage=function(t){e.closeModal=t,e.props.sendChatMessage(e.user.message,e.props.loginModalState.user.id,e.props.loginModalState.itemId,"",{},e.onMessageSend)},this.onLoginOk=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.user.message&&e.user.message.length&&t?e.sendMessage(!0):e.props.loadAsModal?(e.redirectTo&&e.props.router.push(e.redirectTo),e.props.loginModalState&&"function"==typeof e.props.loginModalState.callback&&e.props.loginModalState.callback(),e.props.setLoginModalState({state:!1,redirectTo:"",trackProps:{},entryPoint:0})):e.props.onClose()},this.showReactivateToast=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var t=(0,i.default)(l.default.Fragment,{},void 0,(0,i.default)(S.FormattedMessage,{id:"account_reactivated_title"}),(0,i.default)(S.FormattedMessage,{id:"account_reactivated_body",values:e.translationsValues.brand}));e.props.setToastMessageState({isOpen:!0,message:t,expiration:5e3})}},this.checkNotification=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.showReactivateToast(a),"Notification"in window?"granted"===Notification.permission?q.setNotificationToken().then(function(){return e.onLoginOk(t)}):"default"===Notification.permission?(e.displayLoginLoader(!1),e.displayFullLoader(!1),e.updateStep(I.STEPS.notificationpermission),e.track(F.LoginTrackingKeys.PERMISSIONS_IMPRESSION,{permission_for:"notification"}),q.askForPermissionToReceiveNotifications(e.track).then(function(){return e.onLoginOk(t)})):e.onLoginOk():e.onLoginOk(t)},this.updateStep=function(t){e.setState({step:t,error:""}),e.updateHash(e.props.location.pathname,t)},this.checkGdpr=function(t){var a=G.getCountryConfig(e.props.config);!D.isEmpty(a)&&a.privacy_links&&a.privacy_links.terms_url&&a.privacy_links.privacy_url&&a.privacy_links.cookies_url?(e.setState({nextStep:t}),e.updateStep(I.STEPS.termsAndConditions)):e.updateStep(t)},this.updateUser=function(t,a){e.user[a]=t},this.displayLoginLoader=function(t){e.setState({showLoader:t})},this.displayOverlay=function(t){e.setState({showOverlay:t})},this.displayFullLoader=function(t){e.setState({showFullLoader:t})},this.createPassword=function(t){e.displayLoginLoader(!0);var a=c.default.getUser(),o={data:{password:t,passwordConfirmation:t}};e.props.updateExistingUser(a.id,o,function(t){if(t.data.error){var a=V.getError(t);e.setState({showLoader:!1,error:a},function(){e.track(F.LoginTrackingKeys.LOGIN_ERRORS,{error_message:e.state.error,error_origin:"createPassword"})})}else e.track(F.LoginTrackingKeys.CREATE_PASSWORD_SUCCESS,{login_method:"phone",select_from:"creation"}),e.checkNotification(!1)})},this.recoverPassword=function(t){var a=void 0,o={data:{password:t,passwordConfirmation:t}};e.setState({showLoader:!0}),e.props.userAuthenticateData.auth.pin_token&&(a=e.props.userAuthenticateData.auth.pin_token,o.data.source="challenger"),e.props.recoverPassword(a,o,function(t){if(t.data.error){var a=V.getError(t);e.setState({showLoader:!1,error:a},function(){e.track(F.LoginTrackingKeys.LOGIN_ERRORS,{error_message:e.state.error,error_origin:"recoverPassword"})})}else e.setState({error:""}),e.track(F.LoginTrackingKeys.CREATE_PASSWORD_SUCCESS,{login_method:"phone",select_from:"recover",origin:e.origin}),e.checkNotification()})},this.track=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,o.default)({},a);r.origin=e.origin,a.select_from||(r.select_from=e.selectFrom),"posting"===e.origin&&e.props.originTrack&&(r.reason=e.props.originTrack),e.props.loginModalState&&e.props.loginModalState.variant&&(r.experiment_variant=e.props.loginModalState.variant),e.props.track(t,r)},this.getItemUser=function(){return e.props.loginModalState?e.props.loginModalState.user:{}},this.onClickAccept=function(){var t=I.STEPS.main;e.state.nextStep&&(t=e.state.nextStep),e.updateStep(t)},this.onClickDeny=function(){e.updateStep(I.STEPS.main)},this.getStep=function(){var t,a=e.state,o=a.step,r=a.error,n=((t={})[E.PROPS.updateStep]=e.updateStep,t[E.PROPS.user]=e.user,t[E.PROPS.originTrack]=e.props.originTrack,t[E.PROPS.track]=e.track,t[E.PROPS.error]=r,t[E.PROPS.step]=o,t[E.PROPS.checkGdpr]=e.checkGdpr,t[E.PROPS.itemUser]=e.getItemUser(),t[E.PROPS.checkNotification]=e.checkNotification,t[E.PROPS.displayLoginLoader]=e.displayLoginLoader,t[E.PROPS.redirect]=e.props.redirect,t[E.PROPS.onClickGotIt]=e.close,t[E.PROPS.updateUser]=e.updateUser,t[E.PROPS.onClickAccept]=e.onClickAccept,t[E.PROPS.onClickDeny]=e.onClickDeny,t[E.PROPS.authenticate]=e.authenticate,t[E.PROPS.userAuthenticateData]=e.props.userAuthenticateData,t[E.PROPS.createPassword]=e.createPassword,t[E.PROPS.forgotPassword]=e.forgotPassword,t[E.PROPS.recoverPassword]=e.recoverPassword,t);return(0,E.authenticationFactory)(!0,o,n)}},Z=t.mapStateToProps=function(e,t){var a=t.config;return{loginModalState:e.loginModalState,originTrack:e.track.origin,config:e.config.collections[N.urls.getConfig],userAuthenticateData:(0,R.userAuthenticateData)(e),language:a.get("lang")}};t.default=(0,p.compose)(M.withRouter,P.default,b.default,(0,T.default)({contextTypes:{sendChatMessage:d.default.func},mapContextToProps:function(e){return{sendChatMessage:e.sendChatMessage}}}),(0,f.connect)(Z,function(e){return{cleanUserAuthDataFormState:function(){return e({type:"CLEAN_AUTH_DATA"})},authenticate:function(t,a){return e((0,O.authenticate)(t)).then(function(e){return a(e)})},setToastMessageState:function(t){return e((0,A.default)(t))},authenticateLogin:function(t,a){return e((0,O.authenticateLogin)(t)).then(function(e){return a(e)})},setLoginModalState:function(t){return e((0,x.default)(t))},updateExistingUser:function(t,a,o){return e((0,_.patch)(L.urls.getExistingUser(t),"ELEMENT_USERS",a)).then(function(e){return o(e)})},recoverPassword:function(t,a,o){return e((0,_.put)(L.urls.recoverPassword(t),"ELEMENT_USERS",a,{})).then(function(e){return o(e)})}}}))(X)}}]);
//# sourceMappingURL=desktop-login.olx.d334e407566c7019d15c.js.map